System.register("_BaseApp/src/core/app",["_BaseApp/src/auth"],(function(e,t){"use strict";var n,i,r,a,s,l,o,d,c,u,p,m,f,h,$,b,g,v,_,x,T,y,S,w,C,A,E,I,N,k;t&&t.id;return{setters:[function(t){n=t,e({isAuthenticated:t.isAuthenticated,getUserCaps:t.getUserCaps})}],execute:function(){i="",r=window.APP.root,a=window.APP.api,s=window.APP.name,e("cie",window.APP.cie),e("Feature",{emailEnabled:window.APP.emailEnabled}),d={hasError:!1},c=!1,u=!1,p="",m=!1,e("initialize",((e,t,n)=>{m=e,l=t,o=n})),e("requireAuthentication",f=()=>(!m||0!=window.location.hash.length&&"/#"!=window.location.hash&&"/#/"!=window.location.hash)&&n.requireAuthentication()),h=(e,t)=>{if(!u){if(f())return void n.redirectToSignin();u=!0;let r=S()?"js-server-error":"",a=w()?"js-fatal-error":"",s=i==n.NS?n.render():e(),l=document.getElementById("app-root");window.morphdom(l,`<div id="app-root" class="js-fadein ${r} ${a}">${s}</div>`,{getNodeKey:function(e){return e.id},onBeforeNodeAdded:function(e){return e},onNodeAdded:function(e){},onBeforeElUpdated:function(e,t){return!e.matches("input[type=text]:focus")&&(!e.matches("input[type=number]:focus")&&(!e.matches("textarea:focus")&&((!e.hasAttribute("js-skip-render-class")||!e.classList.contains(e.getAttribute("js-skip-render-class")))&&!(e.hasAttribute("js-skip-render-not-class")&&!e.classList.contains(e.getAttribute("js-skip-render-not-class"))))))},onElUpdated:function(e){},onBeforeNodeDiscarded:function(e){return!0},onNodeDiscarded:function(e){},onBeforeElChildrenUpdated:function(e,t){return!0}}),t(),$(),i==n.NS&&A(),u=!1}},$=()=>{document.title=p,document.body.id=i.toLowerCase().replace("_","-"),c||x()},e("render",b=()=>{h(l.render,l.postRender)}),e("renderOnNextTick",(()=>{setTimeout(b,0)})),e("pauseRender",((e=!0)=>{u=e})),e("setRenderDomain",(e=>{l=e})),e("prepareRender",((e="",t="")=>{g(),c||x(),t.length>0&&v(t),e.length>0&&_(e)})),e("transitionUI",g=()=>{let e=document.getElementById("app-root");e.classList.remove("js-fadein"),e.classList.add("js-waiting")}),e("setPageTitle",v=e=>{p=`${e} | ${s}`}),_=e=>{i=e},e("inContext",(e=>null!=i&&("string"==typeof e?i==e:-1!=e.indexOf(i)))),e("setError",(e=>(d.hasError=!0,d.messages.push(e),!1))),e("clearErrors",x=()=>{d.hasError=!1,d.status=0,d.messages=[]}),e("hasError",T=()=>null!=d&&d.hasError),e("hasNoError",y=()=>!T()),e("warningTemplate",(()=>y()?"":o.warningTemplate(d.messages))),e("serverError",S=()=>T()&&500==d.status),e("fatalError",w=()=>T()&&(403==d.status||-404==d.status)),e("fatalErrorTemplate",(()=>T()&&403==d.status?o.fatalErrorTemplate403():T()&&-404==d.status?o.fatalErrorTemplate404():void 0)),e("dirtyTemplate",((e,t=null)=>o.dirtyTemplate(e,t))),e("unexpectedTemplate",(()=>o.unexpectedTemplate())),C=()=>{c=!0},A=()=>{c=!1,x()},E=e=>{if(e.ok){if(204==e.status)return null}else{if(304==e.status)return null;if(401==e.status)throw d.hasError=!0,d.messages=["Not authenticated"],d.status=e.status,d;if(403==e.status)throw d.hasError=!0,d.messages=["Not authorized"],d.status=e.status,d;if(500!=e.status)throw d.hasError=!0,d.messages=[e.statusText],d.status=e.status,d}return e},I=e=>null==e?null:e.text().then((e=>{const t=/^\d{4}-\d{2}-\d{2}T\d{2}:\d{2}:\d{2}/;if(!e)return null;var n=JSON.parse(e,(function(e,n){return"string"==typeof n&&t.test(n)?new Date(n):n}));if(n.hasError)throw d.hasError=!0,d.messages=[n.message],d.status=500,d;return n})),N=e=>{throw null!=e.hasError?(d.hasError=e.hasError,d.messages=e.messages,d.status=e.status,401==d.status&&(C(),n.redirectToSignin())):(d.hasError=!0,d.messages=[e.message],d.status=-404),e},e("apiurl",(e=>`${r}${a}${e}`)),e("url",(e=>`${r}${e}`)),e("POST",((e,t)=>window.fetch(`${r}${a}${e}`,{method:"post",headers:{"Content-type":"application/json",Authorization:n.getAuthorization()},credentials:"include",mode:"cors",body:JSON.stringify(t)}).then(E).then(I).catch(N))),e("GET",(e=>window.fetch(`${r}${a}${e}`,{method:"get",headers:{Authorization:n.getAuthorization(),"Cache-Control":"no-cache",Pragma:"no-cache"},credentials:"include",mode:"cors"}).then(E).then(I).catch(N))),e("PUT",((e,t)=>window.fetch(`${r}${a}${e}`,{method:"put",headers:{"Content-type":"application/json",Authorization:n.getAuthorization()},credentials:"include",mode:"cors",body:JSON.stringify(t)}).then(E).then(I).catch(N))),e("DELETE",((e,t)=>window.fetch(`${r}${a}${e}`,{method:"delete",headers:{"Content-type":"application/json",Authorization:n.getAuthorization()},credentials:"include",mode:"cors",body:JSON.stringify(t)}).then(E).then(I).catch(N))),e("UPLOAD",((e,t)=>window.fetch(`${r}${a}${e}`,{method:"post",headers:{Authorization:n.getAuthorization()},credentials:"include",mode:"cors",body:t}).then(E).then(I).catch(N))),e("DOWNLOAD",k=e=>window.fetch(`${r}${a}${e}`,{method:"get",headers:{Authorization:n.getAuthorization()},credentials:"include",mode:"cors"}).then(E).then((e=>e.blob())).catch(N)),e("download",((e,t,n)=>{n&&(n.preventDefault(),n.stopPropagation());let i=document.createElement("a");return document.body.appendChild(i),k(e).then((e=>{if(null!=window.navigator.msSaveBlob)window.navigator.msSaveBlob(e,t);else{let n=window.URL.createObjectURL(e);i.href=n,i.rel="noopener",i.download=t,i.click(),setTimeout((e=>{window.URL.revokeObjectURL(n)}),1e3)}})).catch(b),!1})),e("view",((e,t,n)=>{n&&(n.preventDefault(),n.stopPropagation());let i=document.createElement("a");return document.body.appendChild(i),k(e).then((e=>{if(null!=window.navigator.msSaveOrOpenBlob)window.navigator.msSaveOrOpenBlob(e,t);else{let t=window.URL.createObjectURL(e);window.open(t,"_blank"),setTimeout((e=>{window.URL.revokeObjectURL(t)}),1e3)}})).catch(b),!1})),e("getPageState",((e,t,i)=>{let r=`pages-state:${n.getUID()}`,a=JSON.parse(localStorage.getItem(r));return null==a||null==a[e]||null==a[e][t]?i:a[e][t]})),e("setPageState",((e,t,i)=>{let r=`pages-state:${n.getUID()}`,a=JSON.parse(localStorage.getItem(r));return null==a&&(a={}),null==a[e]&&(a[e]={}),a[e][t]=i,localStorage.setItem(r,JSON.stringify(a)),i}))}}})),System.register("_BaseApp/src/core/router",[],(function(e,t){"use strict";var n,i,r,a,s,l,o,d,c;t&&t.id;return{setters:[],execute:function(){n=!1,e("reload",s=()=>{r=null,location.reload(!0)}),e("registerDirtyExit",(e=>{r=e})),e("registerHashChanged",(e=>{a=e})),e("addRoute",((e,t)=>{c.push({url:e,callback:t})})),e("goto",l=(e,t=0,n=!1)=>{r=null,0==t?(""!=e&&"/"!=e||(e="#/"),window.location.hash!=e?document.location=e:d(),n&&s()):setTimeout((()=>{l(e,0,n)}),t)}),e("gotoCurrent",o=(e=0)=>{0==e?d():setTimeout((()=>{o(0)}),e)}),e("goBackOrResume",(e=>{e?l(i):history.back()})),d=()=>{let e=window.location.hash;0==e.length&&(e="#/");const t=c.filter((t=>e.match(new RegExp(t.url))))[0];if(t){if(!n){if(null!=r){let t=r();if(null!=t&&t)return n=!0,i=e,void history.back()}if(a&&a(e),t.callback){let n=new RegExp(t.url).exec(e);n.length<2||null==n[1]?t.callback([]):t.callback(n[1].split("/"))}}n=!1}},c=[],window.addEventListener("hashchange",d),window.addEventListener("DOMContentLoaded",d)}}})),System.register("_BaseApp/src/lib-ts/misc",[],(function(e,t){"use strict";var n,i,r,a,s,l,o,d,c,u,p,m;t&&t.id;return{setters:[],execute:function(){n={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},i=12e-5,e("escapeHTML",r=(e,t=!0)=>e.replace(t?/[&<>'"]/g:/[&<>]/g,(function(e){return n[e]}))),e("keepAttr",((e,t)=>{let n=document.getElementById(e);return null==n?`id="${e}"`:`id="${e}" ${t}="${n.getAttribute(t)}"`})),e("keepClass",((e,t,n)=>{let i=document.getElementById(e);return null==i?`id="${e}" class="${t}"`:`id="${e}" class="${t} ${i.classList.contains(n)?n:""}"`})),e("clone",a=e=>{let t={};return Object.keys(e).forEach((n=>{e.hasOwnProperty(n)&&(null==e[n]?t[n]=null:"function"==typeof e[n].getTime?t[n]=new Date(e[n].getTime()):Array.isArray(e[n])?(t[n]=[],e[n].forEach((e=>t[n].push(a(e))))):"object"==typeof e[n]?t[n]=a(e[n]):t[n]=e[n])})),t}),e("same",s=(e,t)=>{let n=!0;return Object.keys(e).forEach((r=>{if(n&&e.hasOwnProperty(r)&&"_"!=r.charAt(0)){let a=e[r],l=t[r],o=!1;if(null!=a)if("function"==typeof a.getTime)a=a.getTime(),o=!0;else if(Array.isArray(a)){for(let e=0;e<a.length;e++)if(n=n&&l&&s(a[e],l[e]),!n)return!1}else"object"==typeof a?n=n&&l&&s(a,l):o=!0;if(null!=l)if("function"==typeof l.getTime)l=l.getTime(),o=!0;else if(Array.isArray(l)){for(let e=0;e<l.length;e++)if(n=n&&a&&s(l[e],a[e]),!n)return!1}else"object"==typeof l?n=n&&a&&s(l,a):o=!0;if(o&&("lat"==r||"lng"==r?Math.abs(a-l)>i&&(n=!1):a!==l&&(n=!1)),!n)return!1}})),n}),e("changes",((e,t)=>{let n=[];return Object.keys(e).forEach((r=>{if("xtra"!=r&&"perm"!=r){let a=e[r],s=t[r];if(null!=a&&"function"==typeof a.getTime&&(a=a.getTime()),null!=s&&"function"==typeof s.getTime&&(s=s.getTime()),a!==s){let l=!0;if(("lat"==r||"lng"==r)&&Math.abs(a-s)<i&&(l=!1),l){let i=i18n(r.toUpperCase());n.push(i),console.log(`${r}[${i}] BEFORE=${e[r]}, AFTER=${t[r]}`)}}}})),0==n.length?null:`Fields: [${n.join(", ")}]`})),e("toInputText",(e=>null==e?"":r(e.toString()))),e("fromInputText",((e,t=null)=>{let n=document.getElementById(e);return null==n?t:n.value})),e("fromInputTextNullable",((e,t=null)=>{let n=document.getElementById(e);return null==n?t:""==n.value?null:n.value})),e("toInputNumber",(e=>null==e?"":e.toString())),e("fromInputNumber",((e,t=null)=>{let n=document.getElementById(e);return null==n?t:+n.value})),e("fromInputNumberNullable",((e,t=null)=>{let n=document.getElementById(e);return null==n?t:""==n.value?null:+n.value})),e("toInputDate",l=e=>null==e||"invalid date"==e.toString().toLowerCase()?"":moment(e).format("YYYY-MM-DD")),e("fromInputDate",((e,t=null)=>{let n=document.getElementById(e);if(null==n)return t;var i=n.value.split("-");if(null==t)return new Date(+i[0],+i[1]-1,+i[2],0,0,0,0);try{let e=new Date(t.getTime());return e.setFullYear(+i[0],+i[1]-1,+i[2]),e}catch(e){return null}})),e("fromInputDateNullable",((e,t=null)=>{let n=document.getElementById(e);if(null==n)return t;if(""==n.value)return null;var i=n.value.split("-");if(null==t)return new Date(+i[0],+i[1]-1,+i[2],0,0,0,0);try{let e=new Date(t.getTime());return e.setFullYear(+i[0],+i[1]-1,+i[2]),e}catch(e){return null}})),e("fromInputTime",((e,t=null)=>{let n=document.getElementById(e);if(null==n)return t;var i=n.value.split(":");if(null==t){let e=new Date;return e.setHours(+i[0]),e.setMinutes(+i[1]),e}try{let e=new Date(t.getTime());return e.setHours(+i[0]),e.setMinutes(+i[1]),e}catch(e){return null}})),e("fromInputTimeComboNullable",((e,t=null)=>null==t?null:o(e,t))),e("fromInputTimeNullable",o=(e,t=null)=>{let n=document.getElementById(e);if(null==n)return t;if(""==n.value)return t;var i=n.value.split(":");if(null==t){let e=new Date;return e.setHours(+i[0]),e.setMinutes(+i[1]),e}try{let e=new Date(t.getTime());return e.setHours(+i[0]),e.setMinutes(+i[1]),e}catch(e){return null}}),e("toInputCheckbox",(e=>e.toString())),e("fromInputCheckbox",((e,t=null)=>{let n=document.getElementById(e);return null==n?t:n.checked})),e("fromInputCheckboxMask",((e,t=null)=>{let n=document.getElementsByName(e);if(null==n||0==n.length)return t;let i=0;for(let e=0;e<n.length;e++){let t=n[e];i+=t.checked?+t.dataset.mask:0}return i})),e("toStaticText",(e=>null==e?"":e)),e("toStaticTextNA",(e=>null==e?"n/a":e.replace(/\n/g,"<br>"))),e("toStaticNumber",(e=>null==e?"":e.toString())),e("toStaticNumberNA",(e=>null==e?"n/a":e.toString())),e("toStaticNumberDecimal",((e,t,n=!1)=>{if(null==e)return"";let i=Math.pow(10,t);return n?(Math.fround(e*i)/i).toFixed(t):(Math.fround(e*i)/i).toString()})),e("toStaticMoney",(e=>"$"+(null!=e?e:0).toFixed(2).replace(/(\d)(?=(\d{3})+(?!\d))/g,"$1,"))),e("toStaticDateTime",d=e=>null!=e?moment(e).format("LLL"):""),e("toStaticDateTimeNA",(e=>null!=e?moment(e).format("LLL"):"n/a")),e("toStaticDate",(e=>null!=e?moment(e).format("LL"):"")),e("toStaticDateNA",(e=>null!=e?moment(e).format("LL"):"n/a")),e("toStaticCheckbox",(e=>e?'<i class="fal fa-check-square"></i>':'<span style="opacity: 0.25"><i class="fal fa-square"></i></span>')),e("toStaticCheckboxYesNo",(e=>null==e?"n/a":e?i18n("YES"):i18n("NO"))),e("filesizeText",(e=>{if(0==e)return"n/a";var t=-1;do{e/=1024,t++}while(e>1024);return Math.max(e,.1).toFixed(1)+[" kB"," MB"," GB"," TB","PB","EB","ZB","YB"][t]})),e("fromSelectNumber",((e,t=null)=>{let n=document.getElementById(e);if(null==n||-1==n.selectedIndex)return t;let i=n.options[n.selectedIndex].value;return i.length>0?+i:null})),e("fromSelectText",((e,t=null)=>{let n=document.getElementById(e);if(null==n||-1==n.selectedIndex)return t;let i=n.options[n.selectedIndex].value;return i.length>0?i:null})),e("fromSelectBoolean",((e,t=null)=>{let n=document.getElementById(e);if(null==n||-1==n.selectedIndex)return t;let i=n.options[n.selectedIndex].value;return i.length>0?"true"==i:null})),e("fromRadioNumber",((e,t=null)=>{let n=document.getElementsByName(e);if(null==n||0==n.length)return t;for(let e=0;e<n.length;e++){let t=n[e];if(t.checked){let e=t.dataset.value;return e.length>0?+e:null}}})),e("fromRadioString",((e,t=null)=>{let n=document.getElementsByName(e);if(null==n||0==n.length)return t;for(let e=0;e<n.length;e++){let t=n[e];if(t.checked){let e=t.dataset.value;return e.length>0?e:null}}})),e("fromAutocompleteNumber",((e,t=null)=>{let n=document.getElementById(e);if(null==n)return t;let i=n.dataset.key;return"undefined"===i?t:0==i.length?null:+i})),e("fromAutocompleteText",((e,t=null)=>{let n=document.getElementById(e);if(null==n)return t;let i=n.dataset.key;return"undefined"===i?t:0==i.length?null:i})),e("toastSuccess",c=e=>{let t=document.createElement("div");t.classList.add("js-toast"),t.style.display="none",document.body.appendChild(t);let n=getComputedStyle(t).backgroundColor;t.parentNode.removeChild(t),Toastify({text:e,className:"js-toast",backgroundColor:n,position:"left"}).showToast()}),e("toastSuccessSave",(()=>{c(i18n("Data was saved successfully"))})),e("toastSuccessUpload",(()=>{c(i18n("File was uploaded successfully"))})),e("toastFailure",((e="Your last action failed to execute",t=15e3)=>{let n=document.createElement("div");n.classList.add("js-toast-bad"),n.style.display="none",document.body.appendChild(n);let i=getComputedStyle(n).backgroundColor;n.parentNode.removeChild(n),Toastify({text:`<i class="far fa-frown" style="opacity:0.5"></i>&nbsp;${e}`,className:"js-toast-bad",backgroundColor:i,position:"center",gravity:"top",duration:t,close:!0}).showToast()})),e("blameText",(e=>`Last updated on ${d(e.updatedUtc)} by ${e.by}`)),e("toInputTimeHHMM",(e=>{if(null==e)return"";var t=e.getHours(),n=e.getMinutes();return`${t<10?"0"+t:t}:${n<10?"0"+n:n}`})),e("toInputTimeHHMMSS",(e=>{if(null==e)return"";var t=e.getHours(),n=e.getMinutes();let i=e.getSeconds();return`${t<10?"0"+t:t}:${n<10?"0"+n:n}:${i<10?"0"+i:i}`})),e("toInputDateTime_2rows",(e=>{var t=e.getHours(),n=e.getMinutes();let i=e.getSeconds();var r=t<12?"AM":"PM";let a=`${(t=(t%=12)||12)<10?"0"+t:t}:${n<10?"0"+n:n}:${i<10?"0"+i:i} ${r}`;return`${l(e)}<br/>${a}`})),e("toInputDateTime_hhmm_2rows",u=e=>{var t=e.getHours(),n=e.getMinutes(),i=t<12?"AM":"PM";let r=`${(t=(t%=12)||12)<10?"0"+t:t}:${n<10?"0"+n:n} ${i}`;return`${l(e)}<br/>${r}`}),e("toInputDateTime_hhmm",(e=>null==e?"":u(e).replace("<br/>","&nbsp;"))),e("toInputDateTime_hhmmssNA",(e=>{if(null==e)return"n/a";var t=e.getHours(),n=e.getMinutes(),i=e.getSeconds(),r=t<12?"AM":"PM";let a=`${(t=(t%=12)||12)<10?"0"+t:t}:${n<10?"0"+n:n}:${i<10?"0"+i:i} ${r}`;return`${l(e)}&nbsp;${a}`})),e("toInputDateTime_hhmm24",(e=>{if(null==e)return"";var t=e.getHours(),n=e.getMinutes();let i=`${t<10?"0"+t:t}:${n<10?"0"+n:n}`;return`${l(e)} ${i}`})),e("formatYYYYMMDD",p=(e,t="/")=>{let n=""+(e.getMonth()+1),i=""+e.getDate(),r=e.getFullYear();return n.length<2&&(n="0"+n),i.length<2&&(i="0"+i),[r,n,i].join(t)}),e("formatYYYYMMDDHHMM",(e=>{let t=e.getFullYear(),n=""+(e.getMonth()+1),i=""+e.getDate(),r=""+e.getHours(),a=""+e.getMinutes();return n.length<2&&(n="0"+n),i.length<2&&(i="0"+i),r.length<2&&(r="0"+r),a.length<2&&(a="0"+a),[t,n,i,r,a].join("")})),e("formatMMDDYYYY",((e,t="/")=>{let n=""+(e.getMonth()+1),i=""+e.getDate(),r=e.getFullYear();return n.length<2&&(n="0"+n),i.length<2&&(i="0"+i),[n,i,r].join(t)})),e("parseYYYYMMDD",(e=>new Date(e))),e("parseYYYYMMDD_number",(e=>{let t=Math.floor(e/1e4),n=Math.floor((e-1e4*t)/100)-1;return new Date(t,n,e%100,0,0,0,0)})),e("dateOnly",(e=>new Date(p(e)))),e("previousDate",(e=>{var t=new Date(e);return t.setDate(t.getDate()-1),t})),e("nextDate",(e=>{var t=new Date(e);return t.setDate(t.getDate()+1),t})),e("formatDuration",((e,t)=>{let n=Math.floor((t.getTime()-e.getTime())/1e3),i=n%60,r=Math.floor(n/60);if(0==r)return`${i} sec`;r%=60;let a=Math.floor(n/3600);return 0==a?`${r}m ${i}s`:`${a}h ${r}m ${i}s`})),e("isDateInstance",(e=>!isNaN(e)&&e instanceof Date)),e("isValidDateString",(e=>{if(!e.match(/^\d{4}-\d{2}-\d{2}$/))return!1;var t=new Date(e),n=t.getTime();return!(!n&&0!=n)&&t.toISOString().slice(0,10)==e})),e("isValidTimeString",(e=>{let t=e.match(/^(\d{1,2}):(\d{2})([ap]m)?$/);return!!t&&!(+t[1]>23||+t[2]>59)})),e("formatLatLong",(e=>{if(null==e)return"";let t=Math.trunc(e),n=Math.trunc(60*(e-t)),i=Math.round(3600*(e-(t+n/60)));return 60==i&&(i=0,n++),60==n&&(n=0,t++),`${t<10?"0"+t:t}°&nbsp;${n<10?"0"+n:n}′&nbsp;${i<10?"0"+i:i}″`})),e("toInputLatLong",(e=>{if(null==e)return"";let t=Math.trunc(e),n=Math.trunc(60*(e-t)),i=Math.round(3600*(e-(t+n/60)));return 60==i&&(i=0,n++),60==n&&(n=0,t++),`${t<10?"0"+t:t}° ${n<10?"0"+n:n}′ ${i<10?"0"+i:i}″`})),e("toInputLatLongDDMMCC",(e=>{if(null==e)return"";let t=Math.trunc(e),n=60*(e-t);return 60==n&&(n=0,t++),`${t<10?"0"+t:t}° ${n<10?"0"+n.toFixed(2):n.toFixed(2)}′`})),e("fromInputLatLong",m=(e,t=null)=>{let n=document.getElementById(e);if(null==n)return t;if("true"==n.dataset.isddmmcc){let e=n.value.replace("°","").replace("′","").split(" ");if(2!=e.length)return t;let i=+e[0];if(isNaN(i))return t;let r=+e[1];return isNaN(r)||r>59?t:i+r/60}{let e=n.value.replace("°","").replace("′","").replace("″","").split(" ");if(3!=e.length)return t;let i=+e[0];if(isNaN(i))return t;let r=+e[1];if(isNaN(r)||r>59)return t;let a=+e[2];return isNaN(a)||a>59?t:i+r/60+a/3600}}),e("fromInputLatLongNullable",((e,t=null)=>{let n=document.getElementById(e);return null==n?t:""==n.value?null:m(e,t)})),e("getLatLongFullPrecision",(e=>e)),e("createWhite",((e,t)=>t.reduce(((t,n)=>(t[n]=e[n],t)),{}))),e("createBlack",((e,t)=>{var n=a(e);return t.forEach((e=>delete n[e])),n}))}}})),System.register("_BaseApp/src/lib-ts/domlib",[],(function(e,t){"use strict";t&&t.id;return{setters:[],execute:function(){e("closest",(function(e,t){let n=e,i=t.toLowerCase();if(n.tagName&&n.tagName.toLowerCase()==i)return n;for(;n&&n.parentElement;)if(n=n.parentElement,n.tagName&&n.tagName.toLowerCase()==i)return n;return null})),e("closestByClassName",(function(e,t){let n=e;if(n.classList.contains(t))return n;for(;n&&n.parentElement;)if(n=n.parentElement,n.classList.contains(t))return n;return null})),e("live",((e,t,n)=>{document.addEventListener(e,(function(e){for(var i=e.target,r=!1;i&&!(r=i.classList&&i.classList.contains(t));)i=i.parentElement;r&&n.call(i,e)}))})),e("setCookie",(function(e,t,n=0){if(n>0){var i=new Date;i.setTime(i.getTime()+24*n*60*60*1e3),document.cookie=e+"="+t+";expires="+i.toUTCString()+";path=/"}else document.cookie=e+"="+t+";path=/"})),e("getCookie",(function(e){for(var t=e+"=",n=document.cookie.split(";"),i=0;i<n.length;i++){for(var r=n[i];" "==r.charAt(0);)r=r.substring(1);if(0==r.indexOf(t))return r.substring(t.length,r.length)}return""})),e("duplicateEntity",(function(e){let t=document.createElement(e.tagName);for(let n=0;n<e.attributes.length;n++){let i=e.attributes[n];t.setAttribute(i.name,i.value)}return t})),e("getElementPosition",(e=>{for(var t=0,n=0;e;){if("BODY"==e.tagName){var i=e.scrollLeft||document.documentElement.scrollLeft,r=e.scrollTop||document.documentElement.scrollTop;t+=e.offsetLeft-i+e.clientLeft,n+=e.offsetTop-r+e.clientTop}else t+=e.offsetLeft-e.scrollLeft+e.clientLeft,n+=e.offsetTop-e.scrollTop+e.clientTop;e=e.offsetParent}return{x:t,y:n}}))}}})),System.register("_BaseApp/src/auth",["_BaseApp/src/core/app","_BaseApp/src/core/router","_BaseApp/src/lib-ts/misc"],(function(e,t){"use strict";var n,i,r,a,s,l,o,d,c,u,p,m,f,h,$,b,g,v,_,x,T,y,S,w,C,A,E,I,N;t&&t.id;return{setters:[function(e){n=e},function(e){i=e},function(e){r=e}],execute:function(){e("NS",a="App_Auth"),s={},l={},o="/",function(e){e[e.normal=0]="normal",e[e.forgotten=1]="forgotten",e[e.reminded=2]="reminded",e[e.invited=3]="invited",e[e.resetted=4]="resetted"}(c||(c={})),u=c.normal,p=e=>{var t;let n=null!==(t=window.APP.portalbag.feature.enableEmail)&&void 0!==t&&t;return`\n<form onsubmit="App_Auth.signin(); return false;">\n<input type="submit" style="display:none;" id="App_Auth_dummy_submit">\n <div class="has-text-centered js-help">\n <h2>\n ${i18n("Sign in to start your session")}\n </h2>\n </div>\n <div class="field">\n <div class="control has-icons-left">\n <input type="email" class="input" id="App_Auth_email" placeholder="${i18n("EMAIL")}" value="${r.toInputText(e.email)}" required>\n <span class="icon is-small is-left">\n <i class="fas fa-envelope"></i>\n </span>\n </div>\n </div>\n <div class="field">\n <div class="control has-icons-left">\n <input type="password" class="input" id="App_Auth_password" placeholder="${i18n("PASSWORD")}" required>\n <span class="icon is-small is-left">\n <i class="fas fa-lock"></i>\n </span>\n </div>\n </div>\n <button type="submit" class="button is-block is-primary is-fullwidth">\n <i class="fas fa-sign-in-alt"></i>&nbsp;${i18n("Sign In")}\n </button>\n${n?`\n <div class="has-text-right js-submenu">\n <button type="button" class="button is-text is-italic is-white" onclick="App_Auth.setCurrentStep(${c.forgotten})">\n ${i18n("I need a new password!")}\n </button>\n </div>\n`:""}\n</form>\n`},m=e=>`\n<form onsubmit="App_Auth.forgotPassword(); return false;">\n<input type="submit" style="display:none;" id="App_Auth_dummy_submit">\n <div class="has-text-centered js-help">\n <h2>\n ${i18n("Let's fix that!")}\n </h2>\n <div class="content">\n <p>\n ${i18n("Enter your email address below. You will receive an email with a link to allow you to enter a new password")}\n </p>\n <p>\n ${i18n("The email link will expire in one week")}\n </p>\n </div>\n </div>\n <div class="field">\n <div class="control has-icons-left">\n <input type="email" class="input" id="App_Auth_email" placeholder="${i18n("EMAIL")}" value="${r.toInputText(e.email)}" required>\n <span class="icon is-small is-left">\n <i class="fas fa-lock"></i>\n </span>\n </div>\n </div>\n <button type="submit" class="button is-block is-primary is-fullwidth">\n <i class="fas fa-envelope"></i>&nbsp;${i18n("Send Email")}\n </button>\n <div class="has-text-left js-submenu">\n <button type="button" class="button is-text is-italic is-white" onclick="App_Auth.setCurrentStep(${c.normal})">\n ${i18n("Cancel that, I remember my password now!")}\n </button>\n </div>\n</form>\n`,f=e=>`\n<form onsubmit="App_Auth.forgotPassword(); return false;">\n<input type="submit" style="display:none;" id="App_Auth_dummy_submit">\n <div class="has-text-centered js-help">\n <div class="section">\n <p class="has-text-success">\n <span class="fa-stack fa-2x">\n <i class="far fa-circle fa-stack-2x"></i>\n <i class="fa fa-check fa-stack-1x"></i>\n </span>\n </p>\n </div>\n <h2>\n ${i18n("Password reset email sent")}\n </h2>\n <div class="content">\n <p>\n ${i18n("An email has been sent to")} <b>${e.email}</b>\n </p>\n <p>\n ${i18n("Check out the spam folder if you don't see the email in your inbox within 5 minutes")}\n </p>\n </div>\n <button type="button" class="button is-text is-white" onclick="App_Auth.setCurrentStep(${c.normal})">${i18n("Done")}</a>\n </div>\n</form>\n`,h=(e,t)=>`\n<form onsubmit="App_Auth.signin(${t}); return false;">\n<input type="submit" style="display:none;" id="App_Auth_dummy_submit">\n <div class="has-text-centered js-help">\n <h2>\n ${i18n("Now, let's set your password")}\n </h2>\n <div class="content">\n <p>\n ${i18n("You need to enter your password twice below")}\n </p>\n </div>\n </div>\n <div class="field">\n <div class="control has-icons-left">\n <input type="email" class="input" id="App_Auth_email" placeholder="${i18n("EMAIL")}" value="${r.toInputText(e.email)}">\n <span class="icon is-small is-left">\n <i class="fas fa-envelope"></i>\n </span>\n </div>\n </div>\n\x3c!--\n <div style="margin: 1rem;">\n <p style="margin: 1rem;">Passwords must meet the following complexity requirements:</p>\n <ul style="padding-left: 5rem; list-style: disc;">\n <li>8 characters minimum</li>\n <li>At least one lower case character</li>\n <li>At least one upper case character</li>\n <li>At least one special character</li>\n </ul>\n </div>\n--\x3e\n <div class="field">\n <div class="control has-icons-left">\n <input type="password" class="input" id="App_Auth_password" placeholder="${i18n("PASSWORD")}" onkeyup="App_Auth.ensurePasswordMatch()" required>\n <span class="icon is-small is-left">\n <i class="fas fa-lock"></i>\n </span>\n </div>\n </div>\n <div class="field">\n <div class="control has-icons-left">\n <input type="password" class="input" id="App_Auth_password2" placeholder="${i18n("ENTER PASSWORD AGAIN")}" onkeyup="App_Auth.ensurePasswordMatch()" required>\n <span class="icon is-small is-left">\n <i class="fas fa-lock"></i>\n </span>\n </div>\n </div>\n <button type="submit" class="button is-block is-primary is-fullwidth">\n <i class="fas fa-sign-in-alt"></i>&nbsp;${i18n("Sign In")}\n </button>\n</form>\n`,$=(e,t,n)=>`\n<section class="is-fullheight">\n <div class="container">\n <div class="column is-4 is-offset-4">\n <div class="box">\n <h1 class="has-text-centered has-text-dark">${i18n("APP WELCOME")}</h1>\n <div id="js_signin_box">\n <figure>\n <img>\n </figure>\n </div>\n${n}\n${t}\n </div>\n </div>\n </div>\n</section>`,e("fetch",(e=>{o="/",null!=e&&e.length>0&&(o=decodeURIComponent(e[0])),n.prepareRender(a,i18n("Signin")),i.registerDirtyExit(null),n.render()})),e("fetchInvitation",(e=>{o="/";let t=e[0];n.prepareRender(a,i18n("Signin")),n.GET(`/auth/accept-invitation/${t}`).then((e=>{u=c.invited,l=e,n.render()})).catch(n.render)})),e("fetchReset",(e=>{o="/";let t=e[0];n.prepareRender(a,i18n("Signin")),n.GET(`/auth/reset-password/${t}`).then((e=>{u=c.resetted,l=e,n.render()})).catch(n.render)})),e("render",(()=>{if(n.fatalError())return n.fatalErrorTemplate();if(null==l)return n.serverError()?$(0,"",n.warningTemplate()):"";let e;switch(u){case c.normal:e=p(l);break;case c.forgotten:e=m(l);break;case c.reminded:e=f(l);break;case c.invited:e=h(l,c.invited);break;case c.resetted:e=h(l,c.resetted)}const t=n.warningTemplate();return $(0,e,t)})),e("postRender",(()=>{n.inContext(a)})),b=()=>({email:r.fromInputText("App_Auth_email"),password:r.fromInputText("App_Auth_password"),cie:n.cie}),g=e=>(0==e.email.length&&n.setError("Email is required"),e.password&&0==e.password.length&&n.setError("Password is required"),n.hasNoError()),v=()=>{document.getElementById("App_Auth_dummy_submit").click();let e=document.getElementsByTagName("form")[0];return e.classList.add("js-error"),e.checkValidity()},e("ensurePasswordMatch",(()=>{let e=document.getElementById("App_Auth_password"),t=document.getElementById("App_Auth_password2");e.value!=t.value?t.setCustomValidity(i18n("Passwords don't match")):_(e.value)?t.setCustomValidity(""):t.setCustomValidity("Password doesn't meet complexity requirement")})),_=e=>e.length>0,e("signin",((e=0)=>{let t=b();if(!v())return;if(!g(t))return n.render();let r=e==c.invited?"invited":e==c.resetted?"resetted":"signin";n.transitionUI(),n.POST(`/auth/${r}`,t).then((e=>{w(e.token),A(),u=c.normal,i.goto(o,1,!0)})).catch(n.render)})),e("signout",(()=>{n.transitionUI(),n.POST("/auth/signout",null).then((e=>{I(),o="/",i.goto(o,10)})).catch(n.render)})),e("forgotPassword",(()=>{let e=b();if(v()){if(!g(e))return n.render();n.transitionUI(),n.POST("/auth/request-password-reset",e).then((t=>{l=e,u=c.reminded,n.render()})).catch(n.render)}})),e("setCurrentStep",(e=>{l=b(),u=e,n.render()})),e("getAuthorization",x=()=>N()?null==s||null==s.token||(new Date).getTime()/1e3>s.expiry?"":"Bearer "+s.token:""),e("getEmail",(()=>null==s||null==s.user?null:s.user.email)),e("getName",(()=>null==s||null==s.user?null:s.user.name)),e("getUID",(()=>null==s||null==s.user?null:s.user.uid)),e("getCie",(()=>null==s||null==s.user?null:s.user.cie)),e("getCurrentYear",(()=>null==s||null==s.user?null:s.user.year)),e("getPermissions",T=()=>null==s||null==s.user?[]:s.user.permissions||[]),e("hasPerm",(e=>-1!=T().indexOf(e))),e("getRoles",y=()=>null==s||null==s.user?[]:s.user.roles||[]),e("hasRole",(e=>-1!=y().indexOf(e))),e("getUserCaps",(()=>null==s||null==s.user?null:s.user)),e("requireAuthentication",(()=>!(0==window.location.hash.indexOf("#/signin/")||0==window.location.hash.indexOf("#/accept-invitation/")||0==window.location.hash.indexOf("#/reset-password/")||S()))),e("isAuthenticated",S=()=>x().length>0),e("redirectToSignin",(()=>{I();let e=window.location.hash;i.goto(`#/signin/${encodeURIComponent(e)}`,100)})),e("refreshLoginData",(()=>n.POST("/auth/refresh",null).then((e=>{w(e.token),A(),i.reload()})))),w=e=>{let t=e.split(".")[1].replace(/-/g,"+").replace(/_/g,"/"),n=C(t),i=JSON.parse(n),r=i.perms||[];Array.isArray(r)||(r=[r]);let a=i["http://schemas.microsoft.com/ws/2008/06/identity/claims/role"];Array.isArray(a)||(a=[a]),(s={}).token=e,s.user={email:i["http://schemas.xmlsoap.org/ws/2005/05/identity/claims/emailaddress"],name:i.name,permissions:r,roles:a,uid:+i.uid,cie:+i.cie},s.expiry=i.exp},C=e=>decodeURIComponent(Array.prototype.map.call(atob(e),(function(e){return"%"+("00"+e.charCodeAt(0).toString(16)).slice(-2)})).join("")),A=()=>{d.setItem("signin",JSON.stringify(s))},E=()=>{s=JSON.parse(d.getItem("signin"))},I=()=>{d.removeItem("signin"),s={}},N=()=>null!=d.getItem("signin"),d=sessionStorage,E()}}})),System.register("_BaseApp/src/permission",["_BaseApp/src/auth"],(function(e,t){"use strict";var n;t&&t.id;return{setters:[function(e){n=e}],execute:function(){e("buttonTemplate",(e=>`\n<a class="button" href="#/page/${e}" style="margin-left: 4px;">\n <span class="icon is-small">\n <i class="fa fa-lock"></i>\n </span>\n</a>`)),e("isAdmin",(()=>-1!=n.getRoles().indexOf(1))),e("pageTODO",-1)}}})),System.register("_BaseApp/src/home",["_BaseApp/src/core/app","_BaseApp/src/core/router"],(function(e,t){"use strict";var n,i,r;t&&t.id;return{setters:[function(e){n=e},function(e){i=e}],execute:function(){e("NS",r="App_Home"),e("fetch",(()=>{n.prepareRender(r,"Home"),i.registerDirtyExit(null),n.render()})),e("render",(()=>(n.inContext(r),""))),e("postRender",(()=>{}))}}})),System.register("_BaseApp/src/layout",["_BaseApp/src/home"],(function(e,t){"use strict";var n,i,r,a;t&&t.id;return{setters:[function(e){n=e}],execute:function(){e("render",(()=>`\n${i()}\n${r()}\n${n.render()}\n${a()}\n`)),e("postRender",(()=>{n.postRender()})),i=()=>"",r=()=>"",a=()=>""}}})),System.register("_BaseApp/src/main",["_BaseApp/src/core/app","_BaseApp/src/core/router","_BaseApp/src/auth"],(function(e,t){"use strict";var n,i,r,a;t&&t.id;return{setters:[function(e){n=e},function(e){i=e},function(e){r=e}],execute:function(){window.App_Auth=r,i.addRoute("^#/signin/(.*)$",(e=>{r.fetch(e)})),i.addRoute("^#/signout/?$",r.signout),i.addRoute("^#/accept-invitation/(.*)$",r.fetchInvitation),i.addRoute("^#/reset-password/(.*)$",r.fetchReset),a=()=>{setInterval((()=>{n.requireAuthentication()&&(console.log("Authentication required"),i.reload())}),2e3)},e("startup",((e,t,r)=>(n.initialize(e,t,r),setTimeout((()=>{a(),i.gotoCurrent()}),0),{app:n,router:i})))}}})),System.register("_BaseApp/src/lang/en-CA",[],(function(e,t){"use strict";t&&t.id;return{setters:[],execute:function(){e("en_CA",{values:{EMAIL:"Email",PASSWORD:"Password"}})}}})),System.register("_BaseApp/src/theme/pager",["_BaseApp/src/lib-ts/misc"],(function(e,t){"use strict";var n;t&&t.id;return{setters:[function(e){n=e}],execute:function(){e("NullPager",{pageNo:1,pageSize:1e3,rowCount:0,searchText:"",sortColumn:"",sortDirection:"",filter:{}}),e("render",((e,t,n,i=null,r=null)=>{let a=(e.pageNo-1)*e.pageSize+1;0==e.rowCount&&(a=0);let s=Math.min(a+e.pageSize-1,e.rowCount),l=Math.floor(Math.max(e.rowCount-1,0)/e.pageSize+1),o=`${t}.goto(1, ${e.pageSize})`,d=`${t}.goto(${e.pageNo-1}, ${e.pageSize})`,c=`${t}.goto(${e.pageNo+1}, ${e.pageSize})`,u=`${t}.goto(${l}, ${e.pageSize})`,p="";return n.length>0&&(p=n.reduce(((n,i)=>n+`\n <a class="dropdown-item" href="#" onclick="${t}.goto(1, ${i});return false;">\n <span class="fa fa-check" style="width: 15px; ${i!=e.pageSize?"visibility: hidden":""}"></span>\n ${i18n("%n Records per Page",i)}\n </a>`),"")),`\n<div class="level">\n <div class="level-left">\n <div class="field is-horizontal">\n <div class="field-body">\n ${null!=i&&i.length>0?i:""}\n ${null!=r&&r.length>0?r:""}\n </div>\n </div>\n </div>\n <div class="level-right">\n <div class="field is-grouped">\n <div class="dropdown is-right is-hoverable" xx-js-skip-render-class="is-active">\n <div class="dropdown-trigger">\n <button class="button" aria-haspopup="true" aria-controls="dropdown-menu" title="${i18n("Options")}">\n <span>${i18n("%{rowFirst}-%{rowLast} of %{rowCount} Records",{rowFirst:a,rowLast:s,rowCount:e.rowCount})}</span>\n <span class="icon is-small"><i class="fas fa-angle-down" aria-hidden="true"></i></span>\n </button>\n </div>\n <div class="dropdown-menu" id="dropdown-menu" role="menu">\n <div class="dropdown-content">\n <a class="dropdown-item" href="#" onclick="${o};return false;">\n <span class="far fa-fast-backward" style="width: 15px;"></span>\n ${i18n("Go To First Page")}\n </a>\n <a class="dropdown-item" href="#" onclick="${u};return false;">\n <span class="far fa-fast-forward" style="width: 15px;"></span>\n ${i18n("Go To Last Page")}\n </a>\n <hr class="dropdown-divider">\n ${p}\n </div>\n </div>\n </div>\n <div class="buttons has-addons" style="margin-left: 4px;">\n <button type="button" class="button" ${1==e.pageNo?"disabled":""} onclick="${o}"><i class="fal fa-fast-backward"></i></button>\n <button type="button" class="button" ${1==e.pageNo?"disabled":""} onclick="${d}"><i class="fal fa-step-backward"></i></button>\n <button type="button" class="button" ${e.pageNo==l?"disabled":""} onclick="${c}"><i class="fal fa-step-forward"></i></button>\n <button type="button" class="button" ${e.pageNo==l?"disabled":""} onclick="${u}"><i class="fal fa-fast-forward"></i></button>\n </div>\n </div>\n </div>\n</div>`})),e("renderStatic",(e=>`\n<div class="js-container">\n <div class="js-filter-column"></div>\n <div class="js-control">\n <span><em>${e.rowCount} records found</strong></em>\n </div>\n</div>`)),e("sortableHeaderLink",((e,t,n,i,r,a="")=>{var s="",l="",o=r;return i.toUpperCase()==e.sortColumn.toUpperCase()&&(o="ASC"==e.sortDirection?"DESC":"ASC"),i.toUpperCase()==e.sortColumn.toUpperCase()&&(s=`&nbsp;<i class="fa ${"DESC"==e.sortDirection?"fa-sort-down":"fa-sort-up"}"></i>`,l=' class="js-sorting"'),0==s.length&&(s='&nbsp;<i class="fa fa-sort-down" style="visibility: hidden;"></i>'),`<th${l} ${a?`style="${a}"`:""}><a href="#" onclick="${t}.sortBy('${i}', '${o}');return false;">${n}${s}</a></th>`})),e("headerLink",(e=>`<th class="js-no-sorting">${e}</th>`)),e("rowNumber",((e,t)=>1+t+(e.pageNo-1)*e.pageSize)),e("asParams",(e=>{let t=null!=e.searchText?encodeURIComponent(e.searchText):"",n=`pn=${e.pageNo}&ps=${e.pageSize}&sc=${e.sortColumn}&sd=${e.sortDirection}&st=${t}`;return null!=e.filter&&Object.keys(e.filter).forEach((t=>{if(null!=e.filter[t]){let i=e.filter[t];if(null!=i&&"function"==typeof i.getTime){let e=JSON.stringify(i).replace(/"/g,"");n+=`&${t}=${e}`}else Array.isArray(i)?n+=`&${t}=${i.join(",")}`:n+=`&${t}=${i}`}})),n})),e("searchTemplate",((e,t,i)=>`\n <div class="field">\n <label class="label">${i18n("SEARCH")}</label>\n <div class="control has-icons-left" style="width:125px;">\n <input class="input" type="text" placeholder="${i18n("SEARCH")}" value="${n.toInputText(e.searchText)}" xonchange="${t}.search(this)" onkeydown="if (event.keyCode == 13) ${t}.search(event.target)" ${i||""}>\n <span class="icon is-small is-left">\n <i class="fas fa-search"></i>\n </span>\n </div>\n </div>`))}}})),System.register("_BaseApp/src/theme/autocomplete",["_BaseApp/src/core/app"],(function(e,t){"use strict";var n;t&&t.id;return{setters:[function(e){n=e}],execute:function(){e("Autocomplete",class{constructor(e,t,i=!1){this.ns=e,this.propName=t,this.required=i,this.isActive=!1,this.disabled=!1,this.render=()=>{if(!this.pagedList.list.reduce(((e,t)=>!!t.selected||e),!1)){let e=this.required||null==this.text||0==this.text.length?0:1;this.pagedList.list.length>e&&(this.pagedList.list[e].selected=!0)}let e=this.options,t=this.pagedList.list.map(((t,n)=>{let i=e.keyTemplate(t),r=e.valueTemplate(t).replace(/"/g,"&quot;"),a=t.selected?"is-active":"",s=e.detailTemplate(t);return`<a href="#" data-key="${i}" data-value="${r}" data-index="${n}" onclick="${this.handle("a.onclick")}; return false;" class="dropdown-item ${a}"><p>${s}</p></a>`}));return`\n<div class="dropdown-menu">\n <div class="dropdown-content">\n ${t.join('<hr class="dropdown-divider">')}\n${t.length>0?`\n <div class="dropdown-item">\n <div>&nbsp;\n <div class="is-pulled-right has-text-grey-light">${t.length} out of ${this.pagedList.pager.rowCount} results</div>\n </div>\n </div>\n`:`\n <div class="dropdown-item">\n <div>&nbsp;\n <div class="is-pulled-right has-text-grey-light">${i18n("No results")}</div>\n </div>\n </div>\n`}\n </div>\n</div>\n`},this.postRender=()=>{},this.handle=e=>`${this.id}.on(this, '${e}')`,this.on=(e,t)=>{if("onfocus"==t)this.isActive=!0,this.text=e.value,window[this.ns].onautocomplete(this.id);else if("onkeydown"==t){let t=event;if("ArrowUp"==t.key){event.preventDefault();let e=this.pagedList.list.findIndex((e=>e.selected));e>0&&(this.pagedList.list[e].selected=!1,this.pagedList.list[e-1].selected=!0,n.render())}else if("ArrowDown"==t.key){event.preventDefault();let e=this.pagedList.list.findIndex((e=>e.selected));e<this.pagedList.list.length-1&&(this.pagedList.list[e].selected=!1,this.pagedList.list[e+1].selected=!0,n.render())}else if(this.isActive&&["Tab","Enter","Escape"].indexOf(t.key)>-1){event.preventDefault(),clearTimeout(this.blurTimer);let e=this.pagedList.list.find((e=>e.selected)),t=this.options.keyTemplate(e),n=this.options.valueTemplate(e).replace(/"/g,"&quot;");this.setState(t,n),this.isActive=!1;let i=document.getElementById(this.input_id);i.dataset.key=this.key,i.blur(),window[this.ns].onchange(i)}else clearTimeout(this.typingTimer),this.typingTimer=setTimeout((t=>{this.isActive=!0,this.text=e.value,window[this.ns].onautocomplete(this.id)}),50)}else if("a.onclick"==t){clearTimeout(this.blurTimer);let t=e.dataset.key,n=e.dataset.value;this.setState(t,n),this.isActive=!1;let i=document.getElementById(this.input_id);i.dataset.key=this.key,window[this.ns].onchange(i)}else"onblur"==t&&(this.blurTimer=setTimeout((t=>{if(this.isActive=!1,e.hasAttribute("required"))this.setState(this.initialKey,this.initialText),n.render();else{let t=e.value.trim();0==t.length||t!=this.initialText?(this.setState(null,null),e.dataset.key=this.key,window[this.ns].onchange(e)):n.render()}}),500))},this.input_id=`${this.ns}_${this.propName}`,this.id=`${this.ns}_${this.propName}Autocomplete`,window[this.id]=this}setState(e,t){this.initialKey=this.key=e,this.initialText=this.text=t}get keyValue(){return this.key}get textValue(){return this.text}})}}})),System.register("_BaseApp/src/theme/calendar",["_BaseApp/src/core/app","_BaseApp/src/lib-ts/misc"],(function(e,t){"use strict";var n,i,r,a;t&&t.id;return{setters:[function(e){n=e},function(e){i=e}],execute:function(){r=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],a=["January","February","March","April","May","June","July","August","September","October","November","December"],e("Calendar",class{constructor(e,t=!1,s=!1,l=!1,o=!1,d=!1,c=!1){this.input_id=e,this.required=t,this.alwaysOpened=s,this.asFilter=l,this.hasTime=o,this.hasChanger=d,this.hasToday=c,this.isNullDate=!1,this.viewName="jscal-days",this.hidden=!0,this.hasButtons=!0,this.isValid=!0,this.disableDate=!1,this.setState=(e,t,n,i)=>{if(null!=e)this.selectedYear=this.displayedYear=e.getFullYear(),this.selectedMonth=this.displayedMonth=e.getMonth()+1,this.selectedDay=e.getDate(),this.selectedHour=e.getHours(),this.selectedMinute=e.getMinutes(),this.initialDate=new Date(e.getTime()),this.isNullDate=!1;else{let e=new Date;this.selectedYear=this.displayedYear=null!=t?t:e.getFullYear(),this.selectedMonth=this.displayedMonth=e.getMonth()+1,this.selectedDay=e.getDate(),this.selectedHour=0,this.selectedMinute=0,this.initialDate=null,this.isNullDate=!0}null!=n&&(this.min=n),null!=i&&(this.max=i),t&&(this.forcedYear=t,this.min=new Date(t,0,1),this.max=new Date(t,11,31))},this.render=()=>{let e=new Date(this.displayedYear,this.displayedMonth-1,1,0,0,0,0),t=e.getFullYear(),n=e.getMonth(),i=new Date(e);for(;;){for(;0!=i.getDay();)i.setDate(i.getDate()-1);if(i.getMonth()!=n||1==i.getDate())break;i.setDate(i.getDate()-1)}let s=new Date(e),l=new Date(t,n+1,0);for(;;){for(;6!=s.getDay();)s.setDate(s.getDate()+1);if(s.getMonth()!=n||s.getTime()==l.getTime())break;s.setDate(s.getDate()+1)}let o=new Date(this.selectedYear,this.selectedMonth-1,this.selectedDay,0,0,0,0);for(var d="";;){d+="<tr>";for(var c=0;c<7;c++){let e=i.getTime()==o.getTime(),t=i.getMonth()!=n,r=this.minValue&&i<this.minValue||this.maxValue&&i>this.maxValue,a=[i.getFullYear(),i.getMonth()+1,i.getDate()].join("/"),s=[];e&&s.push("selected"),t&&s.push("other"),r&&s.push("outside"),d+=`<td ${s.length?`class="${s.join(" ")}"`:""} data-select="${a}">${i.getDate()}</td>`,i.setDate(i.getDate()+1)}if(d+="</tr>",i.getTime()>=s.getTime())break}let u=this.displayedMonth-1,p=this.displayedYear;0==u&&(u=12,p--);let m=this.displayedMonth+1,f=this.displayedYear;13==m&&(m=1,f++);let h=a.reduce(((e,t,n)=>{let i=n+1,r=t.substr(0,3);return e+`<div data-month="${i}"${this.displayedMonth==i?" class='selected'":""}>${r}</div>`}),""),$="";for(var b=0;b<9;b++){let e=this.displayedYear-4+b;$+=`<div ${this.displayedYear==e?"class='selected'":""}>${e}</div>`}return`\n <div id="${this.id}" class="jscal-container ${this.hidden?"js-display-none":""}">\n \n <div class="jscal-banner">\n <div class="jscal-day">\n ${r[o.getDay()]}\n </div>\n <div class="jscal-date" data-date="${this.selectedYear}/${this.selectedMonth}/${this.selectedDay}" data-time="${this.selectedHour}:${this.selectedMinute}">\n <div>${("0"+o.getDate()).slice(-2)}</div>\n <div>\n <div>${a[o.getMonth()].substr(0,3)}</div>\n <div>${o.getFullYear()}</div>\n </div>\n </div>\n </div>\n <div class="jscal-nav">\n <a class="previous" data-display="${p}/${u}"><i class="fas fa-chevron-left"></i></a>\n <div>\n <a class="select-month">${a[e.getMonth()]}</a>\n <a class="select-year">${t}</a>\n </div>\n <a class="next" data-display="${f}/${m}"><i class="fas fa-chevron-right"></i></a>\n </div>\n <div class="jscal-years ${"jscal-years"!=this.viewName?"js-hidden":""}">\n <a class="previous"><i class="fas fa-chevron-left"></i></a>\n <div>\n ${$}\n </div>\n <a class="next"><i class="fas fa-chevron-right"></i></a>\n </div>\n <div class="jscal-months ${"jscal-months"!=this.viewName?"js-hidden":""}">\n ${h}\n </div>\n <div class="jscal-days ${"jscal-days"!=this.viewName?"js-hidden":""}">\n <table>\n <thead>\n <tr>\n <th>Sun</th> <th>Mon</th> <th>Tue</th> <th>Wed</th> <th>Thu</th> <th>Fri</th> <th>Sat</th>\n </tr>\n </thead>\n <tbody>\n ${d}\n </tbody>\n </table>\n <hr>\n\n${this.hasButtons?`\n <div class="buttons">\n <button class="button cancel"><span>Cancel</span></button>\n${this.required?"":'\n <button class="button clear"><span>Clear</span></button>\n'}\n${this.hasToday?'\n <button class="button today is-primary"><span class="icon"><i class="fa fa-check"></i></span><span>Today</span></button>\n':""}\n <button class="button ok is-primary" ${this.hasValidYear?"":"disabled"}><span class="icon"><i class="fa fa-check"></i></span><span>Select</span></button>\n </div>\n`:""}\n\n </div>\n \n </div>`},this.postRender=()=>{var e,t;let r=document.getElementById(this.input_id+"_wrapper");if(null==r)return;r.outerHTML=r.outerHTML,r=document.getElementById(this.id),r.querySelector(".jscal-container tbody").addEventListener("click",(e=>{var t=e.target;if(null==t.dataset.select)return;let i=t.dataset.select.split("/"),r=+i[0],a=+i[1],s=+i[2],l=new Date(r,a-1,s,0,0,0,0);if(!(this.minValue&&l<this.minValue||this.maxValue&&l>this.maxValue))if(this.selectedYear=r,this.selectedMonth=a,this.selectedDay=s,this.isNullDate=!1,this.asFilter){this.initialDate=this.dateValue,this.hidden=!this.alwaysOpened;let e=this.input_id.split("_"),t=e.slice(0,-1).join("_"),n=e[e.length-1];window[t].oncalendar_filter(n,this.dateValue)}else n.render()})),r.querySelector(".jscal-container .jscal-nav .previous").addEventListener("click",(e=>{let t=e.target.closest("a").dataset.display.split("/");this.displayedYear=+t[0],this.displayedMonth=+t[1],n.render()})),r.querySelector(".jscal-container .jscal-nav .next").addEventListener("click",(e=>{let t=e.target.closest("a").dataset.display.split("/");this.displayedYear=+t[0],this.displayedMonth=+t[1],n.render()})),r.querySelector(".jscal-container .jscal-date").addEventListener("click",(e=>{let t=e.target.closest(".jscal-date").dataset.date.split("/");this.selectedYear=this.displayedYear=+t[0],this.selectedMonth=this.displayedMonth=+t[1],this.selectedDay=+t[2],this.viewName="jscal-days",n.render()})),r.querySelector(".jscal-container .jscal-months").addEventListener("click",(e=>{let t=e.target;this.displayedMonth=+t.dataset.month,this.viewName="jscal-days",n.render()})),r.querySelector(".jscal-container .jscal-years div").addEventListener("click",(e=>{let t=e.target;this.displayedYear=+t.innerText,this.viewName="jscal-days",n.render()})),r.querySelector(".jscal-container .jscal-years .previous").addEventListener("click",(e=>{this.displayedYear=this.displayedYear-4,n.render()})),r.querySelector(".jscal-container .jscal-years .next").addEventListener("click",(e=>{this.displayedYear=this.displayedYear+4,n.render()})),r.querySelector(".jscal-container .select-month").addEventListener("click",(e=>{this.viewName="jscal-months",n.render()})),r.querySelector(".jscal-container .select-year").addEventListener("click",(e=>{this.viewName="jscal-years",n.render()})),this.hasButtons&&(r.querySelector(".jscal-container .cancel").addEventListener("click",(e=>{this.setState(this.initialDate),this.hidden=!this.alwaysOpened,n.render()})),r.querySelector(".jscal-container .ok").addEventListener("click",(e=>{this.initialDate=this.dateValue,this.hidden=!this.alwaysOpened;let t=document.getElementById(this.input_id),n=this.input_id.split("_"),i=n.slice(0,-1).join("_");n[n.length-1];window[i].onchange(t)})),this.required||null===(e=r.querySelector(".jscal-container .clear"))||void 0===e||e.addEventListener("click",(e=>{this.isNullDate=!0,n.render()})),this.hasToday&&(null===(t=r.querySelector(".jscal-container .today"))||void 0===t||t.addEventListener("click",(e=>{let t=new Date((new Date).setHours(0,0,0,0));this.setState(t),this.hidden=!this.alwaysOpened;let n=document.getElementById(this.input_id);n.value=i.toInputDate(t);let r=this.input_id.split("_"),a=r.slice(0,-1).join("_");r[r.length-1];window[a].onchange(n)}))));let a=document.getElementById(this.input_id);if(a){a.addEventListener("focus",(e=>{a.value=a.value.replace(/\D+/g,"");try{this.forcedYear?a.setSelectionRange(4,8):a.select()}catch(e){}a.type="number"}));const e=e=>{let t="00000000"+a.value.replace(/\D+/g,""),n=t.slice(-2),r=t.slice(-4,-2),s=null!=this.forcedYear?this.forcedYear:t.slice(-8,-4);t=`${s}-${r}-${n}`,a.type="text",a.value=t,a.setAttribute("value",t);let l=new Date(t),o=a.dataset.min,d=a.dataset.max,c=null!=o&&l<new Date(o)||null!=d&&l>new Date(d);if(i.isValidDateString(t)&&!c){a.style.borderColor="",a.style.zIndex="",this.isValid=!0,l=new Date(l.getUTCFullYear(),l.getUTCMonth(),l.getUTCDate(),this.selectedHour,this.selectedMinute,0,0),this.setState(l,this.forcedYear,this.min,this.max);let e=this.input_id.split("_"),t=e.slice(0,-1).join("_"),n=e[e.length-1];return this.asFilter?window[t].oncalendar_filter(n,this.dateValue):window[t].onchange(a),!0}a.style.borderColor="red",a.style.zIndex="1",this.isValid=!1};a.addEventListener("change",e),a.addEventListener("blur",(t=>{isNaN(+a.value)||e(t)}))}let s=document.getElementById(this.input_id+"_time");if(s){s.addEventListener("focus",(e=>{s.value=s.value.replace(/\D+/g,""),s.select(),s.type="number"}));const e=e=>{let t="0000"+s.value.replace(/\D+/g,""),n=t.slice(-2),r=t.slice(-4,-2);if(t=`${r}:${n}`,s.type="text",s.value=t,s.setAttribute("value",t),i.isValidTimeString(t)){s.style.borderColor="",s.style.zIndex="",this.isValid=!0;let e=new Date(this.dateValue);e.setHours(+r),e.setMinutes(+n),this.setState(e,this.forcedYear,this.min,this.max);let t=this.input_id.split("_"),i=t.slice(0,-1).join("_");t[t.length-1];return window[i].onchange(s),!0}s.style.borderColor="red",s.style.zIndex="1",this.isValid=!1};s.addEventListener("change",e),s.addEventListener("blur",(t=>{isNaN(+s.value)||e(t)}))}let l=document.getElementById(this.input_id+"_clear");l&&l.addEventListener("click",(e=>{this.isNullDate=!0;let t=this.input_id.split("_"),n=t.slice(0,-1).join("_"),i=t[t.length-1];this.asFilter?window[n].oncalendar_filter(i,this.dateValue):window[n].onchange(a)}));let o=document.getElementById(this.input_id+"_popup");o&&o.addEventListener("click",(e=>{this.toggle()}));let d=document.getElementById(this.input_id+"_previous");d&&d.addEventListener("click",(e=>{let t=new Date(this.dateValue.getTime());t.setDate(t.getDate()-1),this.setState(t,this.forcedYear,this.min,this.max),a.setAttribute("value",i.toInputDate(this.dateValue));let n=this.input_id.split("_"),r=n.slice(0,-1).join("_"),s=n[n.length-1];this.asFilter?window[r].oncalendar_filter(s,this.dateValue):window[r].onchange(a)}));let c=document.getElementById(this.input_id+"_next");c&&c.addEventListener("click",(e=>{let t=new Date(this.dateValue.getTime());t.setDate(t.getDate()+1),this.setState(t,this.forcedYear,this.min,this.max),a.setAttribute("value",i.toInputDate(this.dateValue));let n=this.input_id.split("_"),r=n.slice(0,-1).join("_"),s=n[n.length-1];this.asFilter?window[r].oncalendar_filter(s,this.dateValue):window[r].onchange(a)}))},this.toggle=()=>{this.hidden=!this.hidden&&!this.alwaysOpened,n.render()},this.id=this.input_id+"Calendar",this.hidden=!s,this.hasButtons=!s&&!l}get dateValue(){return this.isNullDate?null:new Date(this.selectedYear,this.selectedMonth-1,this.selectedDay,this.selectedHour,this.selectedMinute,0,0)}get year(){return this.dateValue.getFullYear()}get hasValidYear(){return!this.isNullDate&&(null==this.forcedYear||this.year==this.forcedYear)}set min(e){this.minValue=e}set max(e){this.maxValue=e}}),e("eventMan",((e,t,n)=>{const r=()=>{if(!t.getAttribute("required")&&0==t.value.length)return window[e].onchange(t),!0;let n="00000000"+t.value.replace(/\D+/g,""),r=n.slice(-2),a=n.slice(-4,-2),s=n.slice(-8,-4);n=`${s}-${a}-${r}`,t.type="text",t.value=n,t.setAttribute("value",n);let l=new Date(n),o=t.dataset.min,d=t.dataset.max,c=null!=o&&l<new Date(o)||null!=d&&l>new Date(d);if(i.isValidDateString(n)&&!c)return t.style.borderColor="",t.style.zIndex="",l=new Date(l.getUTCFullYear(),l.getUTCMonth(),l.getUTCDate(),0,0,0,0),window[e].onchange(t),!0;t.style.borderColor="red",t.style.zIndex="1"};if("focus"==n){t.value=t.value.replace(/\D+/g,"");try{t.select()}catch(e){}t.type="number"}else if("change"==n)r();else if("blur"==n){if(isNaN(+t.value))return;r()}}))}}})),System.register("_BaseApp/src/theme/latlong",[],(function(e,t){"use strict";var n;t&&t.id;return{setters:[],execute:function(){e("NS","App_LatLong"),e("onfocusLatLon",(e=>{"true"==e.dataset.isddmmcc?(e.value=e.value.replace("°","").replace("′","").replace(" ",""),e.type="number",e.select()):(e.value=e.value.replace(/\D+/g,""),e.type="number",e.select())})),e("onchangeLatLon",n=e=>{if("true"==e.dataset.isddmmcc){let t="true"==e.dataset.islongitude,n="0000000"+(+e.value).toFixed(2),i=n.slice(-2),r=n.slice(-5,-3),a=n.slice(t?-8:-7,-5);n=`${a}° ${r}.${i}′`,"0"==n[0]&&(n=n.slice(1)),e.type="text",e.value=n,e.setAttribute("value",n)}else{let t="true"==e.dataset.islongitude,n="0000000"+e.value,i=n.slice(-2),r=n.slice(-4,-2),a=n.slice(t?-7:-6,-4);n=`${a}° ${r}′ ${i}″`,"0"==n[0]&&(n=n.slice(1)),e.type="text",e.value=n,e.setAttribute("value",n)}}),e("onblurLatLon",(e=>{isNaN(+e.value)||n(e)}))}}})),System.register("_BaseApp/src/theme/theme-action",[],(function(e,t){"use strict";t&&t.id;return{setters:[],execute:function(){e("renderActionButtons",((e,t,n,i=null,r=!1)=>`\n <div class="level js-actions">\n <div class="level-left">\n <div class="level-item">\n <div class="buttons">\n ${i&&i.length>0?i.join("&nbsp;"):""}\n </div>\n </div>\n </div>\n <div class="level-right">\n <div class="level-item">\n <div class="buttons">\n <button class="button is-outlined" onclick="${e}.cancel()">\x3c!--<span class="icon"><i class="fa fa-reply"></i></span>--\x3e<span>${i18n("Cancel")}</span></button>\n${t&&!r?`\n <button class="button is-primary is-outlined" onclick="${e}.create()"><span class="icon"><i class="fa fa-check"></i></span><span>${i18n("Insert")}</span></button>\n`:`\n${r?"":`\n <button class="button is-danger is-outlined" onclick="App_Theme.openModal('modalDelete_${e}')"><span class="icon"><i class="fa fa-times"></i></span><span>${i18n("Delete")}</span></button>\n <a class="button is-primary is-outlined" href="${n}"><span class="icon"><i class="fa fa-plus"></i></span><span>${i18n("Add New")}</span></a>\n`}\n <button class="button is-primary is-outlined" onclick="${e}.save()"><span class="icon"><i class="fa fa-check"></i></span><span>${i18n("Update")}</span></button>\n <button class="button is-primary is-outlined" onclick="${e}.save(true)"><span class="icon"><i class="fa fa-reply"></i></span><span>${i18n("Done")}</span></button>\n </div>\n </div>\n`}\n </div>\n </div>\n`)),e("renderActionButtons2",((e,t,n,i=null,r=!0,a=!0)=>`\n <div class="buttons">\n ${i&&i.length>0?i.join(""):""}\n <button class="button" onclick="${e}.cancel()">\x3c!--<span class="icon"><i class="fa fa-reply"></i></span>--\x3e<span>${i18n("Cancel")}</span></button>\n${t&&a?`\n <button class="button is-primary" onclick="${e}.create()"><span class="icon"><i class="fa fa-check"></i></span><span>${i18n("Insert")}</span></button>\n`:`\n ${r?`\n <button class="button is-danger" onclick="App_Theme.openModal('modalDelete_${e}')"><span class="icon"><i class="fa fa-times"></i></span><span>${i18n("Delete")}</span></button>\n `:""}\n ${a?`\n <a class="button is-primary" href="${n}"><span class="icon"><i class="fa fa-plus"></i></span><span>${i18n("Add New")}</span></a>\n `:""}\n <button class="button is-primary" onclick="${e}.save()"><span class="icon"><i class="fa fa-check"></i></span><span>${i18n("Update")}</span></button>\n <button class="button is-primary" onclick="${e}.save(true)"><span class="icon"><i class="fa fa-reply"></i></span><span>${i18n("Done")}</span></button>\n`}\n </div>\n`)),e("renderButtons",(e=>`\n <div class="buttons">\n ${e&&e.length>0?e.join(""):""}\n </div>\n`)),e("renderButtonsInline",(e=>`\n <div class="js-actions js-flex-end">\n <div class="buttons are-small">\n ${e&&e.length>0?e.join(""):""}\n </div>\n </div>\n`)),e("renderInlineActionButtons",((e,t,n,i,r)=>`\n <div class="js-actions js-flex-end">\n <div class="buttons are-small">\n <button class="button is-outlined" onclick="${e}.undo()"><span class="icon"><i class="fa fa-undo"></i></span><span>${i18n("Undo")}</span></button>\n${n?"":`\n <a class="button is-danger is-outlined" ${n?"disabled":`onclick="${e}.drop()"`}><span class="icon"><i class="fa fa-times"></i></span><span>${i18n("Delete")}</span></a>\n`}\n${i?"":`\n <a class="button is-primary is-outlined" ${i?"disabled":`onclick="${e}.addNew()"`}><span class="icon"><i class="fa fa-plus"></i></span><span>${i18n("Add New")}</span></a>\n`}\n${t&&!r?`\n <a class="button is-primary is-outlined" ${r?"disabled":`onclick="${e}.create()"`}><span class="icon"><i class="fa fa-check"></i></span><span>${i18n("Insert")}</span></a>\n`:`\n${r?"":`\n <a class="button is-primary is-outlined" ${r?"disabled":`onclick="${e}.save()"`}><span class="icon"><i class="fa fa-check"></i></span><span>${i18n("Update")}</span></a>\n`}\n`}\n </div>\n </div>\n`)),e("buttonCancelInline",(e=>`<button class="button is-outlined" onclick="${e}.undo()"><span class="icon"><i class="fa fa-undo"></i></span><span>${i18n("Undo")}</span></button>`)),e("buttonInsertInline",(e=>`<a class="button is-primary is-outlined" onclick="${e}.create()><span class="icon"><i class="fa fa-check"></i></span><span>${i18n("Insert")}</span></a>`)),e("buttonDeleteInline",(e=>`<a class="button is-danger is-outlined" onclick="${e}.drop()"><span class="icon"><i class="fa fa-times"></i></span><span>${i18n("Delete")}</span></a>`)),e("buttonAddNewInline",((e,t)=>`<a class="button is-primary is-outlined" onclick="${e}.addNew()"><span class="icon"><i class="fa fa-plus"></i></span><span>${i18n("Add New")}</span></a>`)),e("buttonUpdateInline",(e=>`<a class="button is-primary is-outlined" onclick="${e}.save()"><span class="icon"><i class="fa fa-check"></i></span><span>${i18n("Update")}</span></a>`)),e("renderListActionButtons",((e,t,n=null)=>`\n <div class="level js-actions">\n <div class="level-left">\n ${n&&n.length>0?n.join("&nbsp;"):""}\n </div>\n${null!=t?`\n <div class="level-right">\n <div class="level-item">\n <div class="buttons">\n <button class="button is-primary is-outlined" onclick="${e}.create()"><span class="icon"><i class="fa fa-plus"></i></span><span>${t}</span></button>\n </div>\n </div>\n </div>\n`:""}\n </div>\n `)),e("renderListActionButtons2",((e,t,n=null)=>`\n <div class="buttons">\n ${n&&n.length>0?n.join("&nbsp;"):""}\n ${t?`<button class="button is-primary" onclick="${e}.create()"><span class="icon"><i class="fa fa-plus"></i></span><span>${t}</span></button>`:""}\n </div>\n`)),e("renderListFloatingActionButtons",((e,t)=>`\n <button class="button is-primary is-rounded js-floating" title="${t}" onclick="${e}.create()"><span class="icon"><i class="fa fa-plus"></i></span></button>\n `)),e("buttonCancel",(e=>`<button class="button" onclick="${e}.cancel()"><span>${i18n("Cancel")}</span></button>`)),e("buttonInsert",((e,t="Insert")=>`<button class="button is-primary" onclick="${e}.create()"><span class="icon"><i class="fa fa-check"></i></span><span>${i18n(t)}</span></button>`)),e("buttonDelete",(e=>`<button class="button is-danger" onclick="App_Theme.openModal('modalDelete_${e}')"><span class="icon"><i class="fa fa-times"></i></span><span>${i18n("Delete")}</span></button>`)),e("buttonAddNew",((e,t,n=null)=>`<a class="button is-primary" href="${t}"><span class="icon"><i class="fa fa-plus"></i></span><span>${n||i18n("Add New")}</span></a>`)),e("buttonUpdate",((e,t=!1)=>`<button class="button is-primary" ${t?"disabled":""} onclick="${e}.save()"><span class="icon"><i class="fa fa-check"></i></span><span>${i18n("Update")}</span></button>\n <button class="button is-primary" ${t?"disabled":""} onclick="${e}.save(true)"><span class="icon"><i class="fa fa-reply"></i></span><span>${i18n("Done")}</span></button>\n`)),e("buttonUpdateNoDone",((e,t=!1)=>`<button class="button is-primary" ${t?"disabled":""} onclick="${e}.save()"><span class="icon"><i class="fa fa-check"></i></span><span>${i18n("Update")}</span></button>\n`)),e("buttonUpload",((e,t=!1,n="Upload File")=>`<button class="button is-primary" ${t?"disabled":""} onclick="${e}.create()"><span class="icon"><i class="far fa-cloud-upload-alt"></i></span><span>${i18n(n)}</span></button>`))}}})),System.register("_BaseApp/src/theme/theme-checkbox",[],(function(e,t){"use strict";var n,i;t&&t.id;return{setters:[],execute:function(){e("renderCheckboxField",((e,t,i,r,a,s,l=!1)=>`\n <div class="field is-horizontal">\n <div class="field-label"><label class="label">${r}</label></div>\n <div class="field-body">\n ${n(e,t,i,r,null==a?r:a,s,l)}\n </div>\n </div>`)),e("renderCheckboxInline",n=(e,t,n,r="",a="",s,l=!1)=>`\n <div class="field">\n ${i(e,t,n,a,l)}\n ${null!=s?`<p class="help">${s}</p>`:""}\n </div>`),e("renderCheckboxFilter",((e,t,n,i="",r)=>`\n <div class="field">\n <label class="label">${i}</label>\n <div class="field-body">\n <label class="checkbox">\n <input type="checkbox" onchange="${e}.filter_${t}(this)" ${n?"checked":""}> ${r}\n </label>\n </div>\n </div>`)),e("renderCheckboxListField",((e,t,n,i,r)=>{const a=r.reduce(((i,r,a)=>{return i+`\n <div>\n <label class="checkbox">\n <input type="checkbox" ${0!=(+(s=r).code&n)?"checked":""} name="${e}_${t}" onchange="${e}.onchange(this)" data-mask="${s.code}"> ${s.description}\n </label>\n </div>`;var s}),"");return`\n <div class="field is-horizontal">\n <div class="field-label"><label class="label" for="${e}_${t}">${i}</label></div>\n <div class="field-body">\n <div class="field js-checkbox-row">\n ${a}\n </div>\n </div>\n </div>\n`})),e("rawCheckbox",i=(e,t,n,i,r=!1)=>`\n <div class="control">\n <label class="checkbox ${r?"js-disabled":""}">\n <input type="checkbox" id="${e}_${t}" onchange="${e}.onchange(this)" ${n?"checked":""} ${r?"disabled":""}> ${i}\n </label>\n </div>`),e("rawToggle",((e,t,n,i,r)=>`\n<div class="js-toggle">\n <label for="${e}_${t}">${n?i:r}</label>\n <input type="checkbox" id="${e}_${t}" onchange="${e}.onchange(this)" ${n?"checked":""}>\n</div>\n`))}}})),System.register("_BaseApp/src/theme/theme-dropdown",[],(function(e,t){"use strict";var n,i;t&&t.id;return{setters:[],execute:function(){e("renderDropdownField",((e,t,i,r,a=!1,s="js-width-50",l,o=!1)=>`\n <div class="field is-horizontal">\n <div class="field-label"><label class="label ${a?"js-required":""}" for="${e}_${t}">${r}</label></div>\n <div class="field-body">\n <div class="field">\n <div class="select ${s}">\n ${n(e,t,i,a,o)}\n </div>\n ${null!=l?`<p class="help">${l}</p>`:""}\n </div>\n </div>\n </div>`)),e("renderDropdownInline",((e,t,n,i=!1,r=!1)=>`\n <div class="field">\n <div class="select">\n <select id="${e}_${t}" \nonchange="${e}.onchange(this)" \n${i?"required='required'":""}\n${r?"disabled tabindex='-1'":""}>\n ${n}\n </select>\n </div>\n </div>\n`)),e("renderDropdownExInline",((e,t,n,i,r)=>`\n <div class="field">\n<div class="dropdown ${r.hoverable?"is-hoverable":""}" ${r.hoverable?"":"onclick=\"this.classList.toggle('is-active')\""}>\n <div class="dropdown-trigger">\n <div aria-controls="dropdown-menu-${t}">\n <span>${n}</span>\n <span class="icon is-small">\n <i class="fas fa-angle-down" aria-hidden="true"></i>\n </span>\n </div>\n </div>\n <div class="dropdown-menu" id="dropdown-menu-${t}" role="menu">\n <div class="dropdown-content">\n ${i}\n </div>\n </div>\n</div>\n </div>\n`)),e("renderDropdownNaked",n=(e,t,n,i=!1,r=!1)=>`\n <select id="${e}_${t}" onchange="${e}.onchange(this)" ${i?"required='required'":""} ${r?"disabled tabindex='-1'":""}>\n ${n}\n </select>`),e("renderDropdownFilter",((e,t,n,i,r=!1,a="",s)=>`\n <div class="field">\n <label class="label ${r?"js-required":""}">${i}</label>\n <div class="control">\n <div class="select">\n <select onchange="${e}.filter_${t}(this)" ${r?"required='required'":""}>\n ${n}\n </select>\n </div>\n </div>\n ${null!=s?`<p class="help">${s}</p>`:""}\n </div>`)),e("renderOptions",((e,t,n,r="")=>i(e,t,n,r,(e=>e.description)))),e("renderOptionsShowCode",((e,t,n,r="")=>i(e,t,n,r,(e=>e.code)))),e("renderOptionsShowBoth",((e,t,n,r="")=>i(e,t,n,r,(e=>`${e.code} ${e.description}`)))),e("renderOptionsFun",i=(e,t,n,i="",r)=>{if(n){let n=null==t||-1==e.findIndex((e=>e.id==t));return e.reduce(((e,n)=>{let i=null!=t&&t==n.id;return e+`<option value="${n.id}" ${i?"selected":""}>${r(n)}</option>`}),`<option value="" ${n?"selected":""}>${i}</option>`)}return e.reduce(((e,n,i)=>{let a=null!=t&&t==n.id;return a=a||null==t&&0==i,e+`<option value="${n.id}" ${a?"selected":""}>${r(n)}</option>`}),"")}),e("renderItems",((e,t,n,i="")=>{if(n){let n=null==t||-1==e.findIndex((e=>e.id==t));return e.reduce(((e,n)=>{let i=null!=t&&t==n.id;return e+`<div data-value="${n.id}" class="dropdown-item ${i?"is-active":""}">${n.description}</div>`}),`<div data-value="" class="dropdown-item ${n?"is-active":""}">${i}</div>`)}return e.reduce(((e,n,i)=>{let r=null!=t&&t==n.id;return r=r||null==t&&0==i,e+`<div data-value="${n.id}" class="dropdown-item ${r?"is-active":""}">${n.description}</div>`}),"")})),e("renderNullableBooleanOptions",((e,t)=>`\n <option value="" ${null==e?"selected":""}>${t[0]}</option>\n <option value="true" ${null!=e&&e?"selected":""}>${t[1]}</option>\n <option value="false" ${null==e||e?"":"selected"}>${t[2]}</option>\n `)),e("renderNullableBooleanOptionsReverse",((e,t)=>`\n <option value="false" ${null==e||e?"":"selected"}>${t[2]}</option>\n <option value="true" ${null!=e&&e?"selected":""}>${t[1]}</option>\n <option value="" ${null==e?"selected":""}>${t[0]}</option>\n `)),e("renderDatalistOptions",(e=>e.reduce(((e,t)=>e+`<option value="${t.description}">`),"")))}}})),System.register("_BaseApp/src/theme/theme-select",[],(function(e,t){"use strict";t&&t.id;return{setters:[],execute:function(){e("rawSelect",((e,t,n,i)=>`\n<div class="control ${i.size||""}">\n <div class="select" style="width:100%">\n <select id="${e}_${t}" style="width:100%" onchange="${e}.onchange(this)" ${i.required?"required='required'":""} ${i.disabled?"disabled tabindex='-1'":""}>\n ${n}\n </select>\n </div>\n</div>`))}}})),System.register("_BaseApp/src/theme/theme-radio",[],(function(e,t){"use strict";t&&t.id;return{setters:[],execute:function(){e("renderRadioField",((e,t,n=!1)=>`\n <div class="field is-horizontal js-radio">\n <div class="field-label"><label class="label">${t}</label></div>\n <div class="field-body">\n <div class="control ${n?"js-disabled":""}">\n ${e}\n </div>\n </div>\n </div>`)),e("renderRadios",((e,t,n,i,r,a="")=>r?n.reduce(((n,r)=>{let a=null!=i&&i==r.id,s=null!=r.disabled&&r.disabled;return n+`\n <label class="radio ${s?"js-disabled":""}">\n <input type="radio" name="${e}_${t}" data-value="${r.id}" onchange="${e}.onchange(this)" ${a?"checked":""} ${s?"disabled":""}>\n ${r.description}\n </label>`}),`<label class="radio">\n <input type="radio" name="${e}_${t}" data-value="" onchange="${e}.onchange(this)" ${null==i?"checked":""}>\n ${a}\n </label>`):n.reduce(((n,r,a)=>{let s=null!=i&&i==r.id;s=s||null==i&&0==a;let l=null!=r.disabled&&r.disabled;return n+`\n <label class="radio ${l?"js-disabled":""}">\n <input type="radio" name="${e}_${t}" data-value="${r.id}" onchange="${e}.onchange(this)" ${s?"checked":""} ${l?"disabled":""}>\n ${r.description}\n </label>`}),"")))}}})),System.register("_BaseApp/src/theme/theme-filter",["_BaseApp/src/lib-ts/misc"],(function(e,t){"use strict";var n;t&&t.id;return{setters:[function(e){n=e}],execute:function(){e("renderNumberFilter",((e,t,i,r="",a=!1,s)=>`\n <div class="field">\n <label class="label ${a?"js-required":""}">${r}</label>\n <div class="control" style="width: 100px">\n <input type="number" class="input" id="${e}_${t}" value="${n.toInputNumber(i)}" onchange="${e}.filter_${t}(this)" ${a?"required='required'":""}>\n </div>\n ${null!=s?`<p class="help">${s}</p>`:""}\n </div>`)),e("renderDateFilter",((e,t,i,r="",a=!1,s,l=null,o=null)=>`\n <div class="field">\n <label class="label ${a?"js-required":""}">${r}</label>\n <div class="control">\n <input type="date" class="input"\nid="${e}_${t}" \nvalue="${n.toInputDate(i)}" \nonchange="${e}.filter_${t}(this)" \n${a?"required='required'":""}\n${l?`min="${n.toInputDate(l)}"`:""}\n${o?`max="${n.toInputDate(o)}"`:""}\n${a?"required='required'":""}>\n </div>\n ${null!=s?`<p class="help">${s}</p>`:""}\n </div>`)),e("renderDateChanger",((e,t,n=!1)=>`\n<div class="field" style="margin-left: -0.75rem;">\n <label class="label">&nbsp;</label>\n <div class="buttons has-addons">\n <button class="button" ${n?"disabled":""} onclick="${e}.filter_${t}(this, 'previous')"><i class="fas fa-angle-left"></i></button>\n <button class="button" ${n?"disabled":""} onclick="${e}.filter_${t}(this, 'next')"><i class="fas fa-angle-right"></i></button>\n </div>\n</div>\n`))}}})),System.register("_BaseApp/src/theme/theme-number",["_BaseApp/src/lib-ts/misc"],(function(e,t){"use strict";var n,i,r;t&&t.id;return{setters:[function(e){n=e}],execute:function(){e("renderNumberField",((e,t,i,r,a=!1,s="js-width-10",l)=>`\n<div class="field is-horizontal">\n <div class="field-label"><label class="label ${a?"js-required":""}" for="${e}_${t}">${r}</label></div>\n <div class="field-body">\n <div class="field">\n <div class="control ${s}">\n <input type="number" class="input has-text-right"\n id="${e}_${t}" \n value="${n.toInputNumber(i)}" \n onchange="${e}.onchange(this)" \n ${a?"required='required'":""}>\n </div>\n ${null!=l?`<p class="help">${l}</p>`:""}\n </div>\n </div>\n</div>`)),e("renderNumberInline",((e,t,i,r=!1,a=!1)=>`\n<div class="field">\n <div class="control">\n <input type="number" class="input has-text-right"\n id="${e}_${t}" \n value="${n.toInputNumber(i)}" \n onchange="${e}.onchange(this)" \n min="0"\n ${r?"required='required'":""}\n ${a?"tabindex='-1'":""}>\n </div>\n</div>`)),e("renderDecimalField",((e,t,n,r,a)=>`\n<div class="field is-horizontal">\n <div class="field-label"><label class="label ${a.required?"js-required":""}" for="${e}_${t}">${r}</label></div>\n <div class="field-body">\n ${i(e,t,n,a)}\n </div>\n</div>`)),e("renderDecimalInline",i=(e,t,i,r)=>{let a=null!=r.addonStatic,s=null!=r.addon;return`\n<div class="field">\n <div class="field ${s||a?"has-addons":""}" style="margin-bottom:0;">\n <div class="control ${r.size?r.size:""}">\n <input type="text" class="input has-text-right"\n id="${e}_${t}" \n value="${n.toStaticNumberDecimal(i,r.places,!0)}" \n onchange="${e}.onchange(this)" \n ${r.required?"required='required'":""}\n ${r.disabled?"disabled tabindex='-1'":""}\n ${r.places?`pattern="^${r.allowNegative?"(-)?":""}[0-9]+(\\.[0-9]{0,${r.places}})?$"`:""}\n ${r.autoselect?'onfocus="this.select()"':""} >\n </div>\n${a?`\n <div class="control">\n <a class="button js-static">\n ${r.addonStatic}\n </a>\n </div>\n`:""}\n${s?`\n <div class="control">\n ${r.addon}\n </div>\n`:""}\n </div>\n ${null!=r.help?`<p class="help">${r.help}</p>`:""}\n</div>`}),e("renderNumberField2",((e,t,n,i,a)=>`\n<div class="field is-horizontal">\n <div class="field-label"><label class="label ${a.required?"js-required":""}" for="${e}_${t}">${i}</label></div>\n <div class="field-body">\n ${r(e,t,n,a)}\n </div>\n</div>`)),e("renderNumberInline2",r=(e,t,i,r)=>{let a=null!=r.addonStatic,s=null!=r.addon;return`\n<div class="field">\n <div class="field ${s||a?"has-addons":""}" style="margin-bottom:0;">\n <div class="control ${r.size?r.size:""}">\n <input type="number" class="input has-text-right"\n id="${e}_${t}" \n value="${n.toInputNumber(i)}"\n onchange="${e}.onchange(this)"\n ${r.required?"required='required'":""}\n ${null!=r.min?`min=${r.min}`:""}\n ${null!=r.max?`max=${r.max}`:""}\n ${r.step?`step=${r.step}`:""}\n ${r.disabled?"disabled tabindex='-1'":""}>\n </div>\n${a?`\n <div class="control">\n <a class="button js-static">\n ${r.addonStatic}\n </a>\n </div>\n`:""}\n${s?`\n <div class="control">\n ${r.addon}\n </div>\n`:""}\n </div>\n ${null!=r.help?`<p class="help">${r.help}</p>`:""}\n</div>`})}}})),System.register("_BaseApp/src/theme/theme-latlong",["_BaseApp/src/lib-ts/misc","_BaseApp/src/theme/latlong"],(function(e,t){"use strict";var n,i,r;t&&t.id;return{setters:[function(e){n=e},function(e){i=e}],execute:function(){e("renderDDMMCC",((e,t)=>`\n<div class="field is-horizontal">\n <div class="field-label">\n <label class="label">&nbsp;</label>\n </div>\n <div class="field-body">\n <div class="field">\n <div class="control">\n <label class="checkbox">\n <input type="checkbox" onchange="${e}.onDDMMCC(this)" ${t?"checked":""}> Enter latitude and longitude using <b>DD MM.CC</b> instead of <b>DD MM SS</b>\n </label>\n </div>\n </div>\n </div>\n</div>\n`)),e("renderLatField",((e,t,n,i,a=!1,s="",l,o=!1)=>`\n <div class="field is-horizontal">\n <div class="field-label"><label class="label ${a?"js-required":""}" for="${e}_${t}">${i}</label></div>\n <div class="field-body">\n ${r(e,t,n,a,s,l,!1,o)}\n </div>\n </div>`)),e("renderLongField",((e,t,n,i,a=!1,s="",l,o=!1)=>`\n <div class="field is-horizontal">\n <div class="field-label"><label class="label ${a?"js-required":""}" for="${e}_${t}">${i}</label></div>\n <div class="field-body">\n ${r(e,t,n,a,s,l,!0,o)}\n </div>\n </div>`)),e("renderLatLongInline",r=(e,t,r,a=!1,s="",l,o=!1,d=!1)=>`\n <div class="field has-addons">\n <div class="control ${s}">\n <input type="text" class="input js-no-spinner"\n id="${e}_${t}" \n data-islongitude="${o}"\n data-isddmmcc="${d?"true":"false"}"\n value="${d?n.toInputLatLongDDMMCC(r):n.toInputLatLong(r)}" \n onfocus="${i.NS}.onfocusLatLon(this)"\n onchange="${i.NS}.onchangeLatLon(this); ${e}.onchange(this);"\n onblur="${i.NS}.onblurLatLon(this)"\n ${a?"required='required'":""}\n autocomplete="off">\n </div>\n${d?`\n <div class="control">\n <a class="button js-static">${n.toInputLatLong(r)}</a>\n </div>\n`:""}\n ${null!=l?`<p class="help">${l}</p>`:""}\n </div>\n`)}}})),System.register("_BaseApp/src/theme/theme-text",["_BaseApp/src/lib-ts/misc"],(function(e,t){"use strict";var n,i,r,a;t&&t.id;return{setters:[function(e){n=e}],execute:function(){e("renderTextField",((e,t,n,r,a,s=!1,l="",o)=>`\n <div class="field is-horizontal">\n <div class="field-label"><label class="label ${s?"js-required":""}" for="${e}_${t}">${r}</label></div>\n <div class="field-body">\n ${i(e,t,n,a,s,l,o)}\n </div>\n </div>`)),e("renderTextField2",((e,t,n,i,a,s)=>`\n <div class="field is-horizontal">\n <div class="field-label"><label class="label ${s.required?"js-required":""}" for="${e}_${t}">${i}</label></div>\n <div class="field-body">\n ${r(e,t,n,a,s)}\n </div>\n </div>`)),e("renderTextInline",i=(e,t,i,r,a=!1,s="",l,o)=>`\n <div class="field">\n <div class="control ${s}">\n <input type="text" class="input" id="${e}_${t}" value="${n.toInputText(i)}" onchange="${e}.onchange(this)" ${null!=r?`maxlength="${r}"`:""} ${a?"required='required'":""} ${o?`list="${o}"`:""}>\n </div>\n ${null!=l?`<p class="help">${l}</p>`:""}\n </div>`),e("renderTextInline2",r=(e,t,i,r,a)=>{let s=null!=a.addonStatic,l=null!=a.addon,o=null!=a.addonHead;return`\n <div class="field">\n <div class="field ${l||s||o?"has-addons":""}" style="margin-bottom:0;">\n${o?`\n <p class="control">\n ${a.addonHead}\n </p>\n`:""}\n <div class="control ${null!=a.size?a.size:""}">\n <input type="text" class="input" id="${e}_${t}" value="${n.toInputText(i)}" \n onchange="${e}.onchange(this)"\n ${null!=r?`maxlength="${r}"`:""}\n ${a.required?"required='required'":""}\n ${a.noautocomplete?"autocomplete='off'":""}\n ${a.disabled?"disabled":""}\n ${a.listid?`list="${a.listid}"`:""}>\n </div>\n${s?`\n <div class="control">\n <a class="button js-static" ${null!=a.addonHref?`href="${a.addonHref}"`:""}>\n ${a.addonStatic}\n </a>\n </div>\n`:""}\n${l?`\n <div class="control">\n ${a.addon}\n </div>\n`:""}\n </div>\n ${null!=a.help?`<p class="help">${a.help}</p>`:""}\n </div>`}),e("renderTextareaField",((e,t,n,i,r=0,s=!1,l,o=2)=>`\n <div class="field is-horizontal">\n <div class="field-label"><label class="label ${s?"js-required":""}" for="${e}_${t}">${i}</label></div>\n <div class="field-body">\n ${a(e,t,n,r,s,l,o)}\n </div>\n </div>`)),e("renderTextareaField_V",((e,t,i,r,a=0,s=!1,l,o=2,d="onchange")=>`\n <div class="field">\n <label class="label ${s?"js-required":""}" for="${e}_${t}">${r}</label>\n <div class="control">\n <textarea class="textarea" rows="${o}" spellcheck="false" id="${e}_${t}" ${d}="${e}.${d}(this, event)" maxlength="${a}" ${s?"required='required'":""}>${n.toInputText(i)}</textarea>\n </div>\n ${null!=l?`<p class="help">${l}</p>`:""}\n </div>`)),e("renderTextareaInline",a=(e,t,i,r=0,a=!1,s,l=2)=>`\n <div class="field">\n <div class="control">\n <textarea class="textarea" rows="${l}" spellcheck="false" id="${e}_${t}" onchange="${e}.onchange(this)" ${r>0?`maxlength="${r}"`:""} ${a?"required='required'":""}>${n.toInputText(i)}</textarea>\n </div>\n ${null!=s?`<p class="help">${s}</p>`:""}\n </div>`),e("renderTextareaFieldWithMarkdown",((e,t,i,r,a=0,s=!1,l,o=2,d=!1)=>`\n <div class="field is-horizontal">\n <div class="field-label"><label class="label ${s?"js-required":""}" for="${e}_${t}">${r}</label></div>\n <div class="field-body">\n <div class="field">\n <div class="js-wrap-markdown" style="background-color: yellow; position: relative;">\n <div class="control">\n <textarea class="textarea" rows="${o}" spellcheck="false" id="${e}_${t}" onchange="${e}.onchange(this)" ${a>0?`maxlength="${a}"`:""} ${s?"required='required'":""}>${n.toInputText(i)}</textarea>\n </div>\n <div style="position:absolute; top:0; left:0; width:100%; height:100%; overflow:auto; padding:0 8px; background-color:white; border: 1px solid #e7eaec; ${d?"":"display:none;"}">\n ${marked(i||"")}\n </div>\n </div>\n ${null!=l?`<p class="help">${l}</p>`:""}\n </div>\n </div>\n </div>`)),e("rawText",((e,t,i,r)=>`\n<input type="text" class="input ${r.size||""} ${r.class||""}" ${r.style?`style="${r.style}"`:""} id="${e}_${t}" value="${n.toInputText(i)}" onchange="${e}.onchange(this)" ${null!=r.max?`maxlength="${r.max}"`:""} ${r.required?"required='required'":""}>\n`))}}})),System.register("_BaseApp/src/theme/theme-date",["_BaseApp/src/lib-ts/misc"],(function(e,t){"use strict";var n;t&&t.id;return{setters:[function(e){n=e}],execute:function(){e("renderDateInline",((e,t,i,r)=>`\n <div class="field">\n <div class="control">\n <input type="date" class="input"\nid="${e}_${t}" \nvalue="${n.toInputDate(i)}" \n${r.min?`min="${r.min}"`:""}\n${r.max?`max="${r.max}"`:""}\nonchange="${e}.onchange(this)" \n${r.required?"required='required'":""}\n${r.disabled?"tabindex='-1' style='pointer-events:none'":""}>\n </div>\n </div>`)),(e,t,i,r,a)=>`\n <div class="field is-horizontal">\n <div class="field-label"><label class="label ${a.required?"js-required":""}" for="${e}_${t}">${r}</label></div>\n <div class="field-body">\n <div class="field">\n \x3c!--<div class="field has-addons">--\x3e\n <div class="field">\n <div class="control ${a.size?a.size:"js-width-20"}">\n <input type="date" class="input" \n id="${e}_${t}" \n value="${n.toInputDate(i)}" \n onchange="${e}.onchange(this)" \n ${a.required?"required='required'":""}>\n </div>\n\x3c!--\n <div class="control">\n <a class="button">\n <i class="far fa-calendar-alt"></i>\n </a>\n </div>\n--\x3e\n </div>\n ${a.help?`<p class="help">${a.help}</p>`:""}\n </div>\n </div>\n </div>`,(e,t,i,r,a)=>`\n <div class="field is-horizontal">\n <div class="field-label"><label class="label ${a.required?"js-required":""}" for="${e}_${t}">${r}</label></div>\n <div class="field-body">\n <div class="field">\n <div class="field">\n <div class="control" style="display: inline-block;">\n <input type="date" class="input" \n id="${e}_${t}" \n value="${n.toInputDate(i)}" \n ${a.min?`min="${a.min}"`:""}\n ${a.max?`max="${a.max}"`:""}\n onchange="${e}.onchange(this)" \n ${a.required?"required='required'":""}>\n </div>\n <div class="control" style="display: inline-block;">\n <input type="time" class="input"\n id="${e}_${t}_time" \n value="${n.toInputTimeHHMM(i)}" \n onchange="${e}.onchange(this)" \n ${a.required?"required='required'":""}>\n </div>\n </div>\n ${a.help?`<p class="help">${a.help}</p>`:""}\n </div>\n </div>\n </div>`,e("renderDateExInline",((e,t,i,r)=>`\n <div class="field">\n <div class="control" style="width: 90px;">\n <input type="text" class="input js-no-spinner" \nid="${e}_${t}" \nvalue="${n.toInputDate(i)}" \n${r.min?`min="${r.min}"`:""}\n${r.max?`max="${r.max}"`:""}\nonfocus="${e}.ondate(this, 'focus')" onchange="${e}.ondate(this, 'change')" onblur="${e}.ondate(this, 'blur')" \nautocomplete="off"\n${r.required?"required='required'":""}\n${r.disabled?"tabindex='-1' style='pointer-events:none'":""}>\n </div>\n </div>`))}}})),System.register("_BaseApp/src/theme/theme-calendar",["_BaseApp/src/lib-ts/misc"],(function(e,t){"use strict";var n,i;t&&t.id;return{setters:[function(e){n=e}],execute:function(){e("renderCalendarField",((e,t,n,r,a={})=>{let s=`${e}_${t}`;return`\n <div class="field is-horizontal">\n <div class="field-label"><label class="label ${n.required?"js-required":""}" for="${s}">${r}</label></div>\n <div class="field-body">\n ${i(e,t,n,a)}\n </div>\n </div>`})),e("renderCalendarFilter",((e,t,n,r,a={})=>`\n <div class="field">\n <label class="label ${a.required?"js-required":""}">${r}</label>\n${i(e,t,n,a)}\n </div>`)),e("renderCalendarInline",i=(e,t,i,r)=>{let a=`${e}_${t}`;return`\n <div id="${a}_wrapper" class="field-body">\n <div class="field">\n <div class="js-calendar">\n ${i.render()}\n </div>\n <div class="field has-addons">\n <div class="control" style="width: 90px;">\n <input type="text" class="input js-no-spinner" \n id="${a}" \n value="${n.toInputDate(i.dateValue)}" \n ${i.minValue?`data-min="${n.toInputDate(i.minValue)}"`:""}\n ${i.maxValue?`data-max="${n.toInputDate(i.maxValue)}"`:""}\n autocomplete="off"\n ${i.required?'required="required"':""} \n ${i.disableDate?"disabled":""}>\n </div>\n\n${i.hasTime?`\n <div class="control" style="width: 60px;">\n <input type="text" class="input js-no-spinner"\n id="${a}_time" \n value="${n.toInputTimeHHMM(i.dateValue)}" \n autocomplete="off"\n ${i.required?"required='required'":""}\n ${i.isNullDate?"disabled":""} >\n </div>\n`:""}\n\n${i.required||i.disableDate?"":`\n <div class="control">\n <button id="${a}_clear" class="button"><i class="far fa-times"></i></button>\n </div>\n`}\n\n${i.disableDate?"":`\n <div class="control">\n <a id="${a}_popup" class="button"><i class="far fa-calendar-alt"></i></a>\n </div>\n`}\n\n${i.hasChanger?`\n <div class="control">\n <button id="${a}_previous" class="button" ${i.isNullDate?"disabled":""}>\n <i class="fas fa-angle-left"></i>${r.changerCaption?"&nbsp;Previous Day":""}\n </button>\n </div>\n <div class="control">\n <button id="${a}_next" class="button" ${i.isNullDate?"disabled":""}>\n <i class="fas fa-angle-right"></i>${r.changerCaption?"&nbsp;Next Day":""}\n </button>\n </div>\n`:""}\n\n </div>\n ${r.help?`<p class="help">${r.help}</p>`:""}\n </div>\n </div>`})}}})),System.register("_BaseApp/src/theme/theme-static",["_BaseApp/src/lib-ts/misc"],(function(e,t){"use strict";var n,i;t&&t.id;return{setters:[function(e){n=e}],execute:function(){e("renderStaticField",((e,t,i,r=!1)=>`\n <div class="field is-horizontal js-field-static">\n <div class="field-label"><label class="label ${r?"js-required":""}">${t}</label></div>\n <div class="field-body">\n <div style="width: 100%; height: 2.534em; padding-top: 6px;">\n ${n.toInputText(e)}\n ${null!=i?`<p class="help">${i}</p>`:""}\n </div>\n </div>\n </div>`)),e("renderStaticField2",((e,t,n)=>`\n<div class="field is-horizontal js-field-static">\n <div class="field-label"><label class="label">${t}</label></div>\n <div class="field-body">\n ${i(e,n)}\n </div>\n</div>`)),e("renderStaticHtmlField",((e,t,n)=>`\n <div class="field is-horizontal js-field-static">\n <div class="field-label"><label class="label">${t}</label></div>\n <div class="field-body">\n <div style="width: 100%; padding-top: 6px;">\n ${null==e?"":e}\n ${null!=n?`<p class="help">${n}</p>`:""}\n </div>\n </div>\n </div>`)),e("renderStaticField_V",((e,t,i,r="")=>`\n <div class="field">\n <label class="label">${t}</label>\n <div class="control" style="${r}">${n.toInputText(e)}</div>\n ${null!=i?`<p class="help">${i}</p>`:""}\n </div>`)),e("renderStaticInline",(e=>`\n <div class="field">\n <div class="field-body"><span>${e}</span></div>\n </div>`)),e("renderStaticInline2",i=(e,t)=>{let n=null!=t.addonStatic,i=null!=t.addon;return`\n<div class="field" ${i||n?"":'style="padding-bottom: 6px;"'}>\n <div class="field ${i||n?"has-addons":""}">\n <div class="control">\n <div class="field-body"><span style="margin-right: 8px;">${e}</span></div>\n </div>\n${n?`\n <div class="control">\n <a class="button js-static">\n ${t.addonStatic}\n </a>\n </div>\n`:""}\n${i?`\n <div class="control">\n ${t.addon}\n </div>\n`:""}\n </div>\n ${null!=t.help?`<p class="help">${t.help}</p>`:""}\n</div>`})}}})),System.register("_BaseApp/src/theme/theme-button",[],(function(e,t){"use strict";t&&t.id;return{setters:[],execute:function(){e("renderButtonWithConfirm",((e,t,n,i,r=!1,a=!1,s=!1,l=null,o=!0)=>{let d=(new Date).getTime(),c=r?"p":"a",u="";return u="string"==typeof n?`<div class="dropdown-item">${n}</div>`:n.reduce(((e,t)=>e+`<div class="dropdown-item">${t}</div>`),""),`\n<div class="dropdown ${a?"is-active":""} ${s?"is-hoverable":""}">\n <div class="dropdown-trigger" onclick="${null!=l?l:"App_Theme.toggleActive(this)"}">\n <button class="button" aria-haspopup="true" aria-controls="dropdown-${d}" ${r?"disabled":""}>\n ${null!=t?`<span class="icon"><i class="${t}"></i></span>`:""}\n <span>${e}</span>\n </button>\n </div>\n <div class="dropdown-menu" id="dropdown-${d}" role="menu">\n <div class="dropdown-content">\n ${u}\n <hr class="dropdown-divider">\n${o?`\n <${c} href="#" class="dropdown-item" onclick="${i};return false;">\n <span class="icon"><i class="fa fa-check"></i></span> ${i18n("Yes, do that")}\n </${c}>\n`:`\n <p href="#" class="dropdown-item" style="opacity:0.5">\n <span class="icon"><i class="fa fa-check"></i></span> ${i18n("Yes, do that")}\n </p>\n`}\n </div>\n </div>\n</div>`})),e("renderButtonWithConfirmChoices",((e,t,n,i,r=!1)=>{let a=(new Date).getTime(),s=r?"p":"a";return`\n<div class="dropdown is-up" onclick="App_Theme.toggleActive(this)">\n <div class="dropdown-trigger">\n <button class="button" aria-haspopup="true" aria-controls="dropdown-${a}" ${r?"disabled":""}>\n ${null!=t?`<span class="icon"><i class="${t}"></i></span>`:""}\n <span>${e}</span>\n </button>\n </div>\n <div class="dropdown-menu" id="dropdown-${a}" role="menu">\n <div class="dropdown-content">\n <div class="dropdown-item">\n ${n}\n </div>\n <hr class="dropdown-divider">\n ${i.reduce(((e,t)=>e+(e=>`\n <${s} href="#" class="dropdown-item" onclick="${e.onclick};return false;">\n <span class="icon"><i class="${null!=e.icon?e.icon:"far fa-arrow-circle-right"}"></i></span> ${e.text}\n </${s}>`)(t)),"")}\n </div>\n </div>\n</div>`})),e("renderButton",((e,t,n,i=!1)=>`\n<button class="button" onclick="${n}" ${i?"disabled":""}>\n <span class="icon"><i class="${t}"></i></span>\n <span>${e}</span>\n</button>`))}}})),System.register("_BaseApp/src/theme/theme-modal",["_BaseApp/src/lib-ts/domlib"],(function(e,t){"use strict";var n;t&&t.id;return{setters:[function(e){n=e}],execute:function(){e("renderModalDelete",((e,t)=>`\n<div class="modal js-modal-delete" id="${e}" js-skip-render-class="is-active">\n <div class="modal-background" onclick="App_Theme.closeModal(this);"></div>\n <div class="modal-card">\n<div>\n <header class="modal-card-head">\n <p class="modal-card-title">${i18n("Confirm Delete")}</p>\n <button class="delete" onclick="App_Theme.closeModal(this);"></button>\n </header>\n <section class="modal-card-body">\n <div class="level">\n <div class="level-item has-text-centered">\n <div>\n <p class="heading has-text-weight-bold">${i18n("Are you sure you want to delete this item?")}</p>\n <p class="heading">${i18n("This operation cannot be undone.")}</p>\n </div>\n </div>\n </div>\n </section>\n <footer class="modal-card-foot">\n <button class="button" onclick="App_Theme.closeModal(this);">\n <span>${i18n("CANCEL")}</span>\n </button>\n <button class="button is-danger" onclick="App_Theme.closeModal(this);${t}">\n <span class="icon"><i class="fa fa-times"></i></span> <span>${i18n("Yes, Delete")}</span>\n </button>\n </footer>\n</div>\n </div>\n</div>`)),e("openModal",(e=>{document.getElementById(e).classList.add("is-active")})),e("closeModal",(e=>{n.closestByClassName(e,"modal").classList.remove("is-active")}))}}})),System.register("_BaseApp/src/theme/theme",["_BaseApp/src/lib-ts/misc","_BaseApp/src/theme/theme-action","_BaseApp/src/theme/theme-checkbox","_BaseApp/src/theme/theme-dropdown","_BaseApp/src/theme/theme-select","_BaseApp/src/theme/theme-radio","_BaseApp/src/theme/theme-filter","_BaseApp/src/theme/theme-number","_BaseApp/src/theme/theme-latlong","_BaseApp/src/theme/theme-text","_BaseApp/src/theme/theme-date","_BaseApp/src/theme/theme-calendar","_BaseApp/src/theme/theme-static","_BaseApp/src/theme/theme-button","_BaseApp/src/theme/theme-autocomplete","_BaseApp/src/theme/theme-modal"],(function(e,t){"use strict";var n;t&&t.id;return{setters:[function(e){n=e},function(t){e({renderActionButtons:t.renderActionButtons,renderActionButtons2:t.renderActionButtons2,renderInlineActionButtons:t.renderInlineActionButtons,renderListActionButtons:t.renderListActionButtons,renderListActionButtons2:t.renderListActionButtons2,renderListFloatingActionButtons:t.renderListFloatingActionButtons,renderButtons:t.renderButtons,buttonCancel:t.buttonCancel,buttonInsert:t.buttonInsert,buttonUpload:t.buttonUpload,buttonAddNew:t.buttonAddNew,buttonDelete:t.buttonDelete,buttonUpdate:t.buttonUpdate,buttonUpdateNoDone:t.buttonUpdateNoDone,renderButtonsInline:t.renderButtonsInline,buttonCancelInline:t.buttonCancelInline,buttonInsertInline:t.buttonInsertInline,buttonAddNewInline:t.buttonAddNewInline,buttonDeleteInline:t.buttonDeleteInline,buttonUpdateInline:t.buttonUpdateInline})},function(t){e({rawCheckbox:t.rawCheckbox,renderCheckboxField:t.renderCheckboxField,renderCheckboxInline:t.renderCheckboxInline,renderCheckboxFilter:t.renderCheckboxFilter,renderCheckboxListField:t.renderCheckboxListField,rawToggle:t.rawToggle})},function(t){e({renderDropdownField:t.renderDropdownField,renderDropdownInline:t.renderDropdownInline,renderDropdownExInline:t.renderDropdownExInline,renderDropdownNaked:t.renderDropdownNaked,renderDropdownFilter:t.renderDropdownFilter,renderOptions:t.renderOptions,renderItems:t.renderItems,renderOptionsFun:t.renderOptionsFun,renderOptionsShowBoth:t.renderOptionsShowBoth,renderOptionsShowCode:t.renderOptionsShowCode,renderNullableBooleanOptions:t.renderNullableBooleanOptions,renderNullableBooleanOptionsReverse:t.renderNullableBooleanOptionsReverse,renderDatalistOptions:t.renderDatalistOptions})},function(t){e({rawSelect:t.rawSelect})},function(t){e({renderRadios:t.renderRadios,renderRadioField:t.renderRadioField})},function(t){e({renderNumberFilter:t.renderNumberFilter,renderDateFilter:t.renderDateFilter,renderDateChanger:t.renderDateChanger})},function(t){e({renderNumberField:t.renderNumberField,renderNumberField2:t.renderNumberField2,renderNumberInline:t.renderNumberInline,renderDecimalField:t.renderDecimalField,renderDecimalInline:t.renderDecimalInline,renderNumberInline2:t.renderNumberInline2})},function(t){e({renderLatField:t.renderLatField,renderLongField:t.renderLongField,renderLatLongInline:t.renderLatLongInline,renderDDMMCC:t.renderDDMMCC})},function(t){e({rawText:t.rawText,renderTextField:t.renderTextField,renderTextField2:t.renderTextField2,renderTextInline:t.renderTextInline,renderTextInline2:t.renderTextInline2,renderTextareaField:t.renderTextareaField,renderTextareaField_V:t.renderTextareaField_V,renderTextareaInline:t.renderTextareaInline,renderTextareaFieldWithMarkdown:t.renderTextareaFieldWithMarkdown})},function(t){e({renderDateInline:t.renderDateInline,renderDateExInline:t.renderDateExInline})},function(t){e({renderCalendarField:t.renderCalendarField,renderCalendarInline:t.renderCalendarInline,renderCalendarFilter:t.renderCalendarFilter})},function(t){e({renderStaticField:t.renderStaticField,renderStaticField2:t.renderStaticField2,renderStaticHtmlField:t.renderStaticHtmlField,renderStaticField_V:t.renderStaticField_V,renderStaticInline:t.renderStaticInline})},function(t){e({renderButtonWithConfirm:t.renderButtonWithConfirm,renderButtonWithConfirmChoices:t.renderButtonWithConfirmChoices,renderButton:t.renderButton})},function(t){e({renderAutocompleteField:t.renderAutocompleteField,renderAutocompleteInline:t.renderAutocompleteInline})},function(t){e({renderModalDelete:t.renderModalDelete,openModal:t.openModal,closeModal:t.closeModal})}],execute:function(){e("NS","App_Theme"),e("toggleActive",(e=>{e.classList.toggle("is-active")})),e("wrapContent",((e,t)=>null!=t&&t.length>0?`<div class="content ${e}">${t}</div>`:"")),e("warningTemplate",(e=>e.reduce(((e,t)=>e+`<div class="notification is-danger">\n <i class="fa fa-exclamation-triangle"></i>&nbsp;${t}\n </div>`),""))),e("fatalErrorTemplate403",(()=>`\n <div class="notification is-danger">\n <h3><i class="fas fa-skull-crossbones"></i>&nbsp;${i18n("Unauthorized")}</h3>\n ${i18n("You don't have the required permission for this operation")}\n </div>`)),e("fatalErrorTemplate404",(()=>`\n <div class="notification is-danger">\n <h3><i class="fas fa-skull-crossbones"></i>&nbsp;${i18n("Failed to fetch page data")}</h3>\n ${i18n("You don't have the required permission for this operation")}\n </div>`)),e("dirtyTemplate",((e,t=null)=>`\n <div class="notification is-warning">\n <i class="fa fa-exclamation-triangle"></i>\n <div style="display:inline-table;">You have changes that are not saved. Click Update to save your changes or ${null!=e?`<a onclick="${e}.cancel(); return false;">continue</a> without saving`:"Cancel"}.\n ${null!=t?`<br>${t}`:""}</div>\n </div>`)),e("unexpectedTemplate",(()=>'<div class="notification is-danger">\n <i class="fa fa-exclamation-triangle"></i>&nbsp;UNEXPECTED ERROR\n </div>')),e("inConstruction",((e="In Construction")=>`\n <div class="notification is-size-4 has-text-centered">\n <span class="icon"><i class="fas fa-wrench"></i></span> ${e}\n </div>\n `)),e("onburger",(e=>{let t=document.getElementById(e.dataset.target);e.classList.toggle("is-active"),t.classList.toggle("is-active")})),e("renderBlame",((e,t)=>t||null==e||null==e.updated||null==e.by?"":`\n <div class="has-text-right js-blame">\n <span>Last updated on ${n.toStaticDateTime(e.updated)}${e.by?` by ${e.by}`:""}</span>\n </div>\n`)),e("renderFileUpload",((e,t,n,i="image/*",r=!1)=>r?'\n<div class="level-item">\n <a class="button is-loading">Upoading</a>\n</div>\n ':`\n<div class="level-item">\n <div class="file">\n <label class="file-label">\n <input class="file-input" type="file" id="${e}_${t}" name="${e}_${t}" accept="${i}" onchange="${e}.fileUpload(this)">\n <span class="file-cta">\n <span class="file-icon">\n <i class="fas fa-upload"></i>\n </span>\n <span class="file-label">\n ${n}…\n </span>\n </span>\n </label>\n </div>\n</div>\n `)),e("renderStyleForFixedWidthTable",((e,t)=>{let n=t.reduce(((e,t)=>e+t),0),i=t.reduce(((t,n,i)=>t+`#${e} thead th:nth-child(${i+1}) { width: ${n}px; min-width: ${n}px; }`),""),r=t.reduce(((t,n,i)=>t+`#${e} tbody td:nth-child(${i+1}) { width: ${n}px; min-width: ${n}px; }`),"");return`\n<style>\n #${e} table { width: ${n}px; }\n ${i}\n ${r}\n</style>\n`})),e("renderStyleForScrollableTable",((e,t,n)=>{let i=n.reduce(((e,t)=>e+t),0),r=32*(t+1),a=n.reduce(((t,i,r)=>t+`#${e} thead th:nth-child(${r+1}) { min-width: ${i+(r==n.length-1?20:0)}px; }`),""),s=n.reduce(((t,n,i)=>t+`#${e} tbody td:nth-child(${i+1}) { width: ${n}px; min-width: ${n}px; }`),"");return`\n<style>\n #${e} { overflow: hidden; }\n #${e} table thead { display: block; }\n #${e} table tbody { display: block; overflow: auto; scroll-behavior: smooth; }\n\n #${e} { height: ${r+16}px; }\n #${e} table { width: ${i+20}px; }\n #${e} tbody { height: ${r-32}px; }\n\n ${a}\n ${s}\n</style>\n`})),e("wrapFieldset",((e,t,n=null)=>`\n<fieldset id="${e.split(" ").join("")}">\n <legend class="js-legend"><span>${e}</span>${n?`<div>${n}</div>`:""}</legend>\n ${t}\n</fieldset>\n`)),e("float_menu_button",((e,t)=>`<button class="button is-text" onclick="App_Theme.scrollTo('${t||e}')">${e}</button>`)),e("scrollTo",(e=>{var t=e.replace(/ /g,"");document.getElementById(t).scrollIntoView(),setTimeout((function(){window.scrollBy(0,-180)}),10)})),e("field",((e,t,n=!1,i)=>{let r;return r="string"==typeof t?'<div class="field">'+t+"</div>":'<div class="field js-addons">'+t.reduce(((e,t)=>e+t),"")+"</div>",`\n<div class="field is-horizontal ${i||""}">\n <div class="field-label"><label class="label ${n?"js-required":""}">${e}</label></div>\n <div class="field-body">\n ${r}\n </div>\n</div>`}))}}})),System.register("_BaseApp/src/theme/theme-autocomplete",["_BaseApp/src/lib-ts/misc"],(function(e,t){"use strict";var n,i;t&&t.id;return{setters:[function(e){n=e}],execute:function(){e("renderAutocompleteField",((e,t,n,r,a)=>{let s=`${e}_${t}`;return`\n <div class="field is-horizontal">\n <div class="field-label"><label class="label ${a.required?"js-required":""}" for="${s}">${r}</label></div>\n <div class="field-body">\n ${i(e,t,n,a)}\n </div>\n </div>`})),e("renderAutocompleteInline",i=(e,t,i,r)=>{let a=null!=r.addonStatic,s=null!=r.addon,l=(r.addonHead,`${e}_${t}`);return`\n <div class="field">\n <div class="field js-autocomplete" id="${i.id}">\n <div class="dropdown ${i.isActive?"is-active":""} ${r.size?r.size:"js-width-25"}">\n <div class="control has-icons-right">\n <input type="text" class="input"\n id="${l}" \n data-key="${i.keyValue}"\n value="${n.toStaticText(i.textValue)}" \n onfocus="${i.handle("onfocus")}"\n onkeydown="${i.handle("onkeydown")}"\n onblur="${i.handle("onblur")}"\n ${i.required?"required='required'":""}\n ${i.disabled?"disabled":""}\n autocomplete="off">\n \n <span class="icon is-small is-right">\n <i class="fas fa-search"></i>\n </span>\n </div>\n ${i.render()}\n </div>\n${a?`\n <div class="control" style="display:inline-block">\n <a class="button js-static" ${null!=r.addonHref?`href="${r.addonHref}"`:""}>\n ${r.addonStatic}\n </a>\n </div>\n`:""}\n${s?`\n <div class="control" style="display:inline-block">\n ${r.addon}\n </div>\n`:""}\n </div>\n ${null!=r.help?`<p class="help">${r.help}</p>`:""}\n </div>`})}}})),System.register("src/fr-CA",[],(function(e,t){"use strict";t&&t.id;return{setters:[],execute:function(){e("fr_CA",{values:{HOME:"Accueil","Sign out":"Déconnexion",CANCEL:"Annuler",EMAIL:"Courriel",PASSWORD:"Mot de passe","APP WELCOME":"Bienvenue","ENTER PASSWORD AGAIN":"Entrer votre mot de passe de nouveau","Sign In":"Se connecter","Sign in to start your session":"Commencez votre session","I need a new password!":"J'ai besoin d'un nouveau mot de passe!","Let's fix that!":"Réparons ce problème!","Enter your email address below. You will receive an email with a link to allow you to enter a new password":"Entrez votre adresse courriel ici. Vous recevrez un courriel avec un lien pour entrer un nouveau mot de passe","The email link will expire in one week":"Le lien dans le courriel expire dans une semaine","Send Email":"Envoyer mon courriel","Cancel that, I remember my password now!":"Annulez ma requête, je me souviens du mot de passe!","Password reset email sent":"Le courriel pour un nouveau mot de passe est envoyé","An email has been sent to":"Un courriel a été envoyé à","Check out the spam folder if you don't see the email in your inbox within 5 minutes":"Vérifier votre boîte de pourriel si vous n'avez pas reçu de courriel d'ici 5 minutes",Done:"Complété","Now, let's set your password":"Il est temps d'entrer votre mot de passe","You need to enter your password twice below":"Vous devez entrer votre mot de passe deux fois ici","Go To First Page":"Aller à la première page","Go To Last Page":"Aller à la dernière page",SEARCH:"Recherche"}})}}})),System.register("src/permission",["_BaseApp/src/auth","_BaseApp/src/core/app"],(function(e,t){"use strict";var n,i,r,a,s,l;t&&t.id;return{setters:[function(t){n=t,e({getEmail:t.getEmail,getName:t.getName,getUID:t.getUID,getRoles:t.getRoles,getCurrentYear:t.getCurrentYear,refreshLoginData:t.refreshLoginData})},function(e){i=e}],execute:function(){1,e("isSupport",a=()=>-1!=n.getRoles().indexOf(1)),s=e=>-1!=n.getPermissions().indexOf(e)||a(),e("getCie",(e=>(a()&&e&&e.length&&e[0].startsWith("?cie=")&&(r=+e[0].substr(5)),null!=r?r:i.cie))),e("canDoThis",(()=>s(101))),e("canDoThat",(()=>s(102))),l=new class{constructor(){this.feat={}}assignFeature(e){this.feat=e}get private107(){var e;return null!==(e=this.feat.private107)&&void 0!==e?e:[]}get private208(){var e;return null!==(e=this.feat.private208)&&void 0!==e?e:[]}get private110(){var e;return null!==(e=this.feat.private110)&&void 0!==e?e:[]}},e("assignFeature",(e=>l.assignFeature(e)))}}})),System.register("src/admin/lookupdata",["_BaseApp/src/core/app"],(function(e,t){"use strict";var n,i,r,a,s,l,o,d,c,u,p,m,f,h,$,b,g,v,_,x,T,y,S;t&&t.id;return{setters:[function(e){n=e}],execute:function(){(e,t)=>t>=e.started&&(null==e.ended||t<=e.ended),(e,t)=>t>=e.started&&(null==e.ended||t<=e.ended),e("fetch_authrole",(()=>function(t){if(!(null!=i&&i.length>0))return n.GET("/account/role").then((t=>{e("authrole",i=t)}))})),e("fetch_permmeta_groupe",(()=>function(e){if(!(null!=r&&r.length>0))return n.GET("/permmeta/lookup_groupe").then((e=>{r=e}))})),e("get_permmeta_groupe",(e=>r)),e("fetch_permmeta_parent",(()=>function(e){if(!(null!=a&&a.length>0))return n.GET("/permmeta/lookup_parent").then((e=>{a=e}))})),e("get_permmeta_parent",(e=>a)),e("fetch_editLut",(()=>function(e){if(!(null!=s&&s.length>0))return n.GET("/lookup/by/edit.lut").then((e=>{(s=e).forEach((e=>e.id=e.parentgroupe))}))})),e("get_editLut",(e=>s)),e("fetch_cIE",(()=>function(e){if(!(null!=l&&l.length>0))return n.GET("/lookup/by/cie").then((e=>{l=e}))})),e("get_cIE",(e=>l)),e("fetch_sortOrderKeys",(()=>function(e){const t=(e,t)=>({id:e,description:t});o=[t(1,"Nom fournisseur"),t(2,"No chèque/paiement, Type de facture, Nom fournisseur"),t(3,"No fournisseur"),t(4,"No facture")]})),e("get_sortOrderKeys",(e=>o)),e("fetch_pays",(()=>function(e){if(!(null!=d&&d.length>0))return n.GET("/lookup/by/pays").then((e=>{d=e}))})),e("get_pays",(e=>d)),e("fetch_institutionBanquaire",(()=>function(e){if(!(null!=c&&c.length>0))return n.GET("/lookup/by/institutionBanquaire").then((e=>{c=e}))})),e("get_institutionBanquaire",(e=>c)),e("fetch_compte",(()=>function(e){if(!(null!=u&&u.length>0))return n.GET("/lookup/by/compte").then((e=>{u=e}))})),e("get_compte",(e=>u)),e("fetch_autreFournisseur",(()=>function(e){if(!(null!=p&&p.length>0))return n.GET("/lookup/by/autreFournisseur").then((e=>{p=e}))})),e("get_autreFournisseur",(e=>p)),e("fetch_lot",(()=>function(e){if(!(null!=m&&m.length>0))return n.GET("/lookup/by/lot").then((e=>{m=e}))})),e("get_lot",(e=>m)),e("fetch_canton",(()=>function(e){if(!(null!=f&&f.length>0))return n.GET("/lookup/by/canton").then((e=>{f=e}))})),e("get_canton",(e=>f)),e("fetch_municipalite",(()=>function(e){if(!(null!=h&&h.length>0))return n.GET("/lookup/by/municipalite").then((e=>{h=e}))})),e("get_municipalite",(e=>h)),e("fetch_proprietaire",(()=>function(e){if(!(null!=$&&$.length>0))return n.GET("/lookup/by/proprietaire").then((e=>{$=e}))})),e("get_proprietaire",(e=>$)),e("fetch_contingent",(()=>function(e){if(!(null!=b&&b.length>0))return n.GET("/lookup/by/contingent").then((e=>{b=e}))})),e("get_contingent",(e=>b)),e("fetch_droit_coupe",(()=>function(e){if(!(null!=g&&g.length>0))return n.GET("/lookup/by/droit_coupe").then((e=>{g=e}))})),e("get_droit_coupe",(e=>g)),e("fetch_entente_paiement",(()=>function(e){if(!(null!=v&&v.length>0))return n.GET("/lookup/by/entente_paiement").then((e=>{v=e}))})),e("get_entente_paiement",(e=>v)),e("fetch_zone",(()=>function(e){if(!(null!=_&&_.length>0))return n.GET("/lookup/by/zone").then((e=>{_=e}))})),e("get_zone",(e=>_)),e("fetch_region",(()=>function(e){if(!(null!=x&&x.length>0))return n.GET("/lookup/by/region").then((e=>{x=e}))})),e("get_region",(e=>x)),e("fetch_office",(()=>function(e){if(!(null!=T&&T.length>0))return n.GET("/office/lookup").then((e=>{T=e}))})),e("get_office",(e=>T)),e("fetch_job",(()=>function(e){if(!(null!=y&&y.length>0))return n.GET("/job/lookup").then((e=>{y=e}))})),e("get_job",(e=>y)),e("fetch_cat",(()=>function(e){if(!(null!=S&&S.length>0))return n.GET("/lookup/by/cat").then((e=>{S=e}))})),e("get_cat",(e=>S))}}})),System.register("src/home",["_BaseApp/src/core/app","_BaseApp/src/core/router","src/permission","src/layout"],(function(e,t){"use strict";var n,i,r,a,s,l,o,d,c,u;t&&t.id;return{setters:[function(e){n=e},function(e){i=e},function(e){r=e},function(e){a=e}],execute:function(){e("NS",s="App_Home"),e("getMenuData",o=()=>null!=l?l:l=[{name:"Application",icon:"fad fa-cogs",columnClass:"is-half-tablet is-one-third-fullhd",listColumnClass:"",canView:!0,sections:[{name:"Gestion",icon:"fas fa-unlock-alt",links:[{name:"Comptes",href:"#/admin/accounts",ns:["App_accounts","App_account"]},{name:"Gestion des tables",href:"#/admin/lookups/profile.key",ns:["App_lookups","App_lookup"]},{name:"Gestion des périodes"},{name:"Matrice de sécurité"}],merge:"start"},{merge:"end",name:"Support",icon:"fas fa-tools",links:[{name:"Compagnies",href:"#/support/companys",ns:["App_companys","App_company"]},{name:"Metadata des permissions"},{name:"Audit"},{name:"(office)",href:"#/offices",ns:["App_offices","App_office"],hidden:"ctrepanier@jaguarsolutions.ca"!=r.getEmail()},{name:"(staff)",href:"#/staffs_2",ns:["App_staffs_2","App_staff_2"],hidden:"ctrepanier@jaguarsolutions.ca"!=r.getEmail()}]},{name:"Configuration",icon:"fas fa-tools",links:[{name:"Paramètres du système"},{name:"Personnalisation"},{name:"Acomba"},{name:"Comptes/Fournisseurs"},{name:"Numéro de taxes"},{name:"Permis"},{name:"Paramètres d'impression"},{name:"Backup"},{name:"Profil par défaut"}]}]},{name:"Territoires",icon:"fad fa-map-marker-alt",columnClass:"is-half-tablet is-one-third-fullhd",listColumnClass:"",canView:!0,sections:[{name:"Saisie",icon:"fal fa-table",links:[{name:"Lots",href:"#/lots",ns:["App_lots","App_lot"]},{name:"Municipalités"},{name:"Lots répétitifs"},{name:"Agences"},{name:"Cantons"},{name:"MRC"}]},{name:"Importation",icon:"fal fa-arrow-circle-down",links:[{name:"Lots répétitifs"},{name:"Lots certifiés"}]},{name:"Rapports",icon:"fal fa-file-alt",canView:!0,links:[{name:"Municipalités"},{name:"Lots par municipalités"},{name:"Lots par secteurs"},{name:"Lots certifiés"},{name:"Superficies (lot)"},{name:"MRC"},{name:"Cantons"},{name:"Statistiques par essence"}]}]},{name:"Essences",icon:"fad fa-trees",columnClass:"is-half-tablet is-one-third-fullhd",listColumnClass:"",canView:!0,sections:[{name:"Saisie",icon:"fal fa-table",links:[{name:"Essences"},{name:"Unités de mesure"},{name:"Essences de sciage"},{name:"Répartitions d'essences"},{name:"Regroupements d'essences"}]},{name:"Rapports",icon:"fal fa-file-alt",links:[{name:"Liste des essences"},{name:"Liste des unités de mesure"}]}]},{name:"Fournisseurs",icon:"fad fa-user-tag",columnClass:"is-half-tablet is-one-third-fullhd",listColumnClass:"",canView:!0,sections:[{name:"Saisie",icon:"fal fa-table",links:[{name:"Propriétaires",href:"#/proprietaires",ns:["App_proprietaires","App_proprietaire"]},{name:"Transporteurs"},{name:"Chargeurs"},{name:"Autres"},{name:"Fournisseurs en paiement manuel"},{name:"Institutions bancaires"},{name:"Pays"}]},{name:"Rapports",icon:"fal fa-file-alt",links:[{name:"Identification des producteurs"},{name:"Livraisons par producteurs"},{name:"Permis non-livrés"},{name:"Superficies"},{name:"Droits de coupe"},{name:"Fonds de roulement"},{name:"Sommaire des montants payés aux producteurs"}]}]},{name:"Usines",icon:"fad fa-industry-alt",columnClass:"is-half-tablet is-one-third-fullhd",listColumnClass:"",canView:!0,sections:[{name:"Saisie",icon:"fal fa-table",links:[{name:"Usines"},{name:"Contingent par regroupement"},{name:"Contingent par usine"},{name:"Demande de contingent"},{name:"Utilisation par les usines"}]},{name:"Rapports",icon:"fal fa-file-alt",links:[{name:"Usines"},{name:"Certificat de contingent regroupement"},{name:"Certificat de contingent usine"}]}]},{name:"Contrats",icon:"fad fa-file-signature",columnClass:"is-half-tablet is-one-third-fullhd",listColumnClass:"",canView:!0,sections:[{name:"Saisie",icon:"fal fa-table",links:[{name:"Contrats"},{name:"Ajustements de contrat"},{name:"Augmentation taux transport"}]},{name:"Rapports",icon:"fal fa-file-alt",links:[{name:"Contrats"}]}]},{name:"Livraisons",icon:"fad fa-truck-container",columnClass:"is-half-tablet is-one-third-fullhd",listColumnClass:"",canView:!0,sections:[{name:"Saisie",icon:"fal fa-table",links:[{name:"Permis de livraison"},{name:"Recherche de permis"},{name:"Livraisons"},{name:"Facture usine"},{name:"Recherche de livraisons"},{name:"Gestion des volumes"}],merge:"start"},{merge:"end",name:"Importation",icon:"fal fa-arrow-circle-down",links:[{name:"Feuillet Domptar"}]},{name:"Rapports",icon:"fal fa-file-alt",links:[{name:"Liste détaillée des livraisons"},{name:"Sommaire des livraisons"},{name:"Liste des livraisons (détail)"},{name:"Liste des livraisons (résumé)"},{name:"Répartition des livraisons"},{name:"Nombre de producteurs qui ont livré par usine"},{name:"Identification des transporteurs"},{name:"Liste des transporteurs"}]}]},{name:"Indexations",icon:"fad fa-book",columnClass:"is-half-tablet is-one-third-fullhd",listColumnClass:"",canView:!0,sections:[{name:"Saisie",icon:"fal fa-table",links:[{name:"Indexations"}]},{name:"Rapports",icon:"fal fa-file-alt",links:[{name:"Sommaire des factures par producteurs"},{name:"Sommaire des factures par transporteurs"}]}]},{name:"Comptabilité",icon:"fad fa-file-invoice-dollar",columnClass:"",listColumnClass:"",canView:!0,sections:[{name:"Mise à jour",icon:"fal fa-arrow-circle-down",links:[{name:"Mise à jour des comptes"},{name:"Mise à jour des fournisseurs"},{name:"Mise à jour des usines (clients)"},{name:"Mise à jour des numéros de chèque"},{name:"Mise à jour d'un numéro de chèque "}],merge:"start"},{merge:"end",name:"Opérations",icon:"fal fa-arrow-circle-up",links:[{name:"Transfert des factures"},{name:"Backup des données"}]},{name:"Calculs",icon:"fal fa-calculator",links:[{name:"Livraisons"},{name:"Ajustements"},{name:"Indexations"},{name:"Erreurs: Mauvaises factures"},{name:"Erreurs: Mauvais paiements"}]}]},{name:"Rapports",icon:"fad fa-file-spreadsheet",columnClass:"is-full",listColumnClass:"js-nowrap",canView:!0,sections:[{name:"Territoires",icon:null,links:[{name:"Liste des municipalités"},{name:"Liste des lots par municipalités"},{name:"Liste des lots par secteurs"},{name:"Liste des lots certifiés"},{name:"Liste des superficies (lot)"},{name:"Liste des MRC"},{name:"Liste des cantons"},{name:"Statistiques par essence"}]},{name:"Essences",icon:null,links:[{name:"Liste des essences"},{name:"Liste des unités de mesure"}]},{name:"Producteurs",icon:null,links:[{name:"Liste des identifications producteurs"},{name:"Liste des livraisons par producteur"},{name:"Liste des superficies"},{name:"Liste des identifications de droit de coupe"},{name:"Liste des fonds de roulement"},{name:"Liste sommaire des montants payés aux producteurs"},{name:"Liste détaillée des livraisons"},{name:"Liste des superficies (lots)"},{name:"Liste d'envoi du bulletin (courriel)"},{name:"Liste d'envoi du bulletin d'information"},{name:"Liste d'envoi courriel pour un rappel"},{name:"Rapport annuel"}]},{name:"Transporteurs",icon:null,links:[{name:"Liste des identifications transporteurs"},{name:"Liste des transporteurs"},{name:"Liste sommaire des montants payés"},{name:"Liste détaillée des livraisons"},{name:"Rapport annuel"}]},{name:"Chargeurs",icon:null,links:[{name:"Liste des identifications chargeurs"},{name:"Liste des chargeurs"},{name:"Liste sommaire des montants payés"},{name:"Liste détaillée des livraisons"},{name:"Rapport annuel"}]},{name:"Autres fournisseurs",icon:null,links:[{name:"Liste des identifications"}]},{name:"Usines",icon:null,links:[{name:"Liste des usines"},{name:"Combinaison d'unités de mesure et essences"}]},{name:"Contrats",icon:null,links:[{name:"Liste de contrats"},{name:"Sommaire des contrats par usine"},{name:"Table des prix aux producteurs"},{name:"Table des prix aux transporteurs"},{name:"Ventilation des montants calculés"},{name:"Ventilation des montants calculés (Excel)"},{name:"Contrôle de bois par usine"},{name:"Contrôle de bois par usine (essences combinées)"},{name:"Contrôle de bois par usine (essences codes combinées)"},{name:"Contrôle de bois par contrat regroupement"},{name:"Contrôle de bois par contrat usine"},{name:"Répartition des volumes"},{name:"Statistiques agence-MRC-secteur"},{name:"Statistiques agence-municipalité-secteur"},{name:"Nombre de producteurs"}]},{name:"Contingentements",icon:null,links:[{name:"Demandes de contingent"},{name:"Demandes de contingent Estrie"},{name:"Autorisations de livraisons (usine)"},{name:"Autorisations de livraisons (regroupement)"},{name:"Certificat de contingent (usine)"},{name:"Certificat de contingent (regroupement)"},{name:"Permis Regroupement"},{name:"Liste des contingentements par transporteur"},{name:"Liste des contingentements par usine"},{name:"Liste des contingentements par regroupement"},{name:"Liste des demandes de contingentements"},{name:"Rapport des irrégularités"}]},{name:"Livraisons",icon:null,links:[{name:"Sommaire des livraisons"},{name:"Sommaire des livraisons (avec déductions)"},{name:"Liste des livraisons (détaillée)"},{name:"Liste des livraisons (résumé)"},{name:"Répartition des livraisons"},{name:"Nombre de producteurs qui ont livré par usine"},{name:"Liste des calculs (payés)"},{name:"Liste des calculs (non-payés)"},{name:"Livraisons non conformes (par transporteur)"},{name:"Livraisons non conformes (sommaire)"},{name:"Producteurs ayant livré / producteurs par secteur"},{name:"Sciage et déroulage (m3 solide)"},{name:"Feuillets de Domptar (Estrie)"},{name:"Liste des livraisons par MRC"},{name:"Valeur des livraisons"}]},{name:"Gestion des volumes",icon:null,links:[{name:"Par usine"},{name:"Détaillé"}]},{name:"Indexations",icon:null,links:[{name:"Indexation aux transporteurs"},{name:"Indexation aux producteurs"},{name:"Indexation aux transporteurs (avant calculs)"},{name:"Indexation aux producteurs (avant calculs)"}]},{name:"Permis",icon:null,links:[{name:"Permis en circulation"},{name:"Permis annulés"}]},{name:"Factures",icon:null,links:[{name:"Impression des factures"},{name:"Liste des factures par usine"},{name:"Liste des factures du mois (date du calcul)"},{name:"Liste des factures du mois (date de facture Acomba)"},{name:"Sommaire des factures par producteur"},{name:"Sommaire des factures par transporteur"},{name:"Fournisseurs en paiement manuel"},{name:"Écritures de mise en commun"}]},{name:"Ajustements",icon:null,links:[{name:"Rapport usines"},{name:"Rapport producteurs"},{name:"Rapport transporteurs"}]}]}]),e("clearMenuData",(()=>{l=null})),e("renderDropdown",((e,t)=>`\n <div class="select is-small">\n <select id="${s}_${e}" onchange="${s}.onchange(this)">\n ${t}\n </select>\n </div>`)),d=e=>{const t=e=>{if(e.hidden)return"";const t=e.classes?`class="${e.classes}"`:"";if(e.markup)return`<li ${t}>${e.markup}</li>`;const n=null==e.href&&null==e.onclick,i=e.href||"#",r=i.startsWith("http")||e.isExternal;return`<li ${t}><a href="${i}" ${n?'class="js-disabled"':""} ${r?'target="_new"':""} ${e.onclick?`onclick="${e.onclick}"`:""}>${e.name}</a></li>`},n=e=>`\n<div class="column ${e.columnClass}">\n <div class="box">\n <div class="js-widget">\n <div class="tile">\n <i class="${e.icon} fa-4x"></i>\n <div>${e.name}</div>\n </div>\n <div class="columns is-mobile is-multiline">\n ${e.sections.filter((e=>null==e.canView||e.canView)).reduce(((n,i)=>n+((e,n)=>{if(e.hidden)return"";const i=null!=e.merge&&"end"==e.merge,r=null!=e.merge&&"start"==e.merge;return`\n ${i?"":`<div class="column ${null==e.maxrows?n:""}">`}\n ${e.name?`<h3><i class="${e.icon}"></i> ${e.name}</h3>`:""}\n <div class="js-links">${(()=>{const n=e.links.filter((e=>null==e.canView||e.canView)),i=null==e.maxrows?32:e.maxrows;let r="";for(let e=0;e<n.length;e++){const a=e%i;0==a&&(r+="<ul>"),r+=t(n[e]),a!=i-1&&e!=n.length-1||(r+="</ul>")}return r})()}</div>\n ${r?"":"</div>"}\n`})(i,e.listColumnClass)),"")}\n </div>\n </div>\n </div>\n</div>\n`;return e.filter((e=>e.canView)).reduce(((e,t)=>e+n(t)),"")},c=e=>`\n<form onsubmit="return false;">\n<input type="submit" style="display:none;" id="${s}_dummy_submit">\n <div style="padding:1rem;">\n <div class="columns is-multiline">\n ${e}\n </div>\n </div>\n</form>\n`,u=()=>Promise.resolve(),e("fetch",(()=>{n.setRenderDomain(a),n.prepareRender(s,"HOME"),i.registerDirtyExit(null),u().then(n.render).catch(n.render)})),e("render",(()=>{if(!n.inContext(s))return"";let e=d(o());return c(e)})),e("postRender",(()=>{if(!n.inContext(s))return""})),()=>{},e("onchange",(e=>{n.render()})),()=>JSON.parse(localStorage.getItem("tools-state")),e=>{localStorage.setItem("tools-state",JSON.stringify(e))}}}})),System.register("src/admin/layout",["_BaseApp/src/core/app","src/permission","src/layout"],(function(e,t){"use strict";var n,i,r,a;t&&t.id;return{setters:[function(e){n=e},function(e){i=e},function(e){r=e}],execute:function(){e("icon",a="far fa-user"),e("prepareMenu",(()=>{r.setOpenedMenu("Administration-Management")})),e("tabTemplate",((e,t,r=!1)=>{let s=n.inContext("App_company"),l=n.inContext("App_accounts"),o=n.inContext("App_account"),d=n.inContext("App_lookups"),c=n.inContext("App_security"),u=(window.location.hash.startsWith("#/files/company"),window.location.hash.startsWith("#/file/company"),i.isSupport());return`\n<div class="tabs is-boxed">\n <ul>\n <li ${s?"class='is-active'":""}>\n <a href="#/admin/company">\n <span class="icon"><i class="${a}" aria-hidden="true"></i></span>\n <span>${i18n("Company Details")}</span>\n </a>\n </li>\n <li ${l?"class='is-active'":""}>\n <a href="#/admin/accounts">\n <span class="icon"><i class="fas fa-list-ol" aria-hidden="true"></i></span>\n <span>${i18n("Accounts")}</span>\n </a>\n </li>\n${o?`\n <li class="is-active">\n <a href="#/admin/account/${e}">\n <span class="icon"><i class="${a}" aria-hidden="true"></i></span>\n <span>${i18n("Account Details")}</span>\n </a>\n </li>\n`:""}\n\n <li ${d?"class='is-active'":""}>\n <a href="#/admin/lookups">\n <span class="icon"><i class="fas fa-list-ol" aria-hidden="true"></i></span>\n <span>${i18n("Lookups")}</span>\n </a>\n </li>\n\n\n${u?`\n <li ${c?"class='is-active'":""}>\n <a href="#/support/security">\n <span class="icon"><i class="far fa-paperclip" aria-hidden="true"></i></span>\n <span>${i18n("Security")}</span>\n </a>\n </li>\n`:""}\n\n\n\n\n </ul>\n</div>\n`})),e("buildTitle",((e,t)=>{var n;return null!==(n=null==e?void 0:e.title)&&void 0!==n?n:t})),e("buildSubtitle",((e,t)=>{var n;return null!==(n=null==e?void 0:e.subtitle)&&void 0!==n?n:t}))}}})),System.register("src/admin/accounts",["_BaseApp/src/core/app","_BaseApp/src/core/router","src/permission","_BaseApp/src/lib-ts/misc","_BaseApp/src/theme/theme","_BaseApp/src/theme/pager","src/admin/layout"],(function(e,t){"use strict";var n,i,r,a,s,l,o,d,c,u,p,m,f,h,$,b,g,v,_,x,T;t&&t.id;return{setters:[function(e){n=e},function(e){i=e},function(e){r=e},function(e){a=e},function(e){s=e},function(e){l=e},function(e){o=e}],execute:function(){e("NS",d="App_accounts"),c={list:[],pager:{pageNo:1,pageSize:20,sortColumn:"EMAIL",sortDirection:"ASC",filter:{cie:n.cie,archive:void 0,readyToArchive:void 0}}},m=()=>{let e=i18n("Auto Archive"),t=i18n("<p><b>Note:</b> This will archive all records having the <b><em>Ready to Archive</em></b> flag set.</p>"),n=`${d}.autoArchive()`;return s.renderButtonWithConfirm(e,"far fa-lock-open-alt",t,n,!1,!1,!0)},f=(e,t)=>{let n=[];return n.push(s.renderDropdownFilter(d,"archive",e,i18n("ARCHIVE"))),n.push(s.renderDropdownFilter(d,"readytoarchive",t,i18n("READYTOARCHIVE"))),n.join("")},h=(e,t)=>`\n<tr class="${T(e.uid)?"is-selected":""}" onclick="${d}.gotoDetail(${e.uid});">\n <td class="js-index">${t}</td>\n <td>${a.toStaticText(e.email)}</td>\n <td>${a.toStaticText(e.firstname)}</td>\n <td>${a.toStaticText(e.lastname)}</td>\n <td>${a.toStaticText(e.roleluid_text)}</td>\n <td>${a.toStaticDateTime(e.lastactivity)}</td>\n <td>${a.toStaticCheckbox(e.readytoarchive)}</td>\n <td>${a.toStaticCheckbox(e.archive)}</td>\n</tr>`,$=(e,t)=>`\n<div class="table-container">\n<table class="table is-hoverable is-fullwidth">\n <thead>\n <tr>\n <th></th>\n ${l.sortableHeaderLink(t,d,i18n("EMAIL"),"email","ASC")}\n ${l.sortableHeaderLink(t,d,i18n("FIRSTNAME"),"firstname","ASC")}\n ${l.sortableHeaderLink(t,d,i18n("LASTNAME"),"lastname","ASC")}\n ${l.sortableHeaderLink(t,d,i18n("ROLEMASK"),"roleluid_text","ASC")}\n ${l.sortableHeaderLink(t,d,i18n("LASTACTIVITY"),"lastactivity","DESC")}\n ${l.sortableHeaderLink(t,d,i18n("READYTOARCHIVE"),"readytoarchive","DESC")}\n ${l.sortableHeaderLink(t,d,i18n("ARCHIVE"),"archive","ASC")}\n </tr>\n </thead>\n <tbody>\n ${e}\n </tbody>\n</table>\n</div>\n`,b=(e,t,n,i,r)=>{let a=[];a.push(m()),a.push(s.buttonAddNew(d,"#/admin/account/new",i18n("Add New")));let l=s.renderButtons(a);return`\n<form onsubmit="return false;">\n<input type="submit" style="display:none;" id="${d}_dummy_submit">\n\n<div class="js-fixed-heading">\n<div class="js-head">\n <div class="content js-uc-heading js-flex-space">\n <div>\n <div class="title"><i class="${o.icon}"></i> ${u.title}</div>\n <div class="subtitle">${i18n("List of accounts")}</div>\n </div>\n <div>\n ${s.wrapContent("js-uc-actions",l)}\n </div>\n </div>\n ${s.wrapContent("js-uc-tabs",n)}\n</div>\n<div class="js-body">\n ${s.wrapContent("js-uc-notification",r)}\n ${s.wrapContent("js-uc-notification",i)}\n ${s.wrapContent("js-uc-pager",e)}\n ${s.wrapContent("js-uc-list",t)}\n</div>\n</div>\n\n</form>\n`},e("fetchState",g=e=>(i.registerDirtyExit(null),c.pager.filter.cie=e,n.POST("/account/search/",c.pager).then((t=>{c=t,u=t.xtra,{cie:e}})))),e("fetch",(e=>{let t=r.getCie(e);n.prepareRender(d,i18n("accounts")),o.prepareMenu(),g(t).then(n.render).catch(n.render)})),v=()=>{n.prepareRender(d,i18n("accounts")),n.POST("/account/search/",c.pager).then((e=>{c=e})).then(n.render).catch(n.render)},e("render",(()=>{if(!_())return"";if(n.fatalError())return n.fatalErrorTemplate();if(null==c||null==c.list||c.list instanceof Array==0)return n.warningTemplate()||n.unexpectedTemplate();let e=n.warningTemplate();const t=c.list.reduce(((e,t,n)=>{let i=l.rowNumber(c.pager,n);return e+h(t,i)}),"");r.getCurrentYear();let i=s.renderNullableBooleanOptionsReverse(c.pager.filter.archive,["All",i18n("Archived"),i18n("Active")]),a=s.renderNullableBooleanOptions(c.pager.filter.readyToArchive,["All",i18n("Ready"),i18n("Not Ready")]);const u=f(i,a),p=l.searchTemplate(c.pager,d),m=l.render(c.pager,d,[20,50],p,u),g=$(t,c.pager),v=o.tabTemplate(null,null);return b(m,g,v,"",e)})),e("postRender",(()=>{_()})),e("inContext",_=()=>n.inContext(d)),x=e=>{null==p&&(p={uid:e}),p.uid=e},T=e=>null!=p&&p.uid==e,e("goto",((e,t)=>{c.pager.pageNo=e,c.pager.pageSize=t,v()})),e("sortBy",((e,t)=>{c.pager.pageNo=1,c.pager.sortColumn=e,c.pager.sortDirection=t,v()})),e("search",(e=>{c.pager.searchText=e.value,c.pager.pageNo=1,v()})),e("filter_archive",(e=>{let t=e.options[e.selectedIndex].value,n=t.length>0?"true"==t:void 0;n!=c.pager.filter.archive&&(c.pager.filter.archive=n,c.pager.pageNo=1,v())})),e("filter_readytoarchive",(e=>{let t=e.options[e.selectedIndex].value,n=t.length>0?"true"==t:void 0;n!=c.pager.filter.readyToArchive&&(c.pager.filter.readyToArchive=n,c.pager.pageNo=1,v())})),e("gotoDetail",(e=>{x(e),i.goto(`#/admin/account/${e}`)})),e("create",(()=>{i.goto("#/admin/account/new")})),e("autoArchive",(()=>{n.POST("/account/auto-archive",null).then((e=>{a.toastSuccess(i18n("Auto Archive Executed")),i.goto("#/admin/accounts",10)})).catch(n.render)}))}}})),System.register("src/admin/account",["_BaseApp/src/core/app","_BaseApp/src/core/router","_BaseApp/src/lib-ts/misc","_BaseApp/src/theme/theme","_BaseApp/src/auth","src/admin/lookupdata","src/admin/layout"],(function(e,t){"use strict";var n,i,r,a,s,l,o,d,c,u,p,m,f,h,$,b,g,v,_,x,T,y,S,w,C,A,E,I,N;t&&t.id;return{setters:[function(e){n=e},function(e){i=e},function(e){r=e},function(e){a=e},function(e){s=e},function(e){l=e},function(e){o=e}],execute:function(){e("NS",d="App_account"),c=["cie_text","roleluid_text","resetguid","created","updatedby","by","profileJson","xtra"],p={},m={},h=!1,$=!1,b=(e,t)=>{let n=a.renderRadios(d,"roleluid",l.authrole,p.roleluid,!1);return`\n <div class="columns js-2-columns">\n <div class="column">\n ${a.renderCheckboxField(d,"userealemail",e.userealemail,i18n("USEREALEMAIL"),i18n("USEREALEMAIL_TEXT"),i18n(`USEREALEMAIL_HELP_${e.userealemail}`))}\n\n${e.userealemail?`\n ${a.renderTextField2(d,"email",e.email,i18n("EMAIL"),50,{required:!0,size:"js-width-50"})}\n ${h?"":`\n <div class="field is-horizontal">\n <div class="field-label"><label class="label">&nbsp;</label></div>\n <div class="field-body"><span><a href="mailto:${e.email}"><i class="far fa-envelope"></i> ${i18n("SEND EMAIL TO")} ${e.email}</a></span></div>\n </div>\n `}\n`:`\n ${a.renderTextField2(d,"email",e.email,i18n("USERNAME"),50,{required:!0,size:"js-width-50"})}\n ${a.renderTextField2(d,"password",e.password,i18n("PASSWORD"),50,{required:h,size:"js-width-50",help:h?void 0:i18n("PASSWORD_HELP"),noautocomplete:!0})}\n`}\n\n ${a.renderTextField(d,"firstname",e.firstname,i18n("FIRSTNAME"),50,!0)}\n ${a.renderTextField(d,"lastname",e.lastname,i18n("LASTNAME"),50,!0)}\n\n${h?"":`\n ${a.renderStaticField(r.toStaticDateTime(e.resetexpiry),i18n("RESETEXPIRY"))}\n ${a.renderStaticField(r.toStaticDateTime(e.lastactivity),i18n("LASTACTIVITY"))}\n <div class="field is-horizontal">\n <div class="field-label"><label class="label">&nbsp;</label></div>\n <div class="field-body">${_(e)}</div>\n </div>\n`}\n </div>\n <div class="column">\n ${a.renderNumberField(d,"currentyear",e.currentyear,i18n("CURRENTYEAR"),!0,"js-width-25","User can only enter data for this fire season")}\n ${a.renderRadioField(n,i18n("ROLELUID"))}\n ${a.renderNumberField(d,"archivedays",e.archivedays,i18n("ARCHIVEDAYS"),!1,"js-width-25","Duration in days after which an inactive account is archived")}\n${h?"":`\n ${a.renderCheckboxField(d,"archive",e.archive,i18n("ARCHIVE"),"Disable Account","User cannot sign-in to OpsFMS when the account is disabled")}\n`}\n </div>\n </div>\n`},g=(e,t)=>`\n <div class="columns js-2-columns">\n <div class="column">\n ${a.renderTextField(d,"acrobatpath",e.acrobatpath,"Chemin d'accès à Acrobat Reader",100,!1)}\n ${a.renderDropdownField(d,"facturesorttype",t,"Ordre de tri des factures (croissant)")}\n </div>\n </div>\n`,v=(e,t,n)=>`\n<div class="columns">\n <div class="column is-8 is-offset-2">\n ${a.wrapFieldset("Compte",b(e))}\n ${a.wrapFieldset("Profile",g(e,n))}\n </div>\n</div>\n\n ${a.renderBlame(e,h)}\n`,_=e=>{let t,n,i;return e.canresetpassword&&(t=i18n("Reset Password"),n=i18n("<p><b>Note:</b> This will prevent the user from login until the user re-enters a new password.</p><br><p>An email will be sent to the user with a link to do so.</p>"),i=`${d}.resetPassword()`),e.cancreateinvitation&&(t=i18n("Create Invitation"),n=i18n("<p>Create an invitation for this user to join OpsFMS.</p><br><p>An email will be sent to the user with a link to do so.</p>"),i=`${d}.createInvitation()`),e.canextendinvitation&&(t=i18n("Extend Invitation"),n=i18n("Re-invite this user to OpsFMS because he/she didn't go through the process before the <b>Password Reset Expiry</b>.</p><br><p>An email will be sent to the user with a link to do so.</p>"),i=`${d}.createInvitation()`),t?a.renderButtonWithConfirm(t,"fas fa-lock",n,i,!1,!1,!0):""},x=()=>h||1!=u.uid||-1!=s.getRoles().indexOf(1),T=(e,t,n,i,r)=>`\n<form onsubmit="return false;" ${!x()?"class='js-readonly'":""}>\n<input type="submit" style="display:none;" id="${d}_dummy_submit">\n\n<div class="js-fixed-heading">\n<div class="js-head">\n <div class="content js-uc-heading js-flex-space">\n <div>\n <div class="title"><i class="${o.icon}"></i> <span>${f.title}</span></div>\n <div class="subtitle">${h?i18n("New account"):f.subtitle}</div>\n </div>\n <div>\n ${a.wrapContent("js-uc-actions",a.renderActionButtons2(d,h,"#/admin/account/new",[]))}\n ${a.renderBlame(e,h)}\n </div>\n </div>\n ${a.wrapContent("js-uc-tabs",n)}\n</div>\n<div class="js-body">\n ${a.wrapContent("js-uc-notification",r)}\n ${a.wrapContent("js-uc-notification",i)}\n ${a.wrapContent("js-uc-details",t)}\n</div>\n</div>\n\n${a.renderModalDelete(`modalDelete_${d}`,`${d}.drop()`)}\n\n</form>\n`,y=()=>$?n.dirtyTemplate(d,r.changes(m,p)):"",S=()=>{p={}},e("fetchState",w=e=>{h=isNaN(e),$=!1,i.registerDirtyExit(N),S();let t=`/account/${h?"new":e}`;return n.GET(t).then((t=>{p=t.item,m=r.clone(p),f=t.xtra,u={uid:e}})).then(l.fetch_authrole()).then(l.fetch_sortOrderKeys())}),e("fetch",(e=>{let t=+e[0];n.prepareRender(d,i18n("account")),o.prepareMenu(),w(t).then(n.render).catch(n.render)})),e("render",(()=>{if(!C())return"";if(n.fatalError())return n.fatalErrorTemplate();if(null==p||0==Object.keys(p).length)return n.warningTemplate()||n.unexpectedTemplate();let e=p.currentyear,t=l.get_sortOrderKeys(e),i=a.renderOptions(t,p.facturesorttype,!1);const r=v(p,l.authrole,i);void 0;const s=o.tabTemplate(p.uid,f),d=y(),c=n.warningTemplate();return T(p,r,s,c,d)})),e("postRender",(()=>{C()&&n.setPageTitle(h?i18n("New account"):f.title)})),e("inContext",C=()=>n.inContext(d)),A=()=>{let e=r.clone(p);return e.userealemail=r.fromInputCheckbox(`${d}_userealemail`,p.userealemail),e.email=r.fromInputText(`${d}_email`,p.email),e.password=r.fromInputText(`${d}_password`,p.password),e.firstname=r.fromInputText(`${d}_firstname`,p.firstname),e.lastname=r.fromInputText(`${d}_lastname`,p.lastname),e.currentyear=r.fromInputNumber(`${d}_currentyear`,p.currentyear),e.roleluid=r.fromRadioNumber(`${d}_roleluid`,p.roleluid),e.archivedays=r.fromInputNumberNullable(`${d}_archivedays`,p.archivedays),e.archive=r.fromInputCheckbox(`${d}_archive`,p.archive),e.acrobatpath=r.fromInputText(`${d}_acrobatpath`,p.acrobatpath),e.facturesorttype=r.fromSelectNumber(`${d}_facturesorttype`,p.facturesorttype),e},E=e=>n.hasNoError(),I=()=>{document.getElementById(`${d}_dummy_submit`).click();let e=document.getElementsByTagName("form")[0];return e.classList.add("js-error"),e.checkValidity()},e("onchange",(e=>{p=A(),n.render()})),e("cancel",(()=>{i.goBackOrResume($)})),e("create",(()=>{let e=A();if(I()){if(!E())return n.render();n.prepareRender(),n.POST("/account",r.createBlack(e,c)).then((e=>{let t=e;e.emailSubject,e.emailBody,r.toastSuccessSave(),i.goto(`#/admin/account/${t.uid}`,10)})).catch(n.render)}})),e("save",((e=!1)=>{let t=A();if(I()){if(!E())return n.render();n.prepareRender(),n.PUT("/account",r.createBlack(t,c)).then((t=>{r.toastSuccessSave(),e?i.goto("#/admin/accounts/",100):i.goto(`#/admin/account/${u.uid}`,10)})).catch(n.render)}})),e("drop",(()=>{u.updated=p.updated,n.prepareRender(),n.DELETE("/account",u).then((e=>{S(),i.goto("#/admin/accounts/",250)})).catch(n.render)})),e("resetPassword",(()=>{n.POST("/account/reset-password",u).then((e=>{r.toastSuccess(i18n("Password reset sent")),i.goto(`#/admin/account/${u.uid}`,10)})).catch(n.render)})),e("createInvitation",(()=>{n.POST("/account/create-invitation",u).then((e=>{r.toastSuccess(i18n("Invitation sent")),i.goto(`#/admin/account/${u.uid}`,10)})).catch(n.render)})),N=()=>(($=!r.same(m,A()))&&setTimeout((()=>{p=A(),n.render()}),10),$)}}})),System.register("src/admin/company",["_BaseApp/src/core/app","_BaseApp/src/core/router","_BaseApp/src/lib-ts/misc","_BaseApp/src/theme/theme","src/admin/lookupdata","src/permission","src/admin/layout"],(function(e,t){"use strict";var n,i,r,a,s,l,o,d,c,u,p,m,f,h,$,b,g,v,_,x,T,y,S,w,C,A,E,I,N,k,j,R,D,L,F,O;t&&t.id;return{setters:[function(e){n=e},function(e){i=e},function(e){r=e},function(e){a=e},function(e){s=e},function(e){l=e},function(e){o=e}],execute:function(){e("NS",d="App_company"),c=["created"],p={},m={},h=!1,$=!1,b=e=>`\n ${a.renderTextField(d,"name",e.name,i18n("NAME"),64,!0)}\n ${a.renderTextField(d,"features",e.features,i18n("FEATURES"),2048)}\n ${a.renderCheckboxField(d,"archive",e.archive,i18n("ARCHIVE"))}\n`,g=e=>`\n ${a.renderTextField(d,"xlstemplatespath",e.xlstemplatespath,i18n("XLSTEMPLATESPATH"),500)}\n ${a.renderTextField(d,"helpfilepath",e.helpfilepath,i18n("HELPFILEPATH"),500)}\n\n ${a.renderNumberField(d,"masselimitedefaut",e.masselimitedefaut,i18n("MASSELIMITEDEFAUT"),!0)}\n ${a.renderNumberField(d,"anneecourante",e.anneecourante,i18n("ANNEECOURANTE"),!0)}\n ${a.renderNumberField(d,"taux_tps",e.taux_tps,i18n("TAUX_TPS"))}\n ${a.renderNumberField(d,"taux_tvq",e.taux_tvq,i18n("TAUX_TVQ"))}\n\n ${a.renderNumberField(d,"massecontingentvoyagedefaut",e.massecontingentvoyagedefaut,i18n("MASSECONTINGENTVOYAGEDEFAUT"),!0)}\n ${a.renderNumberField(d,"superficiecontingenteesansdeduction",e.superficiecontingenteesansdeduction,i18n("SUPERFICIECONTINGENTEESANSDEDUCTION"))}\n ${a.renderNumberField(d,"superficiecontingenteepourcentagededuction",e.superficiecontingenteepourcentagededuction,i18n("SUPERFICIECONTINGENTEEPOURCENTAGEDEDUCTION"))}\n\n ${a.renderCheckboxField(d,"livraisonliertaux",e.livraisonliertaux,i18n("LIVRAISONLIERTAUX"))}\n ${a.renderCheckboxField(d,"utiliserlotscontingentes",e.utiliserlotscontingentes,i18n("UTILISERLOTSCONTINGENTES"))}\n\n ${a.renderTextField(d,"formicon",e.formicon,i18n("FORMICON"),500)}\n ${a.renderTextField(d,"formtext",e.formtext,i18n("FORMTEXT"),500)}\n`,v=e=>`\n ${a.renderTextField(d,"syndicatouoffice",e.syndicatouoffice,i18n("SYNDICATOUOFFICE"),500)}\n\n ${a.renderTextField(d,"syndicat_nomanglais",e.syndicat_nomanglais,i18n("SYNDICAT_NOMANGLAIS"),500)}\n ${a.renderTextField(d,"syndicat_nomfrancais",e.syndicat_nomfrancais,i18n("SYNDICAT_NOMFRANCAIS"),500)}\n\n ${a.renderTextField(d,"syndicat_rue",e.syndicat_rue,i18n("SYNDICAT_RUE"),500)}\n ${a.renderTextField(d,"syndicat_ville",e.syndicat_ville,i18n("SYNDICAT_VILLE"),500)}\n ${a.renderTextField(d,"syndicat_codepostal",e.syndicat_codepostal,i18n("SYNDICAT_CODEPOSTAL"),500)}\n ${a.renderTextField(d,"syndicat_telephone",e.syndicat_telephone,i18n("SYNDICAT_TELEPHONE"),500)}\n ${a.renderTextField(d,"syndicat_fax",e.syndicat_fax,i18n("SYNDICAT_FAX"),500)}\n`,_=e=>`\n ${a.renderTextField(d,"acombausername",e.acombausername,i18n("ACOMBAUSERNAME"),500)}\n ${a.renderTextField(d,"acombapassword",e.acombapassword,i18n("ACOMBAPASSWORD"),500)}\n ${a.renderTextField(d,"acombasocietepath",e.acombasocietepath,i18n("ACOMBASOCIETEPATH"),500)}\n ${a.renderTextField(d,"acombapath",e.acombapath,i18n("ACOMBAPATH"),500)}\n\n ${a.renderCheckboxField(d,"utiliselesychronisateurdirect",e.utiliselesychronisateurdirect,i18n("UTILISELESYCHRONISATEURDIRECT"))}\n ${a.renderTextField(d,"acombasyncropath",e.acombasyncropath,i18n("ACOMBASYNCROPATH"),500)}\n`,x=(e,t,n,i,r,s,l,o,c,u,p,m,f,h)=>`\n ${a.renderDropdownField(d,"fournisseur_planconjoint",t,i18n("FOURNISSEUR_PLANCONJOINT"))}\n ${a.renderDropdownField(d,"fournisseur_surcharge",n,i18n("FOURNISSEUR_SURCHARGE"))}\n ${a.renderDropdownField(d,"fournisseur_fond_roulement",m,i18n("FOURNISSEUR_FOND_ROULEMENT"))}\n ${a.renderDropdownField(d,"fournisseur_fond_forestier",f,i18n("FOURNISSEUR_FOND_FORESTIER"))}\n ${a.renderDropdownField(d,"fournisseur_preleve_divers",h,i18n("FOURNISSEUR_PRELEVE_DIVERS"))}\n\n ${a.renderDropdownField(d,"compte_paiements",i,i18n("COMPTE_PAIEMENTS"))}\n ${a.renderDropdownField(d,"compte_arecevoir",r,i18n("COMPTE_ARECEVOIR"))}\n ${a.renderDropdownField(d,"compte_apayer",s,i18n("COMPTE_APAYER"))}\n ${a.renderDropdownField(d,"compte_duauxproducteurs",l,i18n("COMPTE_DUAUXPRODUCTEURS"))}\n ${a.renderDropdownField(d,"compte_tpspercues",o,i18n("COMPTE_TPSPERCUES"))}\n ${a.renderDropdownField(d,"compte_tpspayees",c,i18n("COMPTE_TPSPAYEES"))}\n ${a.renderDropdownField(d,"compte_tvqpercues",u,i18n("COMPTE_TVQPERCUES"))}\n ${a.renderDropdownField(d,"compte_tvqpayees",p,i18n("COMPTE_TVQPAYEES"))}\n`,T=e=>`\n ${a.renderTextField(d,"preleves_notps",e.preleves_notps,i18n("PRELEVES_NOTPS"),500)}\n ${a.renderTextField(d,"preleves_notvq",e.preleves_notvq,i18n("PRELEVES_NOTVQ"),500)}\n\n ${a.renderTextField(d,"syndicat_notps",e.syndicat_notps,i18n("SYNDICAT_NOTPS"),500)}\n ${a.renderTextField(d,"syndicat_notvq",e.syndicat_notvq,i18n("SYNDICAT_NOTVQ"),500)}\n`,y=e=>`\n ${a.renderNumberField(d,"typepermis",e.typepermis,i18n("TYPEPERMIS"),!0)}\n\n ${a.renderTextField(d,"serveuremail",e.serveuremail,i18n("SERVEUREMAIL"),500)}\n ${a.renderTextField(d,"ccemail",e.ccemail,i18n("CCEMAIL"),500)}\n ${a.renderTextField(d,"fromemail",e.fromemail,i18n("FROMEMAIL"),500)}\n\n ${a.renderCheckboxField(d,"permisprintpreview",e.permisprintpreview,i18n("PERMISPRINTPREVIEW"))}\n ${a.renderTextField(d,"typepermis1",e.typepermis1,i18n("TYPEPERMIS1"),500)}\n ${a.renderTextField(d,"typepermis1anglais",e.typepermis1anglais,i18n("TYPEPERMIS1ANGLAIS"),500)}\n ${a.renderTextField(d,"typepermis1francais",e.typepermis1francais,i18n("TYPEPERMIS1FRANCAIS"),500)}\n ${a.renderCheckboxField(d,"afficherpermit1",e.afficherpermit1,i18n("AFFICHERPERMIT1"))}\n ${a.renderCheckboxField(d,"emailpermit1",e.emailpermit1,i18n("EMAILPERMIT1"))}\n ${a.renderCheckboxField(d,"copiepermit1",e.copiepermit1,i18n("COPIEPERMIT1"))}\n\n ${a.renderTextField(d,"typepermis2",e.typepermis2,i18n("TYPEPERMIS2"),500)}\n ${a.renderTextField(d,"typepermis2anglais",e.typepermis2anglais,i18n("TYPEPERMIS2ANGLAIS"),500)}\n ${a.renderTextField(d,"typepermis2francais",e.typepermis2francais,i18n("TYPEPERMIS2FRANCAIS"),500)}\n ${a.renderCheckboxField(d,"afficherpermit2",e.afficherpermit2,i18n("AFFICHERPERMIT2"))}\n ${a.renderCheckboxField(d,"emailpermit2",e.emailpermit2,i18n("EMAILPERMIT2"))}\n ${a.renderCheckboxField(d,"copiepermit2",e.copiepermit2,i18n("COPIEPERMIT2"))}\n\n ${a.renderTextField(d,"typepermis3",e.typepermis3,i18n("TYPEPERMIS3"),500)}\n ${a.renderTextField(d,"typepermis3anglais",e.typepermis3anglais,i18n("TYPEPERMIS3ANGLAIS"),500)}\n ${a.renderTextField(d,"typepermis3francais",e.typepermis3francais,i18n("TYPEPERMIS3FRANCAIS"),500)}\n ${a.renderCheckboxField(d,"afficherpermit3",e.afficherpermit3,i18n("AFFICHERPERMIT3"))}\n ${a.renderCheckboxField(d,"emailpermit3",e.emailpermit3,i18n("EMAILPERMIT3"))}\n ${a.renderCheckboxField(d,"copiepermit3",e.copiepermit3,i18n("COPIEPERMIT3"))}\n\n ${a.renderTextField(d,"typepermis4",e.typepermis4,i18n("TYPEPERMIS4"),500)}\n ${a.renderTextField(d,"typepermis4anglais",e.typepermis4anglais,i18n("TYPEPERMIS4ANGLAIS"),500)}\n ${a.renderTextField(d,"typepermis4francais",e.typepermis4francais,i18n("TYPEPERMIS4FRANCAIS"),500)}\n ${a.renderCheckboxField(d,"afficherpermit4",e.afficherpermit4,i18n("AFFICHERPERMIT4"))}\n ${a.renderCheckboxField(d,"emailpermit4",e.emailpermit4,i18n("EMAILPERMIT4"))}\n ${a.renderCheckboxField(d,"copiepermit4",e.copiepermit4,i18n("COPIEPERMIT4"))}\n\n ${a.renderTextField(d,"messagespecpermitanglais",e.messagespecpermitanglais,i18n("MESSAGESPECPERMITANGLAIS"),500)}\n ${a.renderTextField(d,"messagespecpermitfrancais",e.messagespecpermitfrancais,i18n("MESSAGESPECPERMITFRANCAIS"),500)}\n\n ${a.renderTextField(d,"showyearsinpermislistview",e.showyearsinpermislistview,i18n("SHOWYEARSINPERMISLISTVIEW"),500)}\n`,S=e=>`\n ${a.renderCheckboxField(d,"facturesaffichersurchargeproducteur",e.facturesaffichersurchargeproducteur,i18n("FACTURESAFFICHERSURCHARGEPRODUCTEUR"))}\n ${a.renderCheckboxField(d,"facturesafficherfraischargeurproducteur",e.facturesafficherfraischargeurproducteur,i18n("FACTURESAFFICHERFRAISCHARGEURPRODUCTEUR"))}\n ${a.renderCheckboxField(d,"facturesafficherfraischargeurtransporteur",e.facturesafficherfraischargeurtransporteur,i18n("FACTURESAFFICHERFRAISCHARGEURTRANSPORTEUR"))}\n ${a.renderCheckboxField(d,"facturesafficherfraisautresproducteur",e.facturesafficherfraisautresproducteur,i18n("FACTURESAFFICHERFRAISAUTRESPRODUCTEUR"))}\n\n ${a.renderCheckboxField(d,"facturesafficherfraisautrestransporteur",e.facturesafficherfraisautrestransporteur,i18n("FACTURESAFFICHERFRAISAUTRESTRANSPORTEUR"))}\n ${a.renderCheckboxField(d,"facturesafficherfraiscompensationdedeplacement",e.facturesafficherfraiscompensationdedeplacement,i18n("FACTURESAFFICHERFRAISCOMPENSATIONDEDEPLACEMENT"))}\n ${a.renderCheckboxField(d,"facturesafficherfraisautresrevenustransporteur",e.facturesafficherfraisautresrevenustransporteur,i18n("FACTURESAFFICHERFRAISAUTRESREVENUSTRANSPORTEUR"))}\n ${a.renderCheckboxField(d,"facturesafficherfraisautresrevenusproducteur",e.facturesafficherfraisautresrevenusproducteur,i18n("FACTURESAFFICHERFRAISAUTRESREVENUSPRODUCTEUR"))}\n\n ${a.renderTextField(d,"logopath",e.logopath,i18n("LOGOPATH"),500)}\n\n ${a.renderCheckboxField(d,"utiliserlesnomsdemachinedanslenomdeprinter",e.utiliserlesnomsdemachinedanslenomdeprinter,i18n("UTILISERLESNOMSDEMACHINEDANSLENOMDEPRINTER"))}\n\n ${a.renderTextareaField(d,"message_autorisationdeslivraisons",e.message_autorisationdeslivraisons,i18n("MESSAGE_AUTORISATIONDESLIVRAISONS"),500,!1,null,10)}\n ${a.renderTextareaField(d,"message_demandecontingentement",e.message_demandecontingentement,i18n("MESSAGE_DEMANDECONTINGENTEMENT"),500,!1,null,10)}\n`,w=e=>`\n ${a.renderCheckboxField(d,"takeacombabackup",e.takeacombabackup,i18n("TAKEACOMBABACKUP"))}\n ${a.renderCheckboxField(d,"takesqlbackup",e.takesqlbackup,i18n("TAKESQLBACKUP"))}\n ${a.renderTextField(d,"nomdb",e.nomdb,i18n("NOMDB"),500)}\n ${a.renderNumberField(d,"timeoutsql",e.timeoutsql,i18n("TIMEOUTSQL"),!0)}\n ${a.renderNumberField(d,"tempsentrelesbackupsautomatiques",e.tempsentrelesbackupsautomatiques,i18n("TEMPSENTRELESBACKUPSAUTOMATIQUES"))}\n`,C=e=>`\n ${a.renderTextField(d,"caneditundeliveredpermits",e.caneditundeliveredpermits,i18n("CANEDITUNDELIVEREDPERMITS"),500)}\n\n ${a.renderTextField(d,"adminpassword",e.adminpassword,i18n("ADMINPASSWORD"),500)}\n ${a.renderTextField(d,"deletefichepassword",e.deletefichepassword,i18n("DELETEFICHEPASSWORD"),500)}\n`,A=e=>`\n ${a.renderTextField(d,"imprimantedepermis",e.imprimantedepermis,i18n("IMPRIMANTEDEPERMIS"),500)}\n ${a.renderNumberField(d,"permisprintermarginbottom",e.permisprintermarginbottom,i18n("PERMISPRINTERMARGINBOTTOM"))}\n ${a.renderNumberField(d,"permisprintermarginleft",e.permisprintermarginleft,i18n("PERMISPRINTERMARGINLEFT"))}\n ${a.renderNumberField(d,"permisprintermarginright",e.permisprintermarginright,i18n("PERMISPRINTERMARGINRIGHT"))}\n ${a.renderNumberField(d,"permisprintermargintop",e.permisprintermargintop,i18n("PERMISPRINTERMARGINTOP"))}\n\n ${a.renderTextField(d,"imprimanteautresrapports",e.imprimanteautresrapports,i18n("IMPRIMANTEAUTRESRAPPORTS"),500)}\n ${a.renderNumberField(d,"autresraportsprintermarginbottom",e.autresraportsprintermarginbottom,i18n("AUTRESRAPORTSPRINTERMARGINBOTTOM"))}\n ${a.renderNumberField(d,"autresraportsprintermarginleft",e.autresraportsprintermarginleft,i18n("AUTRESRAPORTSPRINTERMARGINLEFT"))}\n ${a.renderNumberField(d,"autresraportsprintermarginright",e.autresraportsprintermarginright,i18n("AUTRESRAPORTSPRINTERMARGINRIGHT"))}\n ${a.renderNumberField(d,"autresraportsprintermargintop",e.autresraportsprintermargintop,i18n("AUTRESRAPORTSPRINTERMARGINTOP"))}\n\n ${a.renderTextField(d,"excellanguage",e.excellanguage,i18n("EXCELLANGUAGE"),500)}\n\n ${a.renderTextField(d,"acrobatpath",e.acrobatpath,i18n("ACROBATPATH"),500)}\n\n ${a.renderTextField(d,"cletriclientnom",e.cletriclientnom,i18n("CLETRICLIENTNOM"),500)}\n`,E=e=>`\n ${a.renderCheckboxField(d,"facturesafficherfraisautrechargepourtransporteur",e.facturesafficherfraisautrechargepourtransporteur,i18n("FACTURESAFFICHERFRAISAUTRECHARGEPOURTRANSPORTEUR"))}\n ${a.renderNumberField(d,"fournisseurpointerid",e.fournisseurpointerid,i18n("FOURNISSEURPOINTERID"),!0)}\n ${a.renderTextField(d,"gpversion",e.gpversion,i18n("GPVERSION"),500)}\n ${a.renderTextField(d,"logfile",e.logfile,i18n("LOGFILE"),500)}\n ${a.renderTextField(d,"messageimpressionsdefactures",e.messageimpressionsdefactures,i18n("MESSAGEIMPRESSIONSDEFACTURES"),500)}\n ${a.renderTextField(d,"messagelivraisonnonconforme",e.messagelivraisonnonconforme,i18n("MESSAGELIVRAISONNONCONFORME"),500)}\n ${a.renderTextField(d,"syndicat_nom",e.syndicat_nom,i18n("SYNDICAT_NOM"),500)}\n ${a.renderTextField(d,"updateotherdatabase",e.updateotherdatabase,i18n("UPDATEOTHERDATABASE"),500)}\n`,I=(e,t,n,i,r,s,l,o,d,c,u,p,m,f)=>`\n<div class="js-float-menu">\n <ul>\n <li>${a.float_menu_button("Compte")}</li>\n <li>${a.float_menu_button("Paramètres système")}</li>\n <li>${a.float_menu_button("Personnalisation")}</li>\n <li>${a.float_menu_button("Acomba")}</li>\n <li>${a.float_menu_button("Comptes/Fournisseurs")}</li>\n <li>${a.float_menu_button("Taxe")}</li>\n <li>${a.float_menu_button("Permis")}</li>\n <li>${a.float_menu_button("Paramètres imprimantes")}</li>\n <li>${a.float_menu_button("Backup")}</li>\n <li>${a.float_menu_button("Sécurité")}</li>\n <li>${a.float_menu_button("Profil par défaut")}</li>\n <li>${a.float_menu_button("TODO")}</li>\n </ul>\n</div>\n\n<div class="columns">\n <div class="column is-8 is-offset-3">\n ${a.wrapFieldset("Compte",b(e))}\n ${a.wrapFieldset("Paramètres système",g(e))}\n ${a.wrapFieldset("Personnalisation",v(e))}\n ${a.wrapFieldset("Acomba",_(e))}\n ${a.wrapFieldset("Comptes/Fournisseurs",x(0,t,n,i,r,s,l,o,d,c,u,p,m,f))}\n ${a.wrapFieldset("Taxe",T(e))}\n ${a.wrapFieldset("Permis",y(e))}\n ${a.wrapFieldset("Paramètres imprimantes",S(e))}\n ${a.wrapFieldset("Backup",w(e))}\n ${a.wrapFieldset("Sécurité",C(e))}\n ${a.wrapFieldset("Profil par défaut",A(e))}\n ${a.wrapFieldset("TODO",E(e))}\n </div>\n</div>\n\n ${a.renderBlame(e,h)}\n`,N=(e,t,n,i,r)=>{let s=h,l=!s,c=!s,u=!h,p=[];p.push(a.buttonCancel(d)),s&&p.push(a.buttonInsert(d)),l&&p.push(a.buttonDelete(d)),c&&p.push(a.buttonAddNew(d,"#/admin/company/new")),u&&p.push(a.buttonUpdate(d));let m=a.renderButtons(p),$=o.buildTitle(f,h?i18n("New company"):i18n("company Details")),b=o.buildSubtitle(f,i18n("company subtitle"));return`\n<form onsubmit="return false;" >\n<input type="submit" style="display:none;" id="${d}_dummy_submit">\n\n<div class="js-fixed-heading">\n<div class="js-head">\n <div class="content js-uc-heading js-flex-space">\n <div>\n <div class="title"><i class="${o.icon}"></i> <span>${$}</span></div>\n <div class="subtitle">${b}</div>\n </div>\n <div>\n ${a.wrapContent("js-uc-actions",m)}\n ${a.renderBlame(e,h)}\n </div>\n </div>\n ${a.wrapContent("js-uc-tabs",n)}\n</div>\n<div class="js-body">\n ${a.wrapContent("js-uc-notification",r)}\n ${a.wrapContent("js-uc-notification",i)}\n ${a.wrapContent("js-uc-details",t)}\n</div>\n</div>\n\n${a.renderModalDelete(`modalDelete_${d}`,`${d}.drop()`)}\n\n</form>\n`},k=()=>$?n.dirtyTemplate(d,r.changes(m,p)):"",e("fetchState",j=e=>(h=isNaN(e),$=!1,i.registerDirtyExit(O),n.GET(`/company/${h?"new":e}`).then((t=>{p=t.item,m=r.clone(p),f=t.xtra,u={cie:e}})).then(s.fetch_autreFournisseur()).then(s.fetch_compte()))),e("fetch",(e=>{let t=l.getCie(e);n.prepareRender(d,i18n("company")),j(t).then(n.render).catch(n.render)})),e("render",(()=>{if(!R())return"";if(n.fatalError())return n.fatalErrorTemplate();if(null==p||0==Object.keys(p).length)return n.warningTemplate()||n.unexpectedTemplate();let e=l.getCurrentYear(),t=s.get_autreFournisseur(e),i=s.get_compte(e),r=a.renderOptions(t,p.fournisseur_planconjoint,!0),d=a.renderOptions(t,p.fournisseur_surcharge,!0),c=a.renderOptions(i,p.compte_paiements,!0),u=a.renderOptions(i,p.compte_arecevoir,!0),m=a.renderOptions(i,p.compte_apayer,!0),$=a.renderOptions(i,p.compte_duauxproducteurs,!0),b=a.renderOptions(i,p.compte_tpspercues,!0),g=a.renderOptions(i,p.compte_tpspayees,!0),v=a.renderOptions(i,p.compte_tvqpercues,!0),_=a.renderOptions(i,p.compte_tvqpayees,!0),x=a.renderOptions(t,p.fournisseur_fond_roulement,!0),T=a.renderOptions(t,p.fournisseur_fond_forestier,!0),y=a.renderOptions(t,p.fournisseur_preleve_divers,!0);const S=I(p,r,d,c,u,m,$,b,g,v,_,x,T,y),w=o.tabTemplate(p.cie,f,h),C=k(),A=n.warningTemplate();return N(p,S,w,A,C)})),e("postRender",(()=>{R()&&n.setPageTitle(h?i18n("New company"):f.title)})),e("inContext",R=()=>n.inContext(d)),D=()=>{let e=r.clone(p);return e.name=r.fromInputText(`${d}_name`,p.name),e.features=r.fromInputTextNullable(`${d}_features`,p.features),e.archive=r.fromInputCheckbox(`${d}_archive`,p.archive),e.acombapassword=r.fromInputTextNullable(`${d}_acombapassword`,p.acombapassword),e.acombapath=r.fromInputTextNullable(`${d}_acombapath`,p.acombapath),e.acombasocietepath=r.fromInputTextNullable(`${d}_acombasocietepath`,p.acombasocietepath),e.acombasyncropath=r.fromInputTextNullable(`${d}_acombasyncropath`,p.acombasyncropath),e.acombausername=r.fromInputTextNullable(`${d}_acombausername`,p.acombausername),e.acrobatpath=r.fromInputTextNullable(`${d}_acrobatpath`,p.acrobatpath),e.adminpassword=r.fromInputTextNullable(`${d}_adminpassword`,p.adminpassword),e.afficherpermit1=r.fromInputCheckbox(`${d}_afficherpermit1`,p.afficherpermit1),e.afficherpermit2=r.fromInputCheckbox(`${d}_afficherpermit2`,p.afficherpermit2),e.afficherpermit3=r.fromInputCheckbox(`${d}_afficherpermit3`,p.afficherpermit3),e.afficherpermit4=r.fromInputCheckbox(`${d}_afficherpermit4`,p.afficherpermit4),e.anneecourante=r.fromInputNumber(`${d}_anneecourante`,p.anneecourante),e.autresraportsprintermarginbottom=r.fromInputNumberNullable(`${d}_autresraportsprintermarginbottom`,p.autresraportsprintermarginbottom),e.autresraportsprintermarginleft=r.fromInputNumberNullable(`${d}_autresraportsprintermarginleft`,p.autresraportsprintermarginleft),e.autresraportsprintermarginright=r.fromInputNumberNullable(`${d}_autresraportsprintermarginright`,p.autresraportsprintermarginright),e.autresraportsprintermargintop=r.fromInputNumberNullable(`${d}_autresraportsprintermargintop`,p.autresraportsprintermargintop),e.caneditundeliveredpermits=r.fromInputTextNullable(`${d}_caneditundeliveredpermits`,p.caneditundeliveredpermits),e.ccemail=r.fromInputTextNullable(`${d}_ccemail`,p.ccemail),e.cletriclientnom=r.fromInputTextNullable(`${d}_cletriclientnom`,p.cletriclientnom),e.copiepermit1=r.fromInputCheckbox(`${d}_copiepermit1`,p.copiepermit1),e.copiepermit2=r.fromInputCheckbox(`${d}_copiepermit2`,p.copiepermit2),e.copiepermit3=r.fromInputCheckbox(`${d}_copiepermit3`,p.copiepermit3),e.copiepermit4=r.fromInputCheckbox(`${d}_copiepermit4`,p.copiepermit4),e.deletefichepassword=r.fromInputTextNullable(`${d}_deletefichepassword`,p.deletefichepassword),e.emailpermit1=r.fromInputCheckbox(`${d}_emailpermit1`,p.emailpermit1),e.emailpermit2=r.fromInputCheckbox(`${d}_emailpermit2`,p.emailpermit2),e.emailpermit3=r.fromInputCheckbox(`${d}_emailpermit3`,p.emailpermit3),e.emailpermit4=r.fromInputCheckbox(`${d}_emailpermit4`,p.emailpermit4),e.excellanguage=r.fromInputTextNullable(`${d}_excellanguage`,p.excellanguage),e.facturesafficherfraisautrechargepourtransporteur=r.fromInputCheckbox(`${d}_facturesafficherfraisautrechargepourtransporteur`,p.facturesafficherfraisautrechargepourtransporteur),e.facturesafficherfraisautresproducteur=r.fromInputCheckbox(`${d}_facturesafficherfraisautresproducteur`,p.facturesafficherfraisautresproducteur),e.facturesafficherfraisautresrevenusproducteur=r.fromInputCheckbox(`${d}_facturesafficherfraisautresrevenusproducteur`,p.facturesafficherfraisautresrevenusproducteur),e.facturesafficherfraisautresrevenustransporteur=r.fromInputCheckbox(`${d}_facturesafficherfraisautresrevenustransporteur`,p.facturesafficherfraisautresrevenustransporteur),e.facturesafficherfraisautrestransporteur=r.fromInputCheckbox(`${d}_facturesafficherfraisautrestransporteur`,p.facturesafficherfraisautrestransporteur),e.facturesafficherfraischargeurproducteur=r.fromInputCheckbox(`${d}_facturesafficherfraischargeurproducteur`,p.facturesafficherfraischargeurproducteur),e.facturesafficherfraischargeurtransporteur=r.fromInputCheckbox(`${d}_facturesafficherfraischargeurtransporteur`,p.facturesafficherfraischargeurtransporteur),e.facturesafficherfraiscompensationdedeplacement=r.fromInputCheckbox(`${d}_facturesafficherfraiscompensationdedeplacement`,p.facturesafficherfraiscompensationdedeplacement),e.facturesaffichersurchargeproducteur=r.fromInputCheckbox(`${d}_facturesaffichersurchargeproducteur`,p.facturesaffichersurchargeproducteur),e.formicon=r.fromInputTextNullable(`${d}_formicon`,p.formicon),e.formtext=r.fromInputTextNullable(`${d}_formtext`,p.formtext),e.fournisseurpointerid=r.fromInputNumber(`${d}_fournisseurpointerid`,p.fournisseurpointerid),e.fromemail=r.fromInputTextNullable(`${d}_fromemail`,p.fromemail),e.gpversion=r.fromInputTextNullable(`${d}_gpversion`,p.gpversion),e.helpfilepath=r.fromInputTextNullable(`${d}_helpfilepath`,p.helpfilepath),e.imprimanteautresrapports=r.fromInputTextNullable(`${d}_imprimanteautresrapports`,p.imprimanteautresrapports),e.imprimantedepermis=r.fromInputTextNullable(`${d}_imprimantedepermis`,p.imprimantedepermis),e.livraisonliertaux=r.fromInputCheckbox(`${d}_livraisonliertaux`,p.livraisonliertaux),e.logfile=r.fromInputTextNullable(`${d}_logfile`,p.logfile),e.logopath=r.fromInputTextNullable(`${d}_logopath`,p.logopath),e.massecontingentvoyagedefaut=r.fromInputNumber(`${d}_massecontingentvoyagedefaut`,p.massecontingentvoyagedefaut),e.masselimitedefaut=r.fromInputNumber(`${d}_masselimitedefaut`,p.masselimitedefaut),e.message_autorisationdeslivraisons=r.fromInputTextNullable(`${d}_message_autorisationdeslivraisons`,p.message_autorisationdeslivraisons),e.message_demandecontingentement=r.fromInputTextNullable(`${d}_message_demandecontingentement`,p.message_demandecontingentement),e.messageimpressionsdefactures=r.fromInputTextNullable(`${d}_messageimpressionsdefactures`,p.messageimpressionsdefactures),e.messagelivraisonnonconforme=r.fromInputTextNullable(`${d}_messagelivraisonnonconforme`,p.messagelivraisonnonconforme),e.messagespecpermitanglais=r.fromInputTextNullable(`${d}_messagespecpermitanglais`,p.messagespecpermitanglais),e.messagespecpermitfrancais=r.fromInputTextNullable(`${d}_messagespecpermitfrancais`,p.messagespecpermitfrancais),e.nomdb=r.fromInputTextNullable(`${d}_nomdb`,p.nomdb),e.permisprintermarginbottom=r.fromInputNumberNullable(`${d}_permisprintermarginbottom`,p.permisprintermarginbottom),e.permisprintermarginleft=r.fromInputNumberNullable(`${d}_permisprintermarginleft`,p.permisprintermarginleft),e.permisprintermarginright=r.fromInputNumberNullable(`${d}_permisprintermarginright`,p.permisprintermarginright),e.permisprintermargintop=r.fromInputNumberNullable(`${d}_permisprintermargintop`,p.permisprintermargintop),e.permisprintpreview=r.fromInputCheckbox(`${d}_permisprintpreview`,p.permisprintpreview),e.preleves_notps=r.fromInputTextNullable(`${d}_preleves_notps`,p.preleves_notps),e.preleves_notvq=r.fromInputTextNullable(`${d}_preleves_notvq`,p.preleves_notvq),e.serveuremail=r.fromInputTextNullable(`${d}_serveuremail`,p.serveuremail),e.showyearsinpermislistview=r.fromInputTextNullable(`${d}_showyearsinpermislistview`,p.showyearsinpermislistview),e.superficiecontingenteepourcentagededuction=r.fromInputNumberNullable(`${d}_superficiecontingenteepourcentagededuction`,p.superficiecontingenteepourcentagededuction),e.superficiecontingenteesansdeduction=r.fromInputNumberNullable(`${d}_superficiecontingenteesansdeduction`,p.superficiecontingenteesansdeduction),e.syndicat_codepostal=r.fromInputTextNullable(`${d}_syndicat_codepostal`,p.syndicat_codepostal),e.syndicat_fax=r.fromInputTextNullable(`${d}_syndicat_fax`,p.syndicat_fax),e.syndicat_nom=r.fromInputTextNullable(`${d}_syndicat_nom`,p.syndicat_nom),e.syndicat_nomanglais=r.fromInputTextNullable(`${d}_syndicat_nomanglais`,p.syndicat_nomanglais),e.syndicat_nomfrancais=r.fromInputTextNullable(`${d}_syndicat_nomfrancais`,p.syndicat_nomfrancais),e.syndicat_notps=r.fromInputTextNullable(`${d}_syndicat_notps`,p.syndicat_notps),e.syndicat_notvq=r.fromInputTextNullable(`${d}_syndicat_notvq`,p.syndicat_notvq),e.syndicat_rue=r.fromInputTextNullable(`${d}_syndicat_rue`,p.syndicat_rue),e.syndicat_telephone=r.fromInputTextNullable(`${d}_syndicat_telephone`,p.syndicat_telephone),e.syndicat_ville=r.fromInputTextNullable(`${d}_syndicat_ville`,p.syndicat_ville),e.syndicatouoffice=r.fromInputTextNullable(`${d}_syndicatouoffice`,p.syndicatouoffice),e.takeacombabackup=r.fromInputCheckbox(`${d}_takeacombabackup`,p.takeacombabackup),e.takesqlbackup=r.fromInputCheckbox(`${d}_takesqlbackup`,p.takesqlbackup),e.tempsentrelesbackupsautomatiques=r.fromInputNumberNullable(`${d}_tempsentrelesbackupsautomatiques`,p.tempsentrelesbackupsautomatiques),e.timeoutsql=r.fromInputNumber(`${d}_timeoutsql`,p.timeoutsql),e.typepermis=r.fromInputNumber(`${d}_typepermis`,p.typepermis),e.typepermis1=r.fromInputTextNullable(`${d}_typepermis1`,p.typepermis1),e.typepermis1anglais=r.fromInputTextNullable(`${d}_typepermis1anglais`,p.typepermis1anglais),e.typepermis1francais=r.fromInputTextNullable(`${d}_typepermis1francais`,p.typepermis1francais),e.typepermis2=r.fromInputTextNullable(`${d}_typepermis2`,p.typepermis2),e.typepermis2anglais=r.fromInputTextNullable(`${d}_typepermis2anglais`,p.typepermis2anglais),e.typepermis2francais=r.fromInputTextNullable(`${d}_typepermis2francais`,p.typepermis2francais),e.typepermis3=r.fromInputTextNullable(`${d}_typepermis3`,p.typepermis3),e.typepermis3anglais=r.fromInputTextNullable(`${d}_typepermis3anglais`,p.typepermis3anglais),e.typepermis3francais=r.fromInputTextNullable(`${d}_typepermis3francais`,p.typepermis3francais),e.typepermis4=r.fromInputTextNullable(`${d}_typepermis4`,p.typepermis4),e.typepermis4anglais=r.fromInputTextNullable(`${d}_typepermis4anglais`,p.typepermis4anglais),e.typepermis4francais=r.fromInputTextNullable(`${d}_typepermis4francais`,p.typepermis4francais),e.updateotherdatabase=r.fromInputTextNullable(`${d}_updateotherdatabase`,p.updateotherdatabase),e.utiliselesychronisateurdirect=r.fromInputCheckbox(`${d}_utiliselesychronisateurdirect`,p.utiliselesychronisateurdirect),e.utiliserlesnomsdemachinedanslenomdeprinter=r.fromInputCheckbox(`${d}_utiliserlesnomsdemachinedanslenomdeprinter`,p.utiliserlesnomsdemachinedanslenomdeprinter),e.utiliserlotscontingentes=r.fromInputCheckbox(`${d}_utiliserlotscontingentes`,p.utiliserlotscontingentes),e.xlstemplatespath=r.fromInputTextNullable(`${d}_xlstemplatespath`,p.xlstemplatespath),e.fournisseur_planconjoint=r.fromSelectText(`${d}_fournisseur_planconjoint`,p.fournisseur_planconjoint),e.fournisseur_surcharge=r.fromSelectText(`${d}_fournisseur_surcharge`,p.fournisseur_surcharge),e.compte_paiements=r.fromSelectNumber(`${d}_compte_paiements`,p.compte_paiements),e.compte_arecevoir=r.fromSelectNumber(`${d}_compte_arecevoir`,p.compte_arecevoir),e.compte_apayer=r.fromSelectNumber(`${d}_compte_apayer`,p.compte_apayer),e.compte_duauxproducteurs=r.fromSelectNumber(`${d}_compte_duauxproducteurs`,p.compte_duauxproducteurs),e.compte_tpspercues=r.fromSelectNumber(`${d}_compte_tpspercues`,p.compte_tpspercues),e.compte_tpspayees=r.fromSelectNumber(`${d}_compte_tpspayees`,p.compte_tpspayees),e.compte_tvqpercues=r.fromSelectNumber(`${d}_compte_tvqpercues`,p.compte_tvqpercues),e.compte_tvqpayees=r.fromSelectNumber(`${d}_compte_tvqpayees`,p.compte_tvqpayees),e.taux_tps=r.fromInputNumberNullable(`${d}_taux_tps`,p.taux_tps),e.taux_tvq=r.fromInputNumberNullable(`${d}_taux_tvq`,p.taux_tvq),e.fournisseur_fond_roulement=r.fromSelectText(`${d}_fournisseur_fond_roulement`,p.fournisseur_fond_roulement),e.fournisseur_fond_forestier=r.fromSelectText(`${d}_fournisseur_fond_forestier`,p.fournisseur_fond_forestier),e.fournisseur_preleve_divers=r.fromSelectText(`${d}_fournisseur_preleve_divers`,p.fournisseur_preleve_divers),e},L=e=>n.hasNoError(),F=()=>{document.getElementById(`${d}_dummy_submit`).click();let e=document.getElementsByTagName("form")[0];return e.classList.add("js-error"),e.checkValidity()},e("onchange",(e=>{p=D(),n.render()})),e("cancel",(()=>{i.goBackOrResume($)})),e("create",(()=>{let e=D();if(F()){if(!L())return n.render();n.prepareRender(),n.POST("/company",r.createBlack(e,c)).then((e=>{let t=e;r.toastSuccessSave(),i.goto(`#/admin/company/${t.cie}`,10)})).catch(n.render)}})),e("save",((e=!1)=>{let t=D();if(F()){if(!L())return n.render();n.prepareRender(),n.PUT("/company",r.createBlack(t,c)).then((t=>{r.toastSuccessSave(),e?i.goto("#/admin/companys/",100):i.goto(`#/admin/company/${u.cie}`,10)})).catch(n.render)}})),e("drop",(()=>{u.updated=p.updated,n.prepareRender(),n.DELETE("/company",u).then((e=>{i.goto("#/admin/companys/",250)})).catch(n.render)})),O=()=>(($=!r.same(m,D()))&&setTimeout((()=>{p=D(),n.render()}),10),$)}}})),System.register("src/admin/lookups",["_BaseApp/src/core/app","_BaseApp/src/core/router","src/permission","_BaseApp/src/lib-ts/misc","_BaseApp/src/theme/theme","_BaseApp/src/theme/pager","_BaseApp/src/theme/calendar","src/admin/lookupdata","src/admin/layout"],(function(e,t){"use strict";var n,i,r,a,s,l,o,d,c,u,p,m,f,h,$,b,g,v,_,x,T,y,S,w,C,A,E,I,N,k,j,R,D,L;t&&t.id;return{setters:[function(e){n=e},function(e){i=e},function(e){r=e},function(e){a=e},function(e){s=e},function(e){l=e},function(e){o=e},function(e){d=e},function(e){c=e}],execute:function(){e("NS",u="App_lookups"),"lookups_table",p=["_editing","_deleting","_isNew","totalcount","cie_text","groupe_text","parentgroupe_text","created","by"],f={list:[],pager:{pageNo:1,pageSize:n.getPageState(u,"pageSize",20),sortColumn:"GROUPE_TEXT",sortDirection:"ASC",filter:{}}},h={},b=!1,g=!1,v=(e,t)=>{let n=[];return n.push(s.renderDropdownFilter(u,"groupe",e,i18n("GROUPE"))),n.push(s.renderDropdownFilter(u,"parentgroupe",t,i18n("PARENTGROUPE"))),n.join("")},_=(e,t,n,i)=>{let r=e.id,a='<td class="js-td-33">&nbsp;</td>';e._editing&&(a=`<td onclick="${u}.save()" class="js-td-33" title="Click to confirm"><i class="fa fa-check"></i></td>`),e._deleting&&(a=`<td onclick="${u}.drop()" class="js-td-33" title="Click to confirm"><i class="fa fa-check"></i></td>`),e._isNew&&(a=`<td onclick="${u}.create()" class="js-td-33" title="Click to confirm"><i class="fa fa-check"></i></td>`);let s=e._editing||e._deleting||e._isNew,l=!s,o=null!=n||null!=t&&r!=t||b&&!e._isNew||!1,d=[];return(e._editing||e._isNew)&&d.push("js-not-same"),e._deleting&&d.push("js-strikeout"),e._isNew&&d.push("js-new"),o&&d.push("js-readonly"),`\n<tr data-id="${r}" class="${d.join(" ")}" style="cursor: pointer;">\n <td class="js-index">${i}</td>\n\n${l?`<td onclick="${u}.selectfordrop(${r})" class="has-text-danger js-td-33 js-drop" title="Click to mark for deletion"><i class='fas fa-times'></i></td>`:""}\n${s?`<td onclick="${u}.undo()" class="has-text-primary js-td-33" title="Click to undo"><i class='fa fa-undo'></i></td>`:""}\n${a}\n\n</tr>`},x=(e,t,n,i,r)=>{let l=e.id,o=null!=n||null!=t&&l!=t||b&&!e._isNew||!1,d=[];return(e._editing||e._isNew)&&d.push("js-not-same"),e._deleting&&d.push("js-strikeout"),e._isNew&&d.push("js-new"),o&&d.push("js-readonly"),`\n<tr data-id="${l}" class="${d.join(" ")}" style="cursor: pointer;">\n${o?`\n <td><div class="js-truncate" style="width:100px;">${a.toStaticText(e.groupe_text)}</div></td>\n <td><div class="js-truncate" style="width:100px;">${a.toStaticText(e.parentgroupe_text)}</div></td>\n <td><div class="js-truncate" style="width:100px;">${a.toStaticText(e.code)}</div></td>\n <td><div class="js-truncate" style="width:100px;">${a.toStaticText(e.description)}</div></td>\n <td><div class="js-truncate" style="width:100px;">${a.toStaticText(e.value1)}</div></td>\n <td><div class="js-truncate" style="width:100px;">${a.toStaticText(e.value2)}</div></td>\n <td><div class="js-truncate" style="width:100px;">${a.toStaticText(e.value3)}</div></td>\n <td><div class="js-number">${a.toStaticNumber(e.started)}</div></td>\n <td><div class="js-number">${a.toStaticNumber(e.ended)}</div></td>\n <td><div class="js-number">${a.toStaticNumber(e.sortorder)}</div></td>\n`:`\n <td class="js-inline-select">${s.renderDropdownInline(u,`groupe_${l}`,i,!0)}</td>\n <td class="js-inline-select">${s.renderDropdownInline(u,`parentgroupe_${l}`,r)}</td>\n <td class="js-inline-input">${s.renderTextInline(u,`code_${l}`,e.code,12)}</td>\n <td class="js-inline-input">${s.renderTextInline(u,`description_${l}`,e.description,50,!0)}</td>\n <td class="js-inline-input">${s.renderTextInline(u,`value1_${l}`,e.value1,50)}</td>\n <td class="js-inline-input">${s.renderTextInline(u,`value2_${l}`,e.value2,50)}</td>\n <td class="js-inline-input">${s.renderTextInline(u,`value3_${l}`,e.value3,1024)}</td>\n <td class="js-inline-input">${s.renderNumberInline(u,`started_${l}`,e.started,!0)}</td>\n <td class="js-inline-input">${s.renderNumberInline(u,`ended_${l}`,e.ended)}</td>\n <td class="js-inline-input">${s.renderNumberInline(u,`sortorder_${l}`,e.sortorder)}</td>\n`}\n</tr>`},T=(e,t,n)=>{let i=null!=n||null!=t||b;return i=i||!1,`\n<style>.js-td-33 { width: 33px; }</style>\n<div>\n<table class="table is-hoverable js-inline" style="width: 10px; table-layout: fixed;">\n <thead>\n <tr>\n <th style="width:99px" colspan="3">&nbsp;</th>\n </tr>\n </thead>\n <tbody>\n ${e}\n <tr class="js-insert-row ${i?"js-noclick":""}">\n <td class="js-index js-td-33">*</td>\n <td class="has-text-primary js-td-33 js-add" onclick="${u}.addNew()" title="Click to add a new row"><i class="fas fa-plus"></i></td>\n <td></td>\n </tr>\n </tbody>\n</table>\n</div>\n`},y=(e,t)=>`\n<div id="lookups_table" class="table-container">\n<table class="table is-hoverable js-inline" style="width: 100px; table-layout: fixed;">\n <thead>\n <tr>\n ${l.sortableHeaderLink(t,u,i18n("GROUPE"),"groupe_text","ASC","width:100px")}\n ${l.sortableHeaderLink(t,u,i18n("PARENTGROUPE"),"parentgroupe_text","ASC","width:100px")}\n ${l.sortableHeaderLink(t,u,i18n("CODE"),"code","ASC","width:100px")}\n ${l.sortableHeaderLink(t,u,i18n("DESCRIPTION"),"description","ASC","width:100px")}\n ${l.sortableHeaderLink(t,u,i18n("VALUE1"),"value1","ASC","width:100px")}\n ${l.sortableHeaderLink(t,u,i18n("VALUE2"),"value2","ASC","width:100px")}\n ${l.sortableHeaderLink(t,u,i18n("VALUE3"),"value3","ASC","width:100px")}\n ${l.sortableHeaderLink(t,u,i18n("STARTED"),"started","ASC","width:100px")}\n ${l.sortableHeaderLink(t,u,i18n("ENDED"),"ended","ASC","width:100px")}\n ${l.sortableHeaderLink(t,u,i18n("SORTORDER"),"sortorder","ASC","width:100px")}\n </tr>\n </thead>\n <tbody>\n ${e}\n <tr class="js-insert-row">\n <td colspan="14">&nbsp;</td>\n </tr>\n </tbody>\n</table>\n</div>\n`,S=(e,t,n,i,r,a,l)=>{let o=s.renderButtons([]),d=c.buildTitle(e,i18n("AAA: AAA")),p=c.buildSubtitle(e,i18n("List of Lookups")),m=`<div style="display: flex;">\n <div>${n}</div>\n <div style="width:calc(100% - 99px)">${i}</div>\n</div>`;return`\n<form onsubmit="return false;">\n<input type="submit" style="display:none;" id="${u}_dummy_submit">\n\n<div class="js-fixed-heading">\n<div class="js-head">\n <div class="content js-uc-heading js-flex-space">\n <div>\n <div class="title"><i class="${c.icon}"></i> <span>${d}</span></div>\n <div class="subtitle">${p}</div>\n </div>\n <div>\n ${s.wrapContent("js-uc-actions",o)}\n </div>\n </div>\n ${s.wrapContent("js-uc-tabs",r)}\n</div>\n<div class="js-body">\n ${s.wrapContent("js-uc-notification",l)}\n ${s.wrapContent("js-uc-notification",a)}\n ${s.wrapContent("js-uc-pager",t)}\n ${s.wrapContent("js-uc-list",m)}\n</div>\n</div>\n\n</form>\n`},w=()=>g?n.dirtyTemplate(u,null):"",e("fetchState",C=e=>(b=!1,g=!1,i.registerDirtyExit(j),f.pager.filter.cie=e,n.POST(`/lookup/search/${e}/company`,f.pager).then((t=>{f=t,h=a.clone(f),m={cie:e,id:void 0},$=t.xtra})).then(d.fetch_editLut()))),e("fetch",(e=>{let t=r.getCie(e);n.prepareRender(u,i18n("lookup")),c.prepareMenu(),C(t).then(n.render).catch(n.render)})),A=()=>{n.prepareRender(u,i18n("lookup")),R(),n.POST(`/lookup/search/${m.cie}/company`,f.pager).then((e=>{f=e,h=a.clone(f)})).then(n.render).catch(n.render)},e("render",(()=>{if(!E())return"";if(n.fatalError())return n.fatalErrorTemplate();if(null==f||null==f.list||f.list instanceof Array==0)return n.warningTemplate()||n.unexpectedTemplate();let e,t;f.list.forEach(((n,i)=>{let r=h.list[i];n._editing=!a.same(n,r),n._editing&&(e=n.id),n._deleting&&(t=n.id)}));let i=r.getCurrentYear(),o=d.get_editLut(i),p=d.get_editLut(i);const g=f.list.reduce(((n,i,r)=>{let a=l.rowNumber(f.pager,r);return n+_(i,e,t,a)}),""),C=f.list.reduce(((n,i)=>{let r=s.renderOptions(o,i.groupe,b),a=s.renderOptions(p,i.parentgroupe,!0);return n+x(i,e,t,r,a)}),"");let A=s.renderOptions(o,f.pager.filter.groupe,!0),I=s.renderOptions(p,f.pager.filter.parentgroupe,!0);const N=v(A,I),k=l.searchTemplate(f.pager,u),j=l.render(f.pager,u,[10,20,50],k,N),R=T(g,e,t),D=y(C,f.pager),L=c.tabTemplate(m.cie,$),F=w();let O=n.warningTemplate();return S($,j,R,D,L,F,O)})),e("postRender",(()=>{E()})),e("inContext",E=()=>n.inContext(u)),e("goto",((e,t)=>{f.pager.pageNo=e,f.pager.pageSize=n.setPageState(u,"pageSize",t),A()})),e("sortBy",((e,t)=>{f.pager.pageNo=1,f.pager.sortColumn=e,f.pager.sortDirection=t,A()})),e("search",(e=>{f.pager.searchText=e.value,f.pager.pageNo=1,A()})),e("filter_groupe",(e=>{let t=e.options[e.selectedIndex].value,n=t.length>0?t:void 0;n!=f.pager.filter.groupe&&(f.pager.filter.groupe=n,f.pager.pageNo=1,A())})),e("filter_parentgroupe",(e=>{let t=e.options[e.selectedIndex].value,n=t.length>0?t:void 0;n!=f.pager.filter.parentgroupe&&(f.pager.filter.parentgroupe=n,f.pager.pageNo=1,A())})),I=()=>{let e=a.clone(f);return e.list.forEach((e=>{let t=e.id;e.cie=a.fromSelectNumber(`${u}_cie_${t}`,e.cie),e.groupe=a.fromSelectText(`${u}_groupe_${t}`,e.groupe),e.parentgroupe=a.fromSelectText(`${u}_parentgroupe_${t}`,e.parentgroupe),e.code=a.fromInputTextNullable(`${u}_code_${t}`,e.code),e.description=a.fromInputText(`${u}_description_${t}`,e.description),e.value1=a.fromInputTextNullable(`${u}_value1_${t}`,e.value1),e.value2=a.fromInputTextNullable(`${u}_value2_${t}`,e.value2),e.value3=a.fromInputTextNullable(`${u}_value3_${t}`,e.value3),e.started=a.fromInputNumber(`${u}_started_${t}`,e.started),e.ended=a.fromInputNumberNullable(`${u}_ended_${t}`,e.ended),e.sortorder=a.fromInputNumberNullable(`${u}_sortorder_${t}`,e.sortorder)})),e},N=e=>n.hasNoError(),k=()=>{document.getElementById(`${u}_dummy_submit`).click();let e=document.getElementsByTagName("form")[0];return e.classList.add("js-error"),e.checkValidity()},e("onchange",(e=>{f=I();let t=e.id.replace(`${u}_`,"").split("_"),i=(t[0],+t[1]);f.list.find((e=>e.id==i));n.render()})),e("ondate",((e,t)=>o.eventMan(u,e,t))),e("undo",(()=>{b&&(b=!1,h.list.pop()),f=a.clone(h),g=!1,n.render()})),e("addNew",(()=>{let e=`/lookup/new/${m.cie}/company`;return n.GET(e).then((e=>{f.list.push(e.item),h=a.clone(f),b=!0,e.item._isNew=!0})).then(n.render).catch(n.render)})),e("create",(()=>{let e=I().list.find((e=>e._isNew));if(k()){if(!N())return n.render();n.prepareRender(),n.POST("/lookup",a.createBlack(e,p)).then((e=>{D(e.id),h=a.clone(f),i.gotoCurrent(1)})).catch(n.render)}})),e("save",(()=>{let e=I().list.find((e=>e._editing));if(k()){if(!N())return n.render();n.prepareRender(),n.PUT("/lookup",a.createBlack(e,p)).then((()=>{h=a.clone(f),i.gotoCurrent(1)})).catch(n.render)}})),e("selectfordrop",(e=>{(f=a.clone(h)).list.find((t=>t.id==e))._deleting=!0,n.render()})),e("drop",(()=>{n.prepareRender();let e=f.list.find((e=>e._deleting));n.DELETE("/lookup",{id:e.id,updated:e.updated}).then((()=>{L(e.id),h=a.clone(f),i.gotoCurrent(1)})).catch(n.render)})),e("hasChanges",(()=>!a.same(h,f))),j=()=>((g=!a.same(h,I()))&&setTimeout((()=>{f=I(),n.render()}),10),g),R=()=>{f.pager.filter.plus=void 0,b=!1},D=e=>{f.pager.filter.plus?f.pager.filter.plus+=`,${e}`:f.pager.filter.plus=e.toString()},L=e=>{}}}})),System.register("src/admin/lookup",["_BaseApp/src/core/app","_BaseApp/src/core/router","_BaseApp/src/lib-ts/misc","_BaseApp/src/theme/theme","src/admin/lookupdata","src/permission","src/admin/layout"],(function(e,t){"use strict";var n,i,r,a,s,l,o,d,c,u,p,m,f,h,$,b,g,v,_,x,T,y,S,w;t&&t.id;return{setters:[function(e){n=e},function(e){i=e},function(e){r=e},function(e){a=e},function(e){s=e},function(e){l=e},function(e){o=e}],execute:function(){e("NS",d="App_lookup"),c=["cie_text","created","by"],p={},m={},h=!1,$=!1,b=(e,t)=>`\n\n ${l.isSupport()?a.renderDropdownField(d,"cie",t,i18n("CIE")):""}\n ${a.renderTextField(d,"code",e.code,i18n("CODE"),12)}\n ${a.renderTextField(d,"description",e.description,i18n("DESCRIPTION"),50,!0)}\n ${a.renderTextField(d,"value1",e.value1,i18n("VALUE1"),50)}\n ${a.renderTextField(d,"value2",e.value2,i18n("VALUE2"),50)}\n ${a.renderTextField(d,"value3",e.value3,i18n("VALUE3"),1024)}\n ${a.renderNumberField(d,"started",e.started,i18n("STARTED"),!0)}\n ${a.renderNumberField(d,"ended",e.ended,i18n("ENDED"))}\n ${a.renderNumberField(d,"sortorder",e.sortorder,i18n("SORTORDER"))}\n ${a.renderBlame(e,h)}\n`,g=(e,t,n,i,r)=>{let s=h,l=!s,c=!s,u=!h,p=[];p.push(a.buttonCancel(d)),s&&p.push(a.buttonInsert(d)),l&&p.push(a.buttonDelete(d)),c&&p.push(a.buttonAddNew(d,`#/admin/lookup/new/${e.groupe.toLowerCase()}`)),u&&p.push(a.buttonUpdate(d));let m=a.renderButtons(p),$=o.buildTitle(f,h?i18n("New lookup"):i18n("lookup Details")),b=o.buildSubtitle(f,i18n("lookup subtitle"));return`\n<form onsubmit="return false;" >\n<input type="submit" style="display:none;" id="${d}_dummy_submit">\n\n<div class="js-fixed-heading">\n<div class="js-head">\n <div class="content js-uc-heading js-flex-space">\n <div>\n <div class="title"><i class="${o.icon}"></i> <span>${$}</span></div>\n <div class="subtitle">${b}</div>\n </div>\n <div>\n ${a.wrapContent("js-uc-actions",m)}\n ${a.renderBlame(e,h)}\n </div>\n </div>\n ${a.wrapContent("js-uc-tabs",n)}\n</div>\n<div class="js-body">\n ${a.wrapContent("js-uc-notification",r)}\n ${a.wrapContent("js-uc-notification",i)}\n ${a.wrapContent("js-uc-details",t)}\n</div>\n</div>\n\n${a.renderModalDelete(`modalDelete_${d}`,`${d}.drop()`)}\n\n</form>\n`},v=()=>$?n.dirtyTemplate(d,r.changes(m,p)):"",e("fetchState",_=(e,t)=>(h=isNaN(e),$=!1,i.registerDirtyExit(w),n.GET(`/lookup/${h?`new/${t}`:e}`).then((t=>{p=t.item,m=r.clone(p),f=t.xtra,u={id:e}})).then(s.fetch_cIE()))),e("fetch",(e=>{let t=+e[0],i=e.length>1?e[1]:null;n.prepareRender(d,i18n("lookup")),o.prepareMenu(),_(t,i).then(n.render).catch(n.render)})),e("render",(()=>{if(!x())return"";if(n.fatalError())return n.fatalErrorTemplate();if(null==p||0==Object.keys(p).length)return n.warningTemplate()||n.unexpectedTemplate();let e=l.getCurrentYear(),t=s.get_cIE(e),i=a.renderOptions(t,p.cie,!0);const r=b(p,i),d=o.tabTemplate(p.id,null),c=v(),u=n.warningTemplate();return g(p,r,d,u,c)})),e("postRender",(()=>{x()&&n.setPageTitle(h?i18n("New lookup"):f.title)})),e("inContext",x=()=>n.inContext(d)),T=()=>{let e=r.clone(p);return e.cie=r.fromSelectNumber(`${d}_cie`,p.cie),e.groupe=r.fromInputText(`${d}_groupe`,p.groupe),e.code=r.fromInputTextNullable(`${d}_code`,p.code),e.description=r.fromInputText(`${d}_description`,p.description),e.value1=r.fromInputTextNullable(`${d}_value1`,p.value1),e.value2=r.fromInputTextNullable(`${d}_value2`,p.value2),e.value3=r.fromInputTextNullable(`${d}_value3`,p.value3),e.started=r.fromInputNumber(`${d}_started`,p.started),e.ended=r.fromInputNumberNullable(`${d}_ended`,p.ended),e.sortorder=r.fromInputNumberNullable(`${d}_sortorder`,p.sortorder),e},y=e=>n.hasNoError(),S=()=>{document.getElementById(`${d}_dummy_submit`).click();let e=document.getElementsByTagName("form")[0];return e.classList.add("js-error"),e.checkValidity()},e("onchange",(e=>{p=T(),n.render()})),e("cancel",(()=>{i.goBackOrResume($)})),e("create",(()=>{let e=T();if(S()){if(!y())return n.render();n.prepareRender(),n.POST("/lookup",r.createBlack(e,c)).then((e=>{let t=e;r.toastSuccessSave(),i.goto(`#/admin/lookup/${t.id}`,10)})).catch(n.render)}})),e("save",((e=!1)=>{let t=T();if(S()){if(!y())return n.render();n.prepareRender(),n.PUT("/lookup",r.createBlack(t,c)).then((t=>{r.toastSuccessSave(),e?i.goto(`#/admin/lookups/${p.groupe.toLowerCase()}`,100):i.goto(`#/admin/lookup/${u.id}`,10)})).catch(n.render)}})),e("drop",(()=>{u.updated=p.updated,n.prepareRender(),n.DELETE("/lookup",u).then((e=>{i.goto(`#/admin/lookups/${p.groupe.toLowerCase()}`,250)})).catch(n.render)})),w=()=>(($=!r.same(m,T()))&&setTimeout((()=>{p=T(),n.render()}),10),$)}}})),System.register("src/admin/main",["_BaseApp/src/core/router","src/admin/accounts","src/admin/account","src/admin/company","src/admin/lookups","src/admin/lookup"],(function(e,t){"use strict";var n,i,r,a,s,l;t&&t.id;return{setters:[function(e){n=e},function(e){i=e},function(e){r=e},function(e){a=e},function(e){s=e},function(e){l=e}],execute:function(){window.App_accounts=i,window.App_account=r,window.App_company=a,window.App_lookups=s,window.App_lookup=l,e("startup",(()=>{n.addRoute("^#/admin/accounts/?(.*)?$",i.fetch),n.addRoute("^#/admin/account/(.*)$",r.fetch),n.addRoute("^#/admin/company/?(.*)$",a.fetch),n.addRoute("^#/admin/lookups/?(.*)$",s.fetch),n.addRoute("^#/admin/lookup/(.*)$",l.fetch)})),e("render",(()=>`\n ${i.render()}\n ${r.render()}\n ${a.render()}\n ${s.render()}\n ${l.render()}\n`)),e("postRender",(()=>{i.postRender(),r.postRender(),a.postRender(),s.postRender(),l.postRender()}))}}})),System.register("src/support/layout",["_BaseApp/src/core/app","src/layout"],(function(e,t){"use strict";var n,i;t&&t.id;return{setters:[function(e){n=e},function(e){i=e}],execute:function(){e("icon","far fa-user"),e("prepareMenu",(()=>{i.setOpenedMenu("Administration-Management")})),e("tabTemplate",((e,t,i=!1)=>{let r=n.inContext("App_companys"),a=n.inContext("App_any_lookups"),s=n.inContext("App_permmetas"),l=(window.location.hash.startsWith("#/files/company"),window.location.hash.startsWith("#/file/company"));return`\n<div class="tabs is-boxed">\n <ul>\n <li ${r?"class='is-active'":""}>\n <a href="#/support/companys">\n <span class="icon"><i class="fas fa-list-ol" aria-hidden="true"></i></span>\n <span>${i18n("Company List")}</span>\n </a>\n </li>\n <li ${a?"class='is-active'":""}>\n <a href="#/support/any-lookups">\n <span class="icon"><i class="fas fa-list-ol" aria-hidden="true"></i></span>\n <span>${i18n("Lookups")}</span>\n </a>\n </li>\n <li ${s?"class='is-active'":""}>\n <a href="#/support/permmetas">\n <span class="icon"><i class="fas fa-list-ol" aria-hidden="true"></i></span>\n <span>${i18n("Permission Metadata")}</span>\n </a>\n </li>\n\n${l?`\n <li class="is-active">\n <a href="#/file/account/${e}">\n <span class="icon"><i class="far fa-paperclip" aria-hidden="true"></i></span>\n <span>${i18n("File Details")}</span>\n </a>\n </li>\n`:""}\n\n </ul>\n</div>\n`})),e("buildTitle",((e,t)=>{var n;return null!==(n=null==e?void 0:e.title)&&void 0!==n?n:t})),e("buildSubtitle",((e,t)=>{var n;return null!==(n=null==e?void 0:e.subtitle)&&void 0!==n?n:t}))}}})),System.register("src/support/companys",["_BaseApp/src/core/app","_BaseApp/src/core/router","src/permission","_BaseApp/src/lib-ts/misc","_BaseApp/src/theme/theme","_BaseApp/src/theme/pager","src/admin/lookupdata","src/support/layout"],(function(e,t){"use strict";var n,i,r,a,s,l,o,d,c,u,p,m,f,h,$,b,g,v,_,x,T;t&&t.id;return{setters:[function(e){n=e},function(e){i=e},function(e){r=e},function(e){a=e},function(e){s=e},function(e){l=e},function(e){o=e},function(e){d=e}],execute:function(){e("NS",c="App_companys"),u={list:[],pager:{pageNo:1,pageSize:20,sortColumn:"CIE",sortDirection:"ASC",filter:{}}},f=()=>[].join(""),h=(e,t)=>`\n<tr class="${T(e.cie)?"is-selected":""}" onclick="${c}.gotoDetail(${e.cie});">\n <td class="js-index">${t}</td>\n <td>${a.toStaticText(e.cie)}</td>\n <td>${a.toStaticText(e.name)}</td>\n <td>${e.accounts?`<a href="#/admin/accounts/?cie=${e.cie}" onclick="event.stopPropagation()">${e.accounts} <i class="fal fa-link"></i></a>`:'<span style="opacity: 0.25">0</span>'}</td>\n <td>${e.lookups?`<a href="#/admin/lookups/?cie=${e.cie}" onclick="event.stopPropagation()">${e.lookups} <i class="fal fa-link"></i></a>`:'<span style="opacity: 0.25">0</span>'}</td>\n <td>${a.toStaticCheckbox(e.archive)}</td>\n</tr>`,$=(e,t)=>`\n<div class="table-container">\n<table class="table is-hoverable is-fullwidth">\n <thead>\n <tr>\n <th></th>\n ${l.sortableHeaderLink(t,c,i18n("CIE"),"cie","ASC")}\n ${l.sortableHeaderLink(t,c,i18n("NAME"),"name","ASC")}\n ${l.headerLink(i18n("ACCOUNTS"))}\n ${l.headerLink(i18n("LOOKUPS"))}\n ${l.sortableHeaderLink(t,c,i18n("ARCHIVE"),"archive","ASC")}\n </tr>\n </thead>\n <tbody>\n ${e}\n </tbody>\n</table>\n</div>\n`,b=(e,t,n,i,r)=>{let a=[];a.push(s.buttonAddNew(c,"#/admin/company/new",i18n("Add New")));let l=s.renderButtons(a),o=d.buildTitle(p,i18n("companys title")),u=d.buildSubtitle(p,i18n("companys subtitle"));return`\n<form onsubmit="return false;">\n<input type="submit" style="display:none;" id="${c}_dummy_submit">\n\n<div class="js-fixed-heading">\n<div class="js-head">\n <div class="content js-uc-heading js-flex-space">\n <div>\n <div class="title"><i class="${d.icon}"></i> <span>${o}</span></div>\n <div class="subtitle">${u}</div>\n </div>\n <div>\n ${s.wrapContent("js-uc-actions",l)}\n </div>\n </div>\n ${s.wrapContent("js-uc-tabs",n)}\n</div>\n<div class="js-body">\n <div class="columns">\n <div class="column is-6 is-offset-3">\n ${s.wrapContent("js-uc-notification",r)}\n ${s.wrapContent("js-uc-notification",i)}\n ${s.wrapContent("js-uc-pager",e)}\n ${s.wrapContent("js-uc-list",t)}\n </div>\n </div>\n</div>\n</div>\n\n</form>\n`},e("fetchState",g=e=>(i.registerDirtyExit(null),n.POST("/company/search",u.pager).then((e=>{u=e,p=e.xtra,{}})).then(o.fetch_autreFournisseur()).then(o.fetch_compte()))),e("fetch",(e=>{e[0];n.prepareRender(c,i18n("companys")),g().then(n.render).catch(n.render)})),v=()=>{n.prepareRender(c,i18n("companys")),n.POST("/company/search",u.pager).then((e=>{u=e})).then(n.render).catch(n.render)},e("render",(()=>{if(!_())return"";if(n.fatalError())return n.fatalErrorTemplate();if(null==u||null==u.list||u.list instanceof Array==0)return n.warningTemplate()||n.unexpectedTemplate();let e=n.warningTemplate();const t=u.list.reduce(((e,t,n)=>{let i=l.rowNumber(u.pager,n);return e+h(t,i)}),"");r.getCurrentYear();const i=f(),a=l.searchTemplate(u.pager,c),s=l.render(u.pager,c,[20,50],a,i),o=$(t,u.pager),p=d.tabTemplate(null,null);return b(s,o,p,"",e)})),e("postRender",(()=>{_()})),e("inContext",_=()=>n.inContext(c)),x=e=>{null==m&&(m={cie:e}),m.cie=e},T=e=>null!=m&&m.cie==e,e("goto",((e,t)=>{u.pager.pageNo=e,u.pager.pageSize=t,v()})),e("sortBy",((e,t)=>{u.pager.pageNo=1,u.pager.sortColumn=e,u.pager.sortDirection=t,v()})),e("search",(e=>{u.pager.searchText=e.value,u.pager.pageNo=1,v()})),e("gotoDetail",(e=>{x(e),i.goto(`#/admin/company/?cie=${e}`)}))}}})),System.register("src/support/security",["_BaseApp/src/core/app","_BaseApp/src/core/router","_BaseApp/src/lib-ts/misc","_BaseApp/src/theme/theme","src/permission","src/admin/layout"],(function(e,t){"use strict";var n,i,r,a,s,l,o,d,c,u,p,m,f,h,$,b,g,v,_,x,T,y,S,w,C;t&&t.id;return{setters:[function(e){n=e},function(e){i=e},function(e){r=e},function(e){a=e},function(e){s=e},function(e){l=e}],execute:function(){e("NS",o="App_security"),c={},u={},p=!1,m=!1,f=e=>`\n<th colspan="${e.ro.length}">${e.stnKind}</th>\n`,h=e=>`\n<th>${e.role2}</th>\n`,$=(e,t,n,i,r)=>{let a=t.permID,s=t.perm[0].permValue,l=i.reduce(((e,t,n)=>{let i=r[n],a=(t&s)>0;return e+`<td data-mask="${t}" data-checked="${a}" title="${i}" class="js-cell">${a?'<i class="far fa-check"></i>':""}</td>`}),"");return`\n<tr onclick="${o}.rowClick(${a})">\n ${0==n?`<td rowspan="${e.item.length}" data-group="1" style="text-align: left;">${e.groupe}</td>`:""}\n <td style="text-align: left;">${t.description}</td>\n <td>${a}</td>\n ${l}\n</tr>\n`},b=(e,t,n)=>`\n<div class="container">\n<table class="table is-hoverable is-fullwidth is-bordered is-narrow">\n <thead>\n <tr>\n <th class="js-empty"></th>\n <th class="js-empty"></th>\n <th class="js-empty"></th>\n ${e}\n </tr>\n <tr>\n <th class="js-empty"></th>\n <th class="js-empty"></th>\n <th class="js-empty"></th>\n ${t}\n </tr>\n </thead>\n <tbody>\n ${n}\n </tbody>\n</table>\n</div>\n`,g=(e,t,n,i,d)=>{s.isSupport();return`\n<style>\n .table thead th.js-empty { border: none; }\n .table thead th:not(.js-empty) { vertical-align: bottom; line-height: 2rem; text-align: center; background-color: rgba(245, 245, 245, 0.75); }\n .table thead th { color: #aaa }\n .table td, .table th { text-align: center; }\n .table .js-cell[data-checked='true'] { background-color: #228b2229; }\n .table .js-cell[data-checked] { cursor: pointer; }\n .js-uc-details.js-readonly td { pointer-events: none; }\n</style>\n\n<form onsubmit="return false;">\n<input type="submit" style="display:none;" id="${o}_dummy_submit">\n\n<div class="js-fixed-heading">\n<div class="js-head">\n <div class="content js-uc-heading js-flex-space">\n <div>\n <div class="title"><i class="${l.icon}"></i> <span>${r.toInputText(e.xtra&&e.xtra.title)}</span></div>\n <div class="subtitle">Editing Network Security</div>\n </div>\n <div>\n ${a.wrapContent("js-uc-actions",a.renderActionButtons2(o,p,null,[],!1,!1))}\n ${a.renderBlame(e,p)}\n </div>\n </div>\n ${a.wrapContent("js-uc-tabs",n)}\n</div>\n<div class="js-body">\n ${a.wrapContent("js-uc-notification",d)}\n ${a.wrapContent("js-uc-notification",i)}\n ${a.wrapContent("js-uc-details",t)}\n</div>\n</div>\n\n</form>\n`},v=()=>m?n.dirtyTemplate(o,r.changes(u,c)):"",_=()=>{c={}},e("fetchState",x=e=>{m=!1,i.registerDirtyExit(C),_();let t=`/security/${e}`;return n.GET(t).then((t=>{c=t,u=r.clone(c),d={cie:e},p=null==c.items[0].item[0].perm[0].permValue}))}),e("fetch",(e=>{let t=s.getCie(e);n.prepareRender(o,i18n("Security")),x(t).then(n.render).catch(n.render)})),e("render",(()=>{if(!T())return"";if(n.fatalError())return n.fatalErrorTemplate();if(null==c)return n.serverError()?g(null,"","",n.warningTemplate(),""):"";const e=c.roles.reduce(((e,t)=>e+f(t)),""),t=c.roles.reduce(((e,t)=>e+t.ro.reduce(((e,t)=>e+h(t)),"")),""),i=c.roles.map((e=>e.ro.map((e=>e.role_bit)))).reduce(((e,t)=>e.concat(t)),[]),r=c.roles.map((e=>e.ro.map((t=>`${e.stnKind} [${t.role2}]`)))).reduce(((e,t)=>e.concat(t)),[]),a=c.items.reduce(((e,t)=>e+t.item.reduce(((e,n,a)=>e+$(t,n,a,i,r)),"")),""),s=b(e,t,a),o=l.tabTemplate(d.cie,null,p),u=v(),m=n.warningTemplate();return g(c,s,o,m,u)})),e("postRender",(()=>{T()})),e("inContext",T=()=>n.inContext(o)),y=()=>r.clone(c),S=e=>n.hasNoError(),w=()=>{document.getElementById(`${o}_dummy_submit`).click();let e=document.getElementsByTagName("form")[0];return e.classList.add("js-error"),e.checkValidity()},e("onchange",(e=>{c=y(),n.render()})),e("rowClick",(e=>{event.stopPropagation();let t=event.target.closest("td");if(null==t.dataset.mask)return;let i=+t.dataset.mask;c.items.forEach((t=>t.item.forEach((t=>{if(t.permID==e){let e=t.perm[0].permValue;e=0==(e&i)?e|i:e&~i,t.perm[0].permValue=e}})))),n.render()})),e("cancel",(()=>{i.goBackOrResume(m)})),e("create",(()=>{y();if(w()){if(!S())return n.render();n.prepareRender(),n.POST(`/security/${d.cie}`,{}).then((e=>{r.toastSuccessSave(),i.goto(`#/support/security/${d.cie}`,10)})).catch(n.render)}})),e("save",(()=>{let e=y();if(!w())return;if(!S())return n.render();let t=e.items.map((e=>e.item.map((e=>({id:e.permID,value:e.perm[0].permValue}))))).reduce(((e,t)=>e.concat(t)),[]);n.prepareRender(),n.PUT(`/security/${d.cie}`,t).then((e=>{r.toastSuccessSave(),i.goto(`#/support/security/${d.cie}`,10)})).catch(n.render)})),C=()=>((m=!r.same(u,y()))&&setTimeout((()=>{c=y(),n.render()}),10),m)}}})),System.register("src/support/permmetas",["_BaseApp/src/core/app","_BaseApp/src/core/router","src/permission","_BaseApp/src/lib-ts/misc","_BaseApp/src/theme/theme","_BaseApp/src/theme/pager","_BaseApp/src/theme/calendar","src/admin/lookupdata","src/support/layout"],(function(e,t){"use strict";var n,i,r,a,s,l,o,d,c,u,p,m,f,h,$,b,g,v,_,x,T,y,S,w,C,A,E,I,N,k,j,R,D;t&&t.id;return{setters:[function(e){n=e},function(e){i=e},function(e){r=e},function(e){a=e},function(e){s=e},function(e){l=e},function(e){o=e},function(e){d=e},function(e){c=e}],execute:function(){e("NS",u="App_permmetas"),"permmetas_table",p=["_editing","_deleting","_isNew","totalcount","groupe_text","parentid_text","created","by"],m={list:[],pager:{pageNo:1,pageSize:n.getPageState(u,"pageSize",20),sortColumn:"ID",sortDirection:"ASC",filter:{}}},f={},$=!1,b=!1,g=(e,t)=>{let n=[];return n.push(s.renderDropdownFilter(u,"groupe",e,i18n("GROUPE"))),n.push(s.renderDropdownFilter(u,"parentid",t,i18n("PARENTID"))),n.join("")},v=(e,t,n,i)=>{let r=e.id,a='<td class="js-td-33">&nbsp;</td>';e._editing&&(a=`<td onclick="${u}.save()" class="js-td-33" title="Click to confirm"><i class="fa fa-check"></i></td>`),e._deleting&&(a=`<td onclick="${u}.drop()" class="js-td-33" title="Click to confirm"><i class="fa fa-check"></i></td>`),e._isNew&&(a=`<td onclick="${u}.create()" class="js-td-33" title="Click to confirm"><i class="fa fa-check"></i></td>`);let s=e._editing||e._deleting||e._isNew,l=!s,o=null!=n||null!=t&&r!=t||$&&!e._isNew||!1,d=[];return(e._editing||e._isNew)&&d.push("js-not-same"),e._deleting&&d.push("js-strikeout"),e._isNew&&d.push("js-new"),o&&d.push("js-readonly"),`\n<tr data-id="${r}" class="${d.join(" ")}" style="cursor: pointer;">\n <td class="js-index">${i}</td>\n\n${l?`<td onclick="${u}.selectfordrop(${r})" class="has-text-danger js-td-33 js-drop" title="Click to mark for deletion"><i class='fas fa-times'></i></td>`:""}\n${s?`<td onclick="${u}.undo()" class="has-text-primary js-td-33" title="Click to undo"><i class='fa fa-undo'></i></td>`:""}\n${a}\n\n</tr>`},_=(e,t,n,i,r)=>{let l=e.id,o=null!=n||null!=t&&l!=t||$&&!e._isNew||!1,d=[];return(e._editing||e._isNew)&&d.push("js-not-same"),e._deleting&&d.push("js-strikeout"),e._isNew&&d.push("js-new"),o&&d.push("js-readonly"),`\n<tr data-id="${l}" class="${d.join(" ")}" style="cursor: pointer;">\n${o?`\n <td><div class="js-truncate" style="width:100px;">${a.toStaticText(e.groupe_text)}</div></td>\n <td><div class="js-number">${a.toStaticNumber(e.code)}</div></td>\n <td><div class="js-truncate" style="width:100px;">${a.toStaticText(e.description)}</div></td>\n <td><div class="js-truncate" style="width:100px;">${a.toStaticText(e.parentid_text)}</div></td>\n <td><div class="js-number">${a.toStaticNumber(e.sortorder)}</div></td>\n <td><div class="js-truncate" style="width:100px;">${a.toStaticText(e.key)}</div></td>\n <td>${a.toStaticCheckbox(e.archive)}</td>\n`:`\n <td class="js-inline-select">${s.renderDropdownInline(u,`groupe_${l}`,i,!0)}</td>\n <td class="js-inline-input">${s.renderNumberInline(u,`code_${l}`,e.code,!0)}</td>\n <td class="js-inline-input">${s.renderTextInline(u,`description_${l}`,e.description,50,!0)}</td>\n <td class="js-inline-select">${s.renderDropdownInline(u,`parentid_${l}`,r)}</td>\n <td class="js-inline-input">${s.renderNumberInline(u,`sortorder_${l}`,e.sortorder)}</td>\n <td class="js-inline-input">${s.renderTextInline(u,`key_${l}`,e.key,8)}</td>\n <td class="js-inline-input">${s.renderCheckboxInline(u,`archive_${l}`,e.archive)}</td>\n`}\n</tr>`},x=(e,t,n)=>{let i=null!=n||null!=t||$;return i=i||!1,`\n<style>.js-td-33 { width: 33px; }</style>\n<div>\n<table class="table is-hoverable js-inline" style="width: 10px; table-layout: fixed;">\n <thead>\n <tr>\n <th style="width:99px" colspan="3">&nbsp;</th>\n </tr>\n </thead>\n <tbody>\n ${e}\n <tr class="js-insert-row ${i?"js-noclick":""}">\n <td class="js-index js-td-33">*</td>\n <td class="has-text-primary js-td-33 js-add" onclick="${u}.addNew()" title="Click to add a new row"><i class="fas fa-plus"></i></td>\n <td></td>\n </tr>\n </tbody>\n</table>\n</div>\n`},T=(e,t)=>`\n<div id="permmetas_table" class="table-container">\n<table class="table is-hoverable js-inline" style="width: 100px; table-layout: fixed;">\n <thead>\n <tr>\n ${l.sortableHeaderLink(t,u,i18n("GROUPE"),"groupe_text","ASC","width:100px")}\n ${l.sortableHeaderLink(t,u,i18n("CODE"),"code","ASC","width:100px")}\n ${l.sortableHeaderLink(t,u,i18n("DESCRIPTION"),"description","ASC","width:100px")}\n ${l.sortableHeaderLink(t,u,i18n("PARENT"),"parentid_text","ASC","width:100px")}\n ${l.sortableHeaderLink(t,u,i18n("SORTORDER"),"sortorder","ASC","width:100px")}\n ${l.sortableHeaderLink(t,u,i18n("KEY"),"key","ASC","width:100px")}\n ${l.sortableHeaderLink(t,u,i18n("ARCHIVE"),"archive","ASC","width:100px")}\n </tr>\n </thead>\n <tbody>\n ${e}\n <tr class="js-insert-row">\n <td colspan="11">&nbsp;</td>\n </tr>\n </tbody>\n</table>\n</div>\n`,y=(e,t,n,i,r,a,l)=>{let o=s.renderButtons([]),d=c.buildTitle(e,i18n("AAA: AAA")),p=c.buildSubtitle(e,i18n("AAA")),m=`<div style="display: flex;">\n <div>${n}</div>\n <div style="width:calc(100% - 99px)">${i}</div>\n</div>`;return`\n<form onsubmit="return false;">\n<input type="submit" style="display:none;" id="${u}_dummy_submit">\n\n<div class="js-fixed-heading">\n<div class="js-head">\n <div class="content js-uc-heading js-flex-space">\n <div>\n <div class="title"><i class="${c.icon}"></i> <span>${d}</span></div>\n <div class="subtitle">${p}</div>\n </div>\n <div>\n ${s.wrapContent("js-uc-actions",o)}\n </div>\n </div>\n ${s.wrapContent("js-uc-tabs",r)}\n</div>\n<div class="js-body">\n ${s.wrapContent("js-uc-notification",l)}\n ${s.wrapContent("js-uc-notification",a)}\n ${s.wrapContent("js-uc-pager",t)}\n ${s.wrapContent("js-uc-list",m)}\n</div>\n</div>\n\n</form>\n`},S=()=>b?n.dirtyTemplate(u,null):"",e("fetchState",w=e=>($=!1,b=!1,i.registerDirtyExit(k),n.POST("/permmeta/search",m.pager).then((e=>{m=e,f=a.clone(m),{id:void 0},h=e.xtra})).then(d.fetch_permmeta_groupe()).then(d.fetch_permmeta_parent()))),e("fetch",(e=>{e[0];n.prepareRender(u,i18n("permmeta")),c.prepareMenu(),w().then(n.render).catch(n.render)})),C=()=>{n.prepareRender(u,i18n("permmeta")),j(),n.POST("/permmeta/search",m.pager).then((e=>{m=e,f=a.clone(m)})).then(n.render).catch(n.render)},e("render",(()=>{if(!A())return"";if(n.fatalError())return n.fatalErrorTemplate();if(null==m||null==m.list||m.list instanceof Array==0)return n.warningTemplate()||n.unexpectedTemplate();let e,t;m.list.forEach(((n,i)=>{let r=f.list[i];n._editing=!a.same(n,r),n._editing&&(e=n.id),n._deleting&&(t=n.id)}));let i=r.getCurrentYear(),o=d.get_permmeta_groupe(i),p=d.get_permmeta_parent(i);const b=m.list.reduce(((n,i,r)=>{let a=l.rowNumber(m.pager,r);return n+v(i,e,t,a)}),""),w=m.list.reduce(((n,i)=>{let r=s.renderOptions(o,i.groupe,$),a=s.renderOptions(p,i.parentid,!0);return n+_(i,e,t,r,a)}),"");let C=s.renderOptions(o,m.pager.filter.groupe,!0),E=s.renderOptions(p,m.pager.filter.parentid,!0);const I=g(C,E),N=l.searchTemplate(m.pager,u),k=l.render(m.pager,u,[10,20,50],N,I),j=x(b,e,t),R=T(w,m.pager),D=c.tabTemplate(null,null),L=S();let F=n.warningTemplate();return y(h,k,j,R,D,L,F)})),e("postRender",(()=>{A()})),e("inContext",A=()=>n.inContext(u)),e("goto",((e,t)=>{m.pager.pageNo=e,m.pager.pageSize=n.setPageState(u,"pageSize",t),C()})),e("sortBy",((e,t)=>{m.pager.pageNo=1,m.pager.sortColumn=e,m.pager.sortDirection=t,C()})),e("search",(e=>{m.pager.searchText=e.value,m.pager.pageNo=1,C()})),e("filter_groupe",(e=>{let t=e.options[e.selectedIndex].value,n=t.length>0?t:void 0;n!=m.pager.filter.groupe&&(m.pager.filter.groupe=n,m.pager.pageNo=1,C())})),e("filter_parentid",(e=>{let t=e.options[e.selectedIndex].value,n=t.length>0?+t:void 0;n!=m.pager.filter.parentid&&(m.pager.filter.parentid=n,m.pager.pageNo=1,C())})),E=()=>{let e=a.clone(m);return e.list.forEach((e=>{let t=e.id;e.groupe=a.fromSelectText(`${u}_groupe_${t}`,e.groupe),e.code=a.fromInputNumber(`${u}_code_${t}`,e.code),e.description=a.fromInputText(`${u}_description_${t}`,e.description),e.parentid=a.fromSelectNumber(`${u}_parentid_${t}`,e.parentid),e.sortorder=a.fromInputNumberNullable(`${u}_sortorder_${t}`,e.sortorder),e.key=a.fromInputTextNullable(`${u}_key_${t}`,e.key),e.archive=a.fromInputCheckbox(`${u}_archive_${t}`,e.archive)})),e},I=e=>n.hasNoError(),N=()=>{document.getElementById(`${u}_dummy_submit`).click();let e=document.getElementsByTagName("form")[0];return e.classList.add("js-error"),e.checkValidity()},e("onchange",(e=>{m=E();let t=e.id.replace(`${u}_`,"").split("_"),i=(t[0],+t[1]);m.list.find((e=>e.id==i));n.render()})),e("ondate",((e,t)=>o.eventMan(u,e,t))),e("undo",(()=>{$&&($=!1,f.list.pop()),m=a.clone(f),b=!1,n.render()})),e("addNew",(()=>n.GET("/permmeta/new").then((e=>{m.list.push(e.item),f=a.clone(m),$=!0,e.item._isNew=!0})).then(n.render).catch(n.render))),e("create",(()=>{let e=E().list.find((e=>e._isNew));if(N()){if(!I())return n.render();n.prepareRender(),n.POST("/permmeta",a.createBlack(e,p)).then((e=>{R(e.id),f=a.clone(m),i.gotoCurrent(1)})).catch(n.render)}})),e("save",(()=>{let e=E().list.find((e=>e._editing));if(N()){if(!I())return n.render();n.prepareRender(),n.PUT("/permmeta",a.createBlack(e,p)).then((()=>{f=a.clone(m),i.gotoCurrent(1)})).catch(n.render)}})),e("selectfordrop",(e=>{(m=a.clone(f)).list.find((t=>t.id==e))._deleting=!0,n.render()})),e("drop",(()=>{n.prepareRender();let e=m.list.find((e=>e._deleting));n.DELETE("/permmeta",{id:e.id,updated:e.updated}).then((()=>{D(e.id),f=a.clone(m),i.gotoCurrent(1)})).catch(n.render)})),e("hasChanges",(()=>!a.same(f,m))),k=()=>((b=!a.same(f,E()))&&setTimeout((()=>{m=E(),n.render()}),10),b),j=()=>{m.pager.filter.plus=void 0,$=!1},R=e=>{m.pager.filter.plus?m.pager.filter.plus+=`,${e}`:m.pager.filter.plus=e.toString()},D=e=>{}}}})),System.register("src/support/any-lookups",["_BaseApp/src/core/app","_BaseApp/src/core/router","src/permission","_BaseApp/src/lib-ts/misc","_BaseApp/src/theme/theme","_BaseApp/src/theme/pager","_BaseApp/src/theme/calendar","src/admin/lookupdata","src/support/layout"],(function(e,t){"use strict";var n,i,r,a,s,l,o,d,c,u,p,m,f,h,$,b,g,v,_,x,T,y,S,w,C,A,E,I,N,k,j,R,D;t&&t.id;return{setters:[function(e){n=e},function(e){i=e},function(e){r=e},function(e){a=e},function(e){s=e},function(e){l=e},function(e){o=e},function(e){d=e},function(e){c=e}],execute:function(){e("NS",u="App_any_lookups"),"any_lookups_table",p=["_editing","_deleting","_isNew","totalcount","cie_text","created","by"],m={list:[],pager:{pageNo:1,pageSize:n.getPageState(u,"pageSize",20),sortColumn:"ID",sortDirection:"ASC",filter:{cie:void 0}}},f={},$=!1,b=!1,g=e=>{let t=[];return t.push(s.renderDropdownFilter(u,"cie",e,i18n("CIE"))),t.join("")},v=(e,t,n,i)=>{let r=e.id,a='<td class="js-td-33">&nbsp;</td>';e._editing&&(a=`<td onclick="${u}.save()" class="js-td-33" title="Click to confirm"><i class="fa fa-check"></i></td>`),e._deleting&&(a=`<td onclick="${u}.drop()" class="js-td-33" title="Click to confirm"><i class="fa fa-check"></i></td>`),e._isNew&&(a=`<td onclick="${u}.create()" class="js-td-33" title="Click to confirm"><i class="fa fa-check"></i></td>`);let s=e._editing||e._deleting||e._isNew,l=!s,o=null!=n||null!=t&&r!=t||$&&!e._isNew||!1,d=[];return(e._editing||e._isNew)&&d.push("js-not-same"),e._deleting&&d.push("js-strikeout"),e._isNew&&d.push("js-new"),o&&d.push("js-readonly"),`\n<tr data-id="${r}" class="${d.join(" ")}" style="cursor: pointer;">\n <td class="js-index">${i}</td>\n\n${l?`<td onclick="${u}.selectfordrop(${r})" class="has-text-danger js-td-33 js-drop" title="Click to mark for deletion"><i class='fas fa-times'></i></td>`:""}\n${s?`<td onclick="${u}.undo()" class="has-text-primary js-td-33" title="Click to undo"><i class='fa fa-undo'></i></td>`:""}\n${a}\n\n</tr>`},_=(e,t,n,i)=>{let r=e.id,l=null!=n||null!=t&&r!=t||$&&!e._isNew||!1,o=[];return(e._editing||e._isNew)&&o.push("js-not-same"),e._deleting&&o.push("js-strikeout"),e._isNew&&o.push("js-new"),l&&o.push("js-readonly"),`\n<tr data-id="${r}" class="${o.join(" ")}" style="cursor: pointer;">\n${l?`\n <td><div class="js-truncate" style="width:100px;">${a.toStaticText(e.cie_text)}</div></td>\n <td><div class="js-truncate" style="width:100px;">${a.toStaticText(e.groupe)}</div></td>\n <td><div class="js-truncate" style="width:100px;">${a.toStaticText(e.code)}</div></td>\n <td><div class="js-truncate" style="width:100px;">${a.toStaticText(e.description)}</div></td>\n <td><div class="js-truncate" style="width:100px;">${a.toStaticText(e.value1)}</div></td>\n <td><div class="js-truncate" style="width:100px;">${a.toStaticText(e.value2)}</div></td>\n <td><div class="js-truncate" style="width:100px;">${a.toStaticText(e.value3)}</div></td>\n <td><div class="js-number">${a.toStaticNumber(e.started)}</div></td>\n <td><div class="js-number">${a.toStaticNumber(e.ended)}</div></td>\n <td><div class="js-number">${a.toStaticNumber(e.sortorder)}</div></td>\n`:`\n <td class="js-inline-select">${s.renderDropdownInline(u,`cie_${r}`,i)}</td>\n <td class="js-inline-input">${s.renderTextInline(u,`groupe_${r}`,e.groupe,12,!0)}</td>\n <td class="js-inline-input">${s.renderTextInline(u,`code_${r}`,e.code,12)}</td>\n <td class="js-inline-input">${s.renderTextInline(u,`description_${r}`,e.description,50,!0)}</td>\n <td class="js-inline-input">${s.renderTextInline(u,`value1_${r}`,e.value1,50)}</td>\n <td class="js-inline-input">${s.renderTextInline(u,`value2_${r}`,e.value2,50)}</td>\n <td class="js-inline-input">${s.renderTextInline(u,`value3_${r}`,e.value3,1024)}</td>\n <td class="js-inline-input">${s.renderNumberInline(u,`started_${r}`,e.started,!0)}</td>\n <td class="js-inline-input">${s.renderNumberInline(u,`ended_${r}`,e.ended)}</td>\n <td class="js-inline-input">${s.renderNumberInline(u,`sortorder_${r}`,e.sortorder)}</td>\n`}\n</tr>`},x=(e,t,n)=>{let i=null!=n||null!=t||$;return i=i||!1,`\n<style>.js-td-33 { width: 33px; }</style>\n<div>\n<table class="table is-hoverable js-inline" style="width: 10px; table-layout: fixed;">\n <thead>\n <tr>\n <th style="width:99px" colspan="3">&nbsp;</th>\n </tr>\n </thead>\n <tbody>\n ${e}\n <tr class="js-insert-row ${i?"js-noclick":""}">\n <td class="js-index js-td-33">*</td>\n <td class="has-text-primary js-td-33 js-add" onclick="${u}.addNew()" title="Click to add a new row"><i class="fas fa-plus"></i></td>\n <td></td>\n </tr>\n </tbody>\n</table>\n</div>\n`},T=(e,t)=>`\n<div id="any_lookups_table" class="table-container">\n<table class="table is-hoverable js-inline" style="width: 100px; table-layout: fixed;">\n <thead>\n <tr>\n ${l.sortableHeaderLink(t,u,i18n("CIE"),"cie_text","ASC","width:100px")}\n ${l.sortableHeaderLink(t,u,i18n("GROUPE"),"groupe","ASC","width:100px")}\n ${l.sortableHeaderLink(t,u,i18n("CODE"),"code","ASC","width:100px")}\n ${l.sortableHeaderLink(t,u,i18n("DESCRIPTION"),"description","ASC","width:100px")}\n ${l.sortableHeaderLink(t,u,i18n("VALUE1"),"value1","ASC","width:100px")}\n ${l.sortableHeaderLink(t,u,i18n("VALUE2"),"value2","ASC","width:100px")}\n ${l.sortableHeaderLink(t,u,i18n("VALUE3"),"value3","ASC","width:100px")}\n ${l.sortableHeaderLink(t,u,i18n("STARTED"),"started","ASC","width:100px")}\n ${l.sortableHeaderLink(t,u,i18n("ENDED"),"ended","ASC","width:100px")}\n ${l.sortableHeaderLink(t,u,i18n("SORTORDER"),"sortorder","ASC","width:100px")}\n </tr>\n </thead>\n <tbody>\n ${e}\n <tr class="js-insert-row">\n <td colspan="14">&nbsp;</td>\n </tr>\n </tbody>\n</table>\n</div>\n`,y=(e,t,n,i,r,a,l)=>{let o=s.renderButtons([]),d=c.buildTitle(e,i18n("AAA: AAA")),p=c.buildSubtitle(e,i18n("AAA")),m=`<div style="display: flex;">\n <div>${n}</div>\n <div style="width:calc(100% - 99px)">${i}</div>\n</div>`;return`\n<form onsubmit="return false;">\n<input type="submit" style="display:none;" id="${u}_dummy_submit">\n\n<div class="js-fixed-heading">\n<div class="js-head">\n <div class="content js-uc-heading js-flex-space">\n <div>\n <div class="title"><i class="${c.icon}"></i> <span>${d}</span></div>\n <div class="subtitle">${p}</div>\n </div>\n <div>\n ${s.wrapContent("js-uc-actions",o)}\n </div>\n </div>\n ${s.wrapContent("js-uc-tabs",r)}\n</div>\n<div class="js-body">\n ${s.wrapContent("js-uc-notification",l)}\n ${s.wrapContent("js-uc-notification",a)}\n ${s.wrapContent("js-uc-pager",t)}\n ${s.wrapContent("js-uc-list",m)}\n</div>\n</div>\n\n</form>\n`},S=()=>b?n.dirtyTemplate(u,null):"",e("fetchState",w=e=>($=!1,b=!1,i.registerDirtyExit(k),n.POST("/lookup/search",m.pager).then((e=>{m=e,f=a.clone(m),h=e.xtra})).then(d.fetch_cIE()))),e("fetch",(e=>{e[0];n.prepareRender(u,i18n("lookup")),c.prepareMenu(),w().then(n.render).catch(n.render)})),C=()=>{n.prepareRender(u,i18n("lookup")),j(),n.POST("/lookup/search",m.pager).then((e=>{m=e,f=a.clone(m)})).then(n.render).catch(n.render)},e("render",(()=>{if(!A())return"";if(n.fatalError())return n.fatalErrorTemplate();if(null==m||null==m.list||m.list instanceof Array==0)return n.warningTemplate()||n.unexpectedTemplate();let e,t;m.list.forEach(((n,i)=>{let r=f.list[i];n._editing=!a.same(n,r),n._editing&&(e=n.id),n._deleting&&(t=n.id)}));let i=r.getCurrentYear(),o=d.get_cIE(i);const p=m.list.reduce(((n,i,r)=>{let a=l.rowNumber(m.pager,r);return n+v(i,e,t,a)}),""),$=m.list.reduce(((n,i)=>{let r=s.renderOptions(o,i.cie,!0);return n+_(i,e,t,r)}),"");let b=s.renderOptions(o,m.pager.filter.cie,!0);const w=g(b),C=l.searchTemplate(m.pager,u),E=l.render(m.pager,u,[10,20,50],C,w),I=x(p,e,t),N=T($,m.pager),k=c.tabTemplate(null,null),j=S();let R=n.warningTemplate();return y(h,E,I,N,k,j,R)})),e("postRender",(()=>{A()})),e("inContext",A=()=>n.inContext(u)),e("goto",((e,t)=>{m.pager.pageNo=e,m.pager.pageSize=n.setPageState(u,"pageSize",t),C()})),e("sortBy",((e,t)=>{m.pager.pageNo=1,m.pager.sortColumn=e,m.pager.sortDirection=t,C()})),e("search",(e=>{m.pager.searchText=e.value,m.pager.pageNo=1,C()})),e("filter_cie",(e=>{let t=e.options[e.selectedIndex].value,n=t.length>0?+t:void 0;n!=m.pager.filter.cie&&(m.pager.filter.cie=n,m.pager.pageNo=1,C())})),E=()=>{let e=a.clone(m);return e.list.forEach((e=>{let t=e.id;e.cie=a.fromSelectNumber(`${u}_cie_${t}`,e.cie),e.groupe=a.fromInputText(`${u}_groupe_${t}`,e.groupe),e.code=a.fromInputTextNullable(`${u}_code_${t}`,e.code),e.description=a.fromInputText(`${u}_description_${t}`,e.description),e.value1=a.fromInputTextNullable(`${u}_value1_${t}`,e.value1),e.value2=a.fromInputTextNullable(`${u}_value2_${t}`,e.value2),e.value3=a.fromInputTextNullable(`${u}_value3_${t}`,e.value3),e.started=a.fromInputNumber(`${u}_started_${t}`,e.started),e.ended=a.fromInputNumberNullable(`${u}_ended_${t}`,e.ended),e.sortorder=a.fromInputNumberNullable(`${u}_sortorder_${t}`,e.sortorder)})),e},I=e=>n.hasNoError(),N=()=>{document.getElementById(`${u}_dummy_submit`).click();let e=document.getElementsByTagName("form")[0];return e.classList.add("js-error"),e.checkValidity()},e("onchange",(e=>{m=E();let t=e.id.replace(`${u}_`,"").split("_"),i=(t[0],+t[1]);m.list.find((e=>e.id==i));n.render()})),e("ondate",((e,t)=>o.eventMan(u,e,t))),e("undo",(()=>{$&&($=!1,f.list.pop()),m=a.clone(f),b=!1,n.render()})),e("addNew",(()=>n.GET("/lookup/new").then((e=>{m.list.push(e.item),f=a.clone(m),$=!0,e.item._isNew=!0})).then(n.render).catch(n.render))),e("create",(()=>{let e=E().list.find((e=>e._isNew));if(N()){if(!I())return n.render();n.prepareRender(),n.POST("/lookup",a.createBlack(e,p)).then((e=>{R(e.id),f=a.clone(m),i.gotoCurrent(1)})).catch(n.render)}})),e("save",(()=>{let e=E().list.find((e=>e._editing));if(N()){if(!I())return n.render();n.prepareRender(),n.PUT("/lookup",a.createBlack(e,p)).then((()=>{f=a.clone(m),i.gotoCurrent(1)})).catch(n.render)}})),e("selectfordrop",(e=>{(m=a.clone(f)).list.find((t=>t.id==e))._deleting=!0,n.render()})),e("drop",(()=>{n.prepareRender();let e=m.list.find((e=>e._deleting));n.DELETE("/lookup",{id:e.id,updated:e.updated}).then((()=>{D(e.id),f=a.clone(m),i.gotoCurrent(1)})).catch(n.render)})),e("hasChanges",(()=>!a.same(f,m))),k=()=>((b=!a.same(f,E()))&&setTimeout((()=>{m=E(),n.render()}),10),b),j=()=>{m.pager.filter.plus=void 0,$=!1},R=e=>{m.pager.filter.plus?m.pager.filter.plus+=`,${e}`:m.pager.filter.plus=e.toString()},D=e=>{}}}})),System.register("src/support/main",["_BaseApp/src/core/router","src/support/companys","src/support/security","src/support/permmetas","src/support/any-lookups"],(function(e,t){"use strict";var n,i,r,a,s;t&&t.id;return{setters:[function(e){n=e},function(e){i=e},function(e){r=e},function(e){a=e},function(e){s=e}],execute:function(){window.App_companys=i,window.App_security=r,window.App_any_lookups=s,window.App_permmetas=a,e("startup",(()=>{n.addRoute("^#/support/companys/?(.*)?$",i.fetch),n.addRoute("^#/support/security/?(.*)?$",r.fetch),n.addRoute("^#/support/any-lookups/?(.*)?$",s.fetch),n.addRoute("^#/support/permmetas/?(.*)?$",a.fetch)})),e("render",(()=>`\n ${i.render()}\n ${r.render()}\n ${s.render()}\n ${a.render()}\n`)),e("postRender",(()=>{i.postRender(),r.postRender(),s.postRender(),a.postRender()}))}}})),System.register("src/christian/layout",["_BaseApp/src/core/app","src/layout"],(function(e,t){"use strict";var n,i,r;t&&t.id;return{setters:[function(e){n=e},function(e){i=e}],execute:function(){e("icon",r="far fa-user"),e("prepareMenu",(()=>{i.setOpenedMenu("Christian")})),e("tabTemplate",((e,t,i=!1)=>{var a,s,l,o;let d=n.inContext("App_offices"),c=n.inContext("App_office"),u=n.inContext("App_staffs"),p=n.inContext("App_staff"),m=n.inContext("App_staff_4"),f=n.inContext("App_rooms"),h=(n.inContext("App_room"),window.location.hash.startsWith("#/files/office")),$=window.location.hash.startsWith("#/file/office"),b=!d,g=!(d||c&&i),v=!(d||c&&i),_=!(d||c&&i);return`\n<div class="tabs is-boxed">\n <ul>\n <li ${d?"class='is-active'":""}>\n <a href="#/offices">\n <span class="icon"><i class="fas fa-list-ol" aria-hidden="true"></i></span>\n <span>${i18n("List")}</span>\n </a>\n </li>\n\n${b?`\n <li ${c?"class='is-active'":""}>\n <a href="#/office/${e}">\n <span class="icon"><i class="${r}" aria-hidden="true"></i></span>\n <span>${i18n("office Details")}</span>\n </a>\n </li>\n`:""}\n\n${g?`\n <li ${u?"class='is-active'":""}>\n <a href="#/staffs/${e}">\n <span class="icon"><i class="${r}" aria-hidden="true"></i></span>\n <span>Staff (${null!==(a=null==t?void 0:t.staffcount)&&void 0!==a?a:-1})</span>\n </a>\n </li>\n${p?`\n <li class="is-active">\n <a>\n <span class="icon"><i class="${r}" aria-hidden="true"></i></span>\n <span>Staff</span>\n </a>\n </li>\n`:""}\n <li ${m?"class='is-active'":""}>\n <a href="#/staffs_4/${e}">\n <span class="icon"><i class="${r}" aria-hidden="true"></i></span>\n <span>Staff/grid (${null!==(s=null==t?void 0:t.staffcount)&&void 0!==s?s:-1})</span>\n </a>\n </li>\n`:""}\n\n${v?`\n <li ${f?"class='is-active'":""}>\n <a href="#/rooms/${e}">\n <span class="icon"><i class="${r}" aria-hidden="true"></i></span>\n <span>Rooms (${null!==(l=null==t?void 0:t.roomcount)&&void 0!==l?l:-1})</span>\n </a>\n </li>\n`:""}\n\n${_?`\n <li ${h?"class='is-active'":""}>\n <a href="#/files/office/${e}">\n <span class="icon"><i class="far fa-paperclip" aria-hidden="true"></i></span>\n <span>${i18n("Files")} (${null!==(o=null==t?void 0:t.filecount)&&void 0!==o?o:-1})</span>\n </a>\n </li>\n${$?`\n <li ${$?"class='is-active'":""}>\n <a>\n <span class="icon"><i class="far fa-paperclip" aria-hidden="true"></i></span>\n <span>${i18n("File Details")}</span>\n </a>\n </li>\n`:""}\n`:""}\n\n </ul>\n</div>\n`})),e("buildTitle",((e,t)=>{var n;return null!==(n=null==e?void 0:e.title)&&void 0!==n?n:t})),e("buildSubtitle",((e,t)=>{var n;return null!==(n=null==e?void 0:e.subtitle)&&void 0!==n?n:t}))}}})),System.register("src/christian/offices",["_BaseApp/src/core/app","_BaseApp/src/core/router","src/permission","_BaseApp/src/lib-ts/misc","_BaseApp/src/theme/theme","_BaseApp/src/theme/pager","src/christian/layout"],(function(e,t){"use strict";var n,i,r,a,s,l,o,d,c,u,p,m,f,h,$,b,g,v,_,x;t&&t.id;return{setters:[function(e){n=e},function(e){i=e},function(e){r=e},function(e){a=e},function(e){s=e},function(e){l=e},function(e){o=e}],execute:function(){e("NS",d="App_offices"),c={list:[],pager:{pageNo:1,pageSize:20,sortColumn:"ID",sortDirection:"ASC",filter:{}}},m=()=>[].join(""),f=(e,t)=>`\n<tr class="${x(e.id)?"is-selected":""}" onclick="${d}.gotoDetail(${e.id});">\n <td class="js-index">${t}</td>\n <td>${a.toStaticText(e.id)}</td>\n <td>${a.toStaticText(e.name)}</td>\n <td>${a.toStaticText(e.location)}</td>\n <td>${a.toStaticDate(e.openedon)}</td>\n <td>${a.toStaticCheckbox(e.archive)}</td>\n</tr>`,h=(e,t)=>`\n<div class="table-container">\n<table class="table is-hoverable is-fullwidth">\n <thead>\n <tr>\n <th></th>\n ${l.sortableHeaderLink(t,d,i18n("ID"),"id","ASC")}\n ${l.sortableHeaderLink(t,d,i18n("NAME"),"name","ASC")}\n ${l.sortableHeaderLink(t,d,i18n("LOCATION"),"location","ASC")}\n ${l.sortableHeaderLink(t,d,i18n("OPENEDON"),"openedon","DESC")}\n ${l.sortableHeaderLink(t,d,i18n("ARCHIVE"),"archive","ASC")}\n </tr>\n </thead>\n <tbody>\n ${e}\n </tbody>\n</table>\n</div>\n`,$=(e,t,n,i,r)=>{let a=[];a.push(s.buttonAddNew(d,"#/office/new",i18n("Add New")));let l=s.renderButtons(a),c=o.buildTitle(u,i18n("offices title")),p=o.buildSubtitle(u,i18n("offices subtitle"));return`\n<form onsubmit="return false;">\n<input type="submit" style="display:none;" id="${d}_dummy_submit">\n\n<div class="js-fixed-heading">\n<div class="js-head">\n <div class="content js-uc-heading js-flex-space">\n <div>\n <div class="title"><i class="${o.icon}"></i> <span>${c}</span></div>\n <div class="subtitle">${p}</div>\n </div>\n <div>\n ${s.wrapContent("js-uc-actions",l)}\n </div>\n </div>\n ${s.wrapContent("js-uc-tabs",n)}\n</div>\n<div class="js-body">\n ${s.wrapContent("js-uc-notification",r)}\n ${s.wrapContent("js-uc-notification",i)}\n ${s.wrapContent("js-uc-pager",e)}\n ${s.wrapContent("js-uc-list",t)}\n</div>\n</div>\n\n</form>\n`},e("fetchState",b=e=>(i.registerDirtyExit(null),n.POST("/office/search",c.pager).then((e=>{c=e,u=e.xtra,{}})))),e("fetch",(e=>{e[0];n.prepareRender(d,i18n("offices")),o.prepareMenu(),b().then(n.render).catch(n.render)})),g=()=>{n.prepareRender(d,i18n("offices")),n.POST("/office/search",c.pager).then((e=>{c=e})).then(n.render).catch(n.render)},e("render",(()=>{if(!v())return"";if(n.fatalError())return n.fatalErrorTemplate();if(null==c||null==c.list||c.list instanceof Array==0)return n.warningTemplate()||n.unexpectedTemplate();let e=n.warningTemplate();const t=c.list.reduce(((e,t,n)=>{let i=l.rowNumber(c.pager,n);return e+f(t,i)}),"");r.getCurrentYear();const i=m(),a=l.searchTemplate(c.pager,d),s=l.render(c.pager,d,[20,50],a,i),u=h(t,c.pager),p=o.tabTemplate(null,null);return $(s,u,p,"",e)})),e("postRender",(()=>{v()})),e("inContext",v=()=>n.inContext(d)),_=e=>{null==p&&(p={id:e}),p.id=e},x=e=>null!=p&&p.id==e,e("goto",((e,t)=>{c.pager.pageNo=e,c.pager.pageSize=t,g()})),e("sortBy",((e,t)=>{c.pager.pageNo=1,c.pager.sortColumn=e,c.pager.sortDirection=t,g()})),e("search",(e=>{c.pager.searchText=e.value,c.pager.pageNo=1,g()})),e("gotoDetail",(e=>{_(e),i.goto(`#/office/${e}`)}))}}})),System.register("src/christian/staffs_3",["_BaseApp/src/core/app","_BaseApp/src/core/router","src/permission","_BaseApp/src/lib-ts/misc","_BaseApp/src/theme/theme","_BaseApp/src/theme/pager","src/admin/lookupdata"],(function(e,t){"use strict";var n,i,r,a,s,l,o,d,c,u,p,m,f,h,$,b,g,v,_,x;t&&t.id;return{setters:[function(e){n=e},function(e){i=e},function(e){r=e},function(e){a=e},function(e){s=e},function(e){l=e},function(e){o=e}],execute:function(){e("NS",d="App_staff_3"),"staff_3_table",c=["_editing","_deleting","_isNew","totalcount","officeid_text","jobid_text","created","by"],p={list:[],pager:{pageNo:1,pageSize:1e3,sortColumn:"ID",sortDirection:"ASC",filter:{}}},m={},f=!1,$=!1,b=(e,t,n,i,r)=>{let l=e.id,o='<td class="js-td-33">&nbsp;</td>';e._editing&&(o=`<td onclick="${d}.save()" class="js-td-33" title="Click to confirm"><i class="fa fa-check"></i></td>`),e._deleting&&(o=`<td onclick="${d}.drop()" class="js-td-33" title="Click to confirm"><i class="fa fa-check"></i></td>`),e._isNew&&(o=`<td onclick="${d}.create()" class="js-td-33" title="Click to confirm"><i class="fa fa-check"></i></td>`);let c=e._editing||e._deleting||e._isNew,u=!c,p=null!=n||null!=t&&l!=t||f&&!e._isNew,m=[];return(e._editing||e._isNew)&&m.push("js-not-same"),e._deleting&&m.push("js-strikeout"),e._isNew&&m.push("js-new"),p&&m.push("js-readonly"),`\n<tr data-id="${l}" class="${m.join(" ")}" style="cursor: pointer;">\n <td class="js-index">${i}</td>\n\n${u?`<td onclick="${d}.selectfordrop(${l})" class="has-text-danger js-td-33 js-drop" title="Click to mark for deletion"><i class='fas fa-times'></i></td>`:""}\n${c?`<td onclick="${d}.undo()" class="has-text-primary js-td-33" title="Click to undo"><i class='fa fa-undo'></i></td>`:""}\n${o}\n\n${p?`\n <td>${a.toStaticText(e.firstname)}</td>\n <td>${a.toStaticText(e.lastname)}</td>\n <td>${a.toStaticText(e.jobid_text)}</td>\n <td>${a.toStaticCheckbox(e.archive)}</td>\n`:`\n <td class="js-inline-input">${s.renderTextInline(d,`firstname_${l}`,e.firstname,50,!0)}</td>\n <td class="js-inline-input">${s.renderTextInline(d,`lastname_${l}`,e.lastname,50,!0)}</td>\n <td class="js-inline-select">${s.renderDropdownInline(d,`jobid_${l}`,r)}</td>\n <td class="js-inline-input">${s.renderCheckboxInline(d,`archive_${l}`,e.archive)}</td>\n`}\n</tr>`},g=(e,t,n)=>{let i=null!=n||null!=t||f;return`\n<div id="staff_3_table" class="table-container">\n<table class="table is-hoverable js-inline" style="width: 100px; table-layout: fixed;">\n <thead>\n <tr>\n <th style="width:99px" colspan="3"></th>\n <th style="width:100px">${i18n("FIRSTNAME")}</th>\n <th style="width:100px">${i18n("LASTNAME")}</th>\n <th style="width:100px">${i18n("JOB")}</th>\n <th style="width:100px">${i18n("ARCHIVE")}</th>\n </tr>\n </thead>\n <tbody>\n ${e}\n <tr class="js-insert-row ${i?"js-disabled":""}">\n <td class="js-index js-td-33">*</td>\n <td class="has-text-primary js-td-33 js-add" onclick="${d}.addNew()" title="Click to add a new row"><i class="fas fa-plus"></i></td>\n <td></td>\n <td colspan="4"></td>\n </tr>\n </tbody>\n</table>\n</div>\n`},v=e=>`\n${s.wrapContent("js-uc-list",e)}\n`,e("fetchState",((e,t)=>($=isNaN(e),h=t||h,f=!1,p.pager.filter.officeid=e,n.POST(`/staff/search/${e}/office`,p.pager).then((t=>{p=t,m=a.clone(p),u={officeid:e}})).then(o.fetch_job())))),e("preRender",(()=>{})),e("render",(()=>{if($)return"";let e,t;p.list.forEach(((n,i)=>{let r=m.list[i];n._editing=!a.same(n,r),n._editing&&(e=n.id),n._deleting&&(t=n.id)}));let n=r.getCurrentYear(),i=o.get_job(n);const d=p.list.reduce(((n,r,a)=>{let o=l.rowNumber(p.pager,a),d=s.renderOptions(i,r.jobid,!0);return n+b(r,e,t,o,d)}),""),c=g(d,e,t);return v(c)})),e("postRender",(()=>{})),e("inContext",(()=>n.inContext(d))),_=()=>{let e=a.clone(p);return e.list.forEach((e=>{let t=e.id;e.firstname=a.fromInputText(`${d}_firstname_${t}`,e.firstname),e.lastname=a.fromInputText(`${d}_lastname_${t}`,e.lastname),e.officeid=a.fromSelectNumber(`${d}_officeid_${t}`,e.officeid),e.jobid=a.fromSelectNumber(`${d}_jobid_${t}`,e.jobid),e.archive=a.fromInputCheckbox(`${d}_archive_${t}`,e.archive)})),e},x=()=>{document.getElementById(`${h}_dummy_submit`).click();let e=document.getElementsByTagName("form")[0];return e.classList.add("js-error"),e.checkValidity()},e("onchange",(e=>{p=_(),n.render()})),e("undo",(()=>{f&&(f=!1,m.list.pop()),p=a.clone(m),n.render()})),e("addNew",(()=>{let e=`/staff/new/${u.officeid}/office`;return n.GET(e).then((e=>{p.list.push(e.item),m=a.clone(p),f=!0,e.item._isNew=!0})).then(n.render).catch(n.render)})),e("create",(()=>{let e=_().list.find((e=>e._isNew));x()&&(n.prepareRender(),n.POST("/staff",a.createBlack(e,c)).then((()=>{m=a.clone(p),i.gotoCurrent(1)})).catch(n.render))})),e("save",(()=>{let e=_().list.find((e=>e._editing));x()&&(n.prepareRender(),n.PUT("/staff",a.createBlack(e,c)).then((()=>{m=a.clone(p),i.gotoCurrent(1)})).catch(n.render))})),e("selectfordrop",(e=>{(p=a.clone(m)).list.find((t=>t.id==e))._deleting=!0,n.render()})),e("drop",(()=>{n.prepareRender();let e=p.list.find((e=>e._deleting));n.DELETE("/staff",{id:e.id,updated:e.updated}).then((()=>{m=a.clone(p),i.gotoCurrent(1)})).catch(n.render)})),e("hasChanges",(()=>!a.same(m,p)))}}})),System.register("src/christian/office",["_BaseApp/src/core/app","_BaseApp/src/core/router","_BaseApp/src/lib-ts/misc","_BaseApp/src/theme/theme","_BaseApp/src/theme/calendar","src/permission","src/christian/layout","src/christian/staffs_3"],(function(e,t){"use strict";var n,i,r,a,s,l,o,d,c,u,p,m,f,h,$,b,g,v,_,x,T,y,S,w,C,A;t&&t.id;return{setters:[function(e){n=e},function(e){i=e},function(e){r=e},function(e){a=e},function(e){s=e},function(e){l=e},function(e){o=e},function(e){d=e}],execute:function(){e("NS",c="App_office"),u=["created","updatedby","by"],m={},f={},$=!1,b=!1,g=new s.Calendar(`${c}_openedon`),v=(e,t)=>`\n${$?"\n":`\n ${a.renderStaticField(r.toStaticNumber(e.id),i18n("ID"))}\n`}\n ${a.renderTextField(c,"name",e.name,i18n("NAME"),50,!0)}\n ${a.renderTextField(c,"location",e.location,i18n("LOCATION"),50,!0)}\n ${a.renderCalendarField(c,"openedon",g,i18n("OPENEDON"))}\n ${a.renderCheckboxField(c,"archive",e.archive,i18n("ARCHIVE"))}\n ${a.renderStaticHtmlField(t,"STAFFS_3")}\n ${a.renderBlame(e,$)}\n`,_=(e,t,n,i,r)=>{let s=$,l=!s,u=!s,p=!$,m=!$&&d.hasChanges(),f=[];f.push(a.buttonCancel(c)),s&&f.push(a.buttonInsert(c)),l&&f.push(a.buttonDelete(c)),u&&f.push(a.buttonAddNew(c,"#/office/new")),p&&f.push(a.buttonUpdate(c,m));let b=a.renderButtons(f),g=o.buildTitle(h,$?i18n("New office"):i18n("office Details")),v=o.buildSubtitle(h,i18n("office subtitle"));return`\n<form onsubmit="return false;" >\n<input type="submit" style="display:none;" id="${c}_dummy_submit">\n\n<div class="js-fixed-heading">\n<div class="js-head">\n <div class="content js-uc-heading js-flex-space">\n <div>\n <div class="title"><i class="${o.icon}"></i> <span>${g}</span></div>\n <div class="subtitle">${v}</div>\n </div>\n <div>\n ${a.wrapContent("js-uc-actions",b)}\n ${a.renderBlame(e,$)}\n </div>\n </div>\n ${a.wrapContent("js-uc-tabs",n)}\n</div>\n<div class="js-body">\n ${a.wrapContent("js-uc-notification",r)}\n ${a.wrapContent("js-uc-notification",i)}\n ${a.wrapContent("js-uc-details",t)}\n</div>\n</div>\n\n${a.renderModalDelete(`modalDelete_${c}`,`${c}.drop()`)}\n\n</form>\n`},x=()=>b?n.dirtyTemplate(c,r.changes(f,m)):"",e("fetchState",T=e=>($=isNaN(e),b=!1,i.registerDirtyExit(A),n.GET(`/office/${$?"new":e}`).then((t=>{m=t.item,f=r.clone(m),h=t.xtra,p={id:e},g.setState(m.openedon)})).then((()=>$?Promise.resolve():d.fetchState(e,c))))),e("fetch",(e=>{let t=+e[0];n.prepareRender(c,i18n("office")),o.prepareMenu(),T(t).then(n.render).catch(n.render)})),e("render",(()=>{if(!y())return"";if(n.fatalError())return n.fatalErrorTemplate();if(null==m||0==Object.keys(m).length)return n.warningTemplate()||n.unexpectedTemplate();l.getCurrentYear();$||d.preRender();let e=$?"":d.render();const t=v(m,e),i=o.tabTemplate(m.id,h,$),r=x(),a=n.warningTemplate();return _(m,t,i,a,r)})),e("postRender",(()=>{y()&&(g.postRender(),$||d.postRender(),n.setPageTitle($?i18n("New office"):h.title))})),e("inContext",y=()=>n.inContext(c)),S=()=>{let e=r.clone(m);return e.name=r.fromInputText(`${c}_name`,m.name),e.location=r.fromInputText(`${c}_location`,m.location),e.openedon=r.fromInputDateNullable(`${c}_openedon`,m.openedon),e.archive=r.fromInputCheckbox(`${c}_archive`,m.archive),e},w=e=>n.hasNoError(),C=()=>{document.getElementById(`${c}_dummy_submit`).click();let e=document.getElementsByTagName("form")[0];return e.classList.add("js-error"),e.checkValidity()},e("oncalendar",(e=>{g.id==e&&g.toggle()})),e("onchange",(e=>{m=S(),n.render()})),e("cancel",(()=>{i.goBackOrResume(b)})),e("create",(()=>{let e=S();if(C()){if(!w())return n.render();n.prepareRender(),n.POST("/office",r.createBlack(e,u)).then((e=>{let t=e;r.toastSuccessSave(),i.goto(`#/office/${t.id}`,10)})).catch(n.render)}})),e("save",((e=!1)=>{let t=S();if(C()){if(!w())return n.render();n.prepareRender(),n.PUT("/office",r.createBlack(t,u)).then((t=>{r.toastSuccessSave(),e?i.goto("#/offices/",100):i.goto(`#/office/${p.id}`,10)})).catch(n.render)}})),e("drop",(()=>{p.updated=m.updated,n.prepareRender(),n.DELETE("/office",p).then((e=>{i.goto("#/offices/",250)})).catch(n.render)})),A=()=>{let e=!r.same(f,S()),t=!$&&d.hasChanges();return(b=e||t)&&setTimeout((()=>{m=S(),n.render()}),10),b}}}})),System.register("src/christian/staffs",["_BaseApp/src/core/app","_BaseApp/src/core/router","src/permission","_BaseApp/src/lib-ts/misc","_BaseApp/src/theme/theme","_BaseApp/src/theme/pager","src/admin/lookupdata","src/christian/layout"],(function(e,t){"use strict";var n,i,r,a,s,l,o,d,c,u,p,m,f,h,$,b,g,v,_,x,T,y;t&&t.id;return{setters:[function(e){n=e},function(e){i=e},function(e){r=e},function(e){a=e},function(e){s=e},function(e){l=e},function(e){o=e},function(e){d=e}],execute:function(){e("NS",c="App_staffs"),p={list:[],pager:{pageNo:1,pageSize:20,sortColumn:"ID",sortDirection:"ASC",filter:{}}},h=e=>{let t=[];return t.push(s.renderDropdownFilter(c,"jobid",e,i18n("JOBID"))),t.join("")},$=(e,t)=>`\n<tr class="${y(e.id)?"is-selected":""}" onclick="${c}.gotoDetail(${e.id});">\n <td class="js-index">${t}</td>\n <td>${a.toStaticText(e.id)}</td>\n <td>${a.toStaticText(e.firstname)}</td>\n <td>${a.toStaticText(e.lastname)}</td>\n <td>${a.toStaticText(e.jobid_text)}</td>\n <td>${a.toStaticCheckbox(e.archive)}</td>\n <td>${a.toStaticText(e.plusorder)}</td>\n <td>${a.toStaticText(e.rn)}</td>\n</tr>`,b=(e,t)=>`\n<div class="table-container">\n<table class="table is-hoverable is-fullwidth">\n <thead>\n <tr>\n <th></th>\n ${l.sortableHeaderLink(t,c,i18n("ID"),"id","ASC")}\n ${l.sortableHeaderLink(t,c,i18n("FIRSTNAME"),"firstname","ASC")}\n ${l.sortableHeaderLink(t,c,i18n("LASTNAME"),"lastname","ASC")}\n ${l.sortableHeaderLink(t,c,i18n("JOBID_TEXT"),"jobid_text","ASC")}\n ${l.sortableHeaderLink(t,c,i18n("ARCHIVE"),"archive","ASC")}\n ${l.sortableHeaderLink(t,c,i18n("PLUSORDER"),"plusorder","ASC")}\n ${l.sortableHeaderLink(t,c,i18n("RN"),"rn","ASC")}\n </tr>\n </thead>\n <tbody>\n ${e}\n </tbody>\n</table>\n</div>\n`,g=(e,t,n,i,r)=>{let a=[];a.push(s.buttonAddNew(c,`#/staff/new/${u.officeid}`,i18n("Add New")));let l=s.renderButtons(a),o=d.buildTitle(m,i18n("staffs title")),p=d.buildSubtitle(m,i18n("staffs subtitle"));return`\n<form onsubmit="return false;">\n<input type="submit" style="display:none;" id="${c}_dummy_submit">\n\n<div class="js-fixed-heading">\n<div class="js-head">\n <div class="content js-uc-heading js-flex-space">\n <div>\n <div class="title"><i class="${d.icon}"></i> <span>${o}</span></div>\n <div class="subtitle">${p}</div>\n </div>\n <div>\n ${s.wrapContent("js-uc-actions",l)}\n </div>\n </div>\n ${s.wrapContent("js-uc-tabs",n)}\n</div>\n<div class="js-body">\n ${s.wrapContent("js-uc-notification",r)}\n ${s.wrapContent("js-uc-notification",i)}\n ${s.wrapContent("js-uc-pager",e)}\n ${s.wrapContent("js-uc-list",t)}\n</div>\n</div>\n\n</form>\n`},e("fetchState",v=e=>(i.registerDirtyExit(null),p.pager.filter.officeid=e,n.POST(`/staff/search/${e}/office`,p.pager).then((t=>{p=t,m=t.xtra,u={officeid:e}})).then(o.fetch_job()))),e("fetch",(e=>{let t=+e[0];n.prepareRender(c,i18n("staffs")),d.prepareMenu(),v(t).then(n.render).catch(n.render)})),_=()=>{n.prepareRender(c,i18n("staffs")),n.POST(`/staff/search/${u.officeid}/office`,p.pager).then((e=>{p=e})).then(n.render).catch(n.render)},e("render",(()=>{if(!x())return"";if(n.fatalError())return n.fatalErrorTemplate();if(null==p||null==p.list||p.list instanceof Array==0)return n.warningTemplate()||n.unexpectedTemplate();let e=n.warningTemplate();const t=p.list.reduce(((e,t,n)=>{let i=l.rowNumber(p.pager,n);return e+$(t,i)}),"");let i=r.getCurrentYear(),a=o.get_job(i),f=s.renderOptions(a,p.pager.filter.jobid,!0);const v=h(f),_=l.searchTemplate(p.pager,c),T=l.render(p.pager,c,[20,50],_,v),y=b(t,p.pager),S=d.tabTemplate(u.officeid,m);return g(T,y,S,"",e)})),e("postRender",(()=>{x()})),e("inContext",x=()=>n.inContext(c)),T=e=>{null==f&&(f={id:e}),f.id=e},y=e=>null!=f&&f.id==e,e("goto",((e,t)=>{p.pager.pageNo=e,p.pager.pageSize=t,_()})),e("sortBy",((e,t)=>{p.pager.pageNo=1,p.pager.sortColumn=e,p.pager.sortDirection=t,_()})),e("search",(e=>{p.pager.searchText=e.value,p.pager.pageNo=1,_()})),e("filter_jobid",(e=>{let t=e.options[e.selectedIndex].value,n=t.length>0?+t:void 0;n!=p.pager.filter.jobid&&(p.pager.filter.jobid=n,p.pager.pageNo=1,_())})),e("gotoDetail",(e=>{T(e),i.goto(`#/staff/${e}/${u.officeid}`)}))}}})),System.register("src/christian/staff",["_BaseApp/src/core/app","_BaseApp/src/core/router","_BaseApp/src/lib-ts/misc","_BaseApp/src/theme/theme","src/admin/lookupdata","src/permission","src/christian/layout"],(function(e,t){"use strict";var n,i,r,a,s,l,o,d,c,u,p,m,f,h,$,b,g,v,_,x,T,y,S,w;t&&t.id;return{setters:[function(e){n=e},function(e){i=e},function(e){r=e},function(e){a=e},function(e){s=e},function(e){l=e},function(e){o=e}],execute:function(){e("NS",d="App_staff"),c=["officeid_text","jobid_text","created","updatedby","by"],p={},m={},h=!1,$=!1,b=(e,t)=>`\n${h?"\n":`\n ${a.renderStaticField(r.toStaticNumber(e.id),i18n("ID"))}\n`}\n ${a.renderTextField(d,"firstname",e.firstname,i18n("FIRSTNAME"),50,!0)}\n ${a.renderTextField(d,"lastname",e.lastname,i18n("LASTNAME"),50,!0)}\n ${a.renderDropdownField(d,"jobid",t,i18n("JOBID"))}\n ${a.renderCheckboxField(d,"archive",e.archive,i18n("ARCHIVE"))}\n ${a.renderBlame(e,h)}\n`,g=(e,t,n,i,r)=>{let s=h,l=!s,c=!s,u=!h,m=[];m.push(a.buttonCancel(d)),s&&m.push(a.buttonInsert(d)),l&&m.push(a.buttonDelete(d)),c&&m.push(a.buttonAddNew(d,`#/staff/new/${p.officeid}`)),u&&m.push(a.buttonUpdate(d));let $=a.renderButtons(m),b=o.buildTitle(f,h?i18n("New staff"):i18n("staff Details")),g=o.buildSubtitle(f,`${i18n("Editing staff")}: <span>${e.firstname}</span>`);return`\n<form onsubmit="return false;" >\n<input type="submit" style="display:none;" id="${d}_dummy_submit">\n\n<div class="js-fixed-heading">\n<div class="js-head">\n <div class="content js-uc-heading js-flex-space">\n <div>\n <div class="title"><i class="${o.icon}"></i> <span>${b}</span></div>\n <div class="subtitle">${g}</div>\n </div>\n <div>\n ${a.wrapContent("js-uc-actions",$)}\n ${a.renderBlame(e,h)}\n </div>\n </div>\n ${a.wrapContent("js-uc-tabs",n)}\n</div>\n<div class="js-body">\n ${a.wrapContent("js-uc-notification",r)}\n ${a.wrapContent("js-uc-notification",i)}\n ${a.wrapContent("js-uc-details",t)}\n</div>\n</div>\n\n${a.renderModalDelete(`modalDelete_${d}`,`${d}.drop()`)}\n\n</form>\n`},v=()=>$?n.dirtyTemplate(d,r.changes(m,p)):"",e("fetchState",_=(e,t)=>(h=isNaN(e),$=!1,i.registerDirtyExit(w),n.GET(`/staff/${h?`new/${t}`:e}/office`).then((t=>{p=t.item,m=r.clone(p),f=t.xtra,u={id:e}})).then(s.fetch_job()))),e("fetch",(e=>{let t=+e[0],i=+e[1];n.prepareRender(d,i18n("staff")),o.prepareMenu(),_(t,i).then(n.render).catch(n.render)})),e("render",(()=>{if(!x())return"";if(n.fatalError())return n.fatalErrorTemplate();if(null==p||0==Object.keys(p).length)return n.warningTemplate()||n.unexpectedTemplate();let e=l.getCurrentYear(),t=s.get_job(e),i=a.renderOptions(t,p.jobid,!0);const r=b(p,i),d=o.tabTemplate(p.officeid,f,h),c=v(),u=n.warningTemplate();return g(p,r,d,u,c)})),e("postRender",(()=>{x()&&n.setPageTitle(h?i18n("New staff"):f.title)})),e("inContext",x=()=>n.inContext(d)),T=()=>{let e=r.clone(p);return e.firstname=r.fromInputText(`${d}_firstname`,p.firstname),e.lastname=r.fromInputText(`${d}_lastname`,p.lastname),e.officeid=r.fromSelectNumber(`${d}_officeid`,p.officeid),e.jobid=r.fromSelectNumber(`${d}_jobid`,p.jobid),e.archive=r.fromInputCheckbox(`${d}_archive`,p.archive),e},y=e=>n.hasNoError(),S=()=>{document.getElementById(`${d}_dummy_submit`).click();let e=document.getElementsByTagName("form")[0];return e.classList.add("js-error"),e.checkValidity()},e("onchange",(e=>{p=T(),n.render()})),e("cancel",(()=>{i.goBackOrResume($)})),e("create",(()=>{let e=T();if(S()){if(!y())return n.render();n.prepareRender(),n.POST("/staff",r.createBlack(e,c)).then((e=>{let t=e;r.toastSuccessSave(),i.goto(`#/staff/${t.id}`,10)})).catch(n.render)}})),e("save",((e=!1)=>{let t=T();if(S()){if(!y())return n.render();n.prepareRender(),n.PUT("/staff",r.createBlack(t,c)).then((t=>{r.toastSuccessSave(),e?i.goto(`#/staffs/${p.officeid}`,100):i.goto(`#/staff/${u.id}`,10)})).catch(n.render)}})),e("drop",(()=>{u.updated=p.updated,n.prepareRender(),n.DELETE("/staff",u).then((e=>{let t=p.officeid;i.goto(`#/staffs/${t}`,250)})).catch(n.render)})),w=()=>(($=!r.same(m,T()))&&setTimeout((()=>{p=T(),n.render()}),10),$)}}})),System.register("src/christian/layout_2",["_BaseApp/src/core/app","src/layout"],(function(e,t){"use strict";var n,i,r;t&&t.id;return{setters:[function(e){n=e},function(e){i=e}],execute:function(){e("icon",r="far fa-user"),e("prepareMenu",(()=>{i.setOpenedMenu("Christian")})),e("tabTemplate",((e,t,i=!1)=>{var a,s;let l=n.inContext("App_staffs_2"),o=n.inContext("App_staff_2"),d=n.inContext("App_equipments"),c=n.inContext("App_equipment"),u=window.location.hash.startsWith("#/files/staff"),p=window.location.hash.startsWith("#/file/staff"),m=!l,f=!(l||o&&i),h=!(l||o&&i);return`\n<div class="tabs is-boxed">\n <ul>\n <li ${l?"class='is-active'":""}>\n <a href="#/staffs_2">\n <span class="icon"><i class="fas fa-list-ol" aria-hidden="true"></i></span>\n <span>${i18n("List")}</span>\n </a>\n </li>\n\n${m?`\n <li ${o?"class='is-active'":""}>\n <a href="#/staff_2/${e}">\n <span class="icon"><i class="${r}" aria-hidden="true"></i></span>\n <span>${i18n("staff Details")}</span>\n </a>\n </li>\n`:""}\n\n${f?`\n <li ${d?"class='is-active'":""}>\n <a href="#/equipments/${e}">\n <span class="icon"><i class="${r}" aria-hidden="true"></i></span>\n <span>equipment (${null!==(a=null==t?void 0:t.equipmentcount)&&void 0!==a?a:-1})</span>\n </a>\n </li>\n${c?`\n <li class="is-active">\n <a>\n <span class="icon"><i class="${r}" aria-hidden="true"></i></span>\n <span>equipment</span>\n </a>\n </li>\n`:""}\n`:""}\n\n${h?`\n <li ${u?"class='is-active'":""}>\n <a href="#/files/staff/${e}">\n <span class="icon"><i class="far fa-paperclip" aria-hidden="true"></i></span>\n <span>${i18n("Files")} (${null!==(s=null==t?void 0:t.filecount)&&void 0!==s?s:-1})</span>\n </a>\n </li>\n${p?`\n <li ${p?"class='is-active'":""}>\n <a>\n <span class="icon"><i class="far fa-paperclip" aria-hidden="true"></i></span>\n <span>${i18n("File Details")}</span>\n </a>\n </li>\n`:""}\n`:""}\n\n </ul>\n</div>\n`})),e("buildTitle",((e,t)=>{var n;return null!==(n=null==e?void 0:e.title)&&void 0!==n?n:t})),e("buildSubtitle",((e,t)=>{var n;return null!==(n=null==e?void 0:e.subtitle)&&void 0!==n?n:t}))}}})),System.register("src/christian/staffs_2",["_BaseApp/src/core/app","_BaseApp/src/core/router","src/permission","_BaseApp/src/lib-ts/misc","_BaseApp/src/theme/theme","_BaseApp/src/theme/pager","src/admin/lookupdata","src/christian/layout_2"],(function(e,t){"use strict";var n,i,r,a,s,l,o,d,c,u,p,m,f,h,$,b,g,v,_,x,T;t&&t.id;return{setters:[function(e){n=e},function(e){i=e},function(e){r=e},function(e){a=e},function(e){s=e},function(e){l=e},function(e){o=e},function(e){d=e}],execute:function(){e("NS",c="App_staffs_2"),u={list:[],pager:{pageNo:1,pageSize:20,sortColumn:"ID",sortDirection:"ASC",filter:{}}},f=(e,t)=>{let n=[];return n.push(s.renderDropdownFilter(c,"officeid",e,i18n("OFFICEID"))),n.push(s.renderDropdownFilter(c,"jobid",t,i18n("JOBID"))),n.join("")},h=(e,t)=>`\n<tr class="${T(e.id)?"is-selected":""}" onclick="${c}.gotoDetail(${e.id});">\n <td class="js-index">${t}</td>\n <td>${a.toStaticText(e.id)}</td>\n <td>${a.toStaticText(e.firstname)}</td>\n <td>${a.toStaticText(e.lastname)}</td>\n <td>${a.toStaticText(e.officeid_text)}</td>\n <td>${a.toStaticText(e.jobid_text)}</td>\n <td>${a.toStaticCheckbox(e.archive)}</td>\n</tr>`,$=(e,t)=>`\n<div class="table-container">\n<table class="table is-hoverable is-fullwidth">\n <thead>\n <tr>\n <th></th>\n ${l.sortableHeaderLink(t,c,i18n("ID"),"id","ASC")}\n ${l.sortableHeaderLink(t,c,i18n("FIRSTNAME"),"firstname","ASC")}\n ${l.sortableHeaderLink(t,c,i18n("LASTNAME"),"lastname","ASC")}\n ${l.sortableHeaderLink(t,c,i18n("OFFICEID_TEXT"),"officeid_text","ASC")}\n ${l.sortableHeaderLink(t,c,i18n("JOBID_TEXT"),"jobid_text","ASC")}\n ${l.sortableHeaderLink(t,c,i18n("ARCHIVE"),"archive","ASC")}\n </tr>\n </thead>\n <tbody>\n ${e}\n </tbody>\n</table>\n</div>\n`,b=(e,t,n,i,r)=>{let a=[];a.push(s.buttonAddNew(c,"#/staff_2/new",i18n("Add New")));let l=s.renderButtons(a),o=d.buildTitle(p,i18n("staffs title")),u=d.buildSubtitle(p,i18n("staffs subtitle"));return`\n<form onsubmit="return false;">\n<input type="submit" style="display:none;" id="${c}_dummy_submit">\n\n<div class="js-fixed-heading">\n<div class="js-head">\n <div class="content js-uc-heading js-flex-space">\n <div>\n <div class="title"><i class="${d.icon}"></i> <span>${o}</span></div>\n <div class="subtitle">${u}</div>\n </div>\n <div>\n ${s.wrapContent("js-uc-actions",l)}\n </div>\n </div>\n ${s.wrapContent("js-uc-tabs",n)}\n</div>\n<div class="js-body">\n ${s.wrapContent("js-uc-notification",r)}\n ${s.wrapContent("js-uc-notification",i)}\n ${s.wrapContent("js-uc-pager",e)}\n ${s.wrapContent("js-uc-list",t)}\n</div>\n</div>\n\n</form>\n`},e("fetchState",g=e=>(i.registerDirtyExit(null),n.POST("/staff/search",u.pager).then((e=>{u=e,p=e.xtra,{}})).then(o.fetch_office()).then(o.fetch_job()))),e("fetch",(e=>{e[0];n.prepareRender(c,i18n("staffs")),d.prepareMenu(),g().then(n.render).catch(n.render)})),v=()=>{n.prepareRender(c,i18n("staffs")),n.POST("/staff/search",u.pager).then((e=>{u=e})).then(n.render).catch(n.render)},e("render",(()=>{if(!_())return"";if(n.fatalError())return n.fatalErrorTemplate();if(null==u||null==u.list||u.list instanceof Array==0)return n.warningTemplate()||n.unexpectedTemplate();let e=n.warningTemplate();const t=u.list.reduce(((e,t,n)=>{let i=l.rowNumber(u.pager,n);return e+h(t,i)}),"");let i=r.getCurrentYear(),a=o.get_office(i),p=o.get_job(i),m=s.renderOptions(a,u.pager.filter.officeid,!0),g=s.renderOptions(p,u.pager.filter.jobid,!0);const v=f(m,g),x=l.searchTemplate(u.pager,c),T=l.render(u.pager,c,[20,50],x,v),y=$(t,u.pager),S=d.tabTemplate(null,null);return b(T,y,S,"",e)})),e("postRender",(()=>{_()})),e("inContext",_=()=>n.inContext(c)),x=e=>{null==m&&(m={id:e}),m.id=e},T=e=>null!=m&&m.id==e,e("goto",((e,t)=>{u.pager.pageNo=e,u.pager.pageSize=t,v()})),e("sortBy",((e,t)=>{u.pager.pageNo=1,u.pager.sortColumn=e,u.pager.sortDirection=t,v()})),e("search",(e=>{u.pager.searchText=e.value,u.pager.pageNo=1,v()})),e("filter_officeid",(e=>{let t=e.options[e.selectedIndex].value,n=t.length>0?+t:void 0;n!=u.pager.filter.officeid&&(u.pager.filter.officeid=n,u.pager.pageNo=1,v())})),e("filter_jobid",(e=>{let t=e.options[e.selectedIndex].value,n=t.length>0?+t:void 0;n!=u.pager.filter.jobid&&(u.pager.filter.jobid=n,u.pager.pageNo=1,v())})),e("gotoDetail",(e=>{x(e),i.goto(`#/staff_2/${e}`)}))}}})),System.register("src/christian/staff_2",["_BaseApp/src/core/app","_BaseApp/src/core/router","_BaseApp/src/lib-ts/misc","_BaseApp/src/theme/theme","src/admin/lookupdata","src/permission","src/christian/layout_2"],(function(e,t){"use strict";var n,i,r,a,s,l,o,d,c,u,p,m,f,h,$,b,g,v,_,x,T,y,S,w;t&&t.id;return{setters:[function(e){n=e},function(e){i=e},function(e){r=e},function(e){a=e},function(e){s=e},function(e){l=e},function(e){o=e}],execute:function(){e("NS",d="App_staff_2"),c=["officeid_text","jobid_text","created","updatedby","by"],p={},m={},h=!1,$=!1,b=(e,t,n)=>`\n${h?"\n":`\n ${a.renderStaticField(r.toStaticNumber(e.id),i18n("ID"))}\n`}\n ${a.renderTextField(d,"firstname",e.firstname,i18n("FIRSTNAME"),50,!0)}\n ${a.renderTextField(d,"lastname",e.lastname,i18n("LASTNAME"),50,!0)}\n ${a.renderDropdownField(d,"officeid",t,i18n("OFFICEID"))}\n ${a.renderDropdownField(d,"jobid",n,i18n("JOBID"))}\n ${a.renderCheckboxField(d,"archive",e.archive,i18n("ARCHIVE"))}\n ${a.renderBlame(e,h)}\n`,g=(e,t,n,i,r)=>{let s=h,l=!s,c=!s,u=!h,p=[];p.push(a.buttonCancel(d)),s&&p.push(a.buttonInsert(d)),l&&p.push(a.buttonDelete(d)),c&&p.push(a.buttonAddNew(d,"#/staff_2/new")),u&&p.push(a.buttonUpdate(d));let m=a.renderButtons(p),$=o.buildTitle(f,h?i18n("New staff"):i18n("staff Details")),b=o.buildSubtitle(f,i18n("staff subtitle"));return`\n<form onsubmit="return false;" >\n<input type="submit" style="display:none;" id="${d}_dummy_submit">\n\n<div class="js-fixed-heading">\n<div class="js-head">\n <div class="content js-uc-heading js-flex-space">\n <div>\n <div class="title"><i class="${o.icon}"></i> <span>${$}</span></div>\n <div class="subtitle">${b}</div>\n </div>\n <div>\n ${a.wrapContent("js-uc-actions",m)}\n ${a.renderBlame(e,h)}\n </div>\n </div>\n ${a.wrapContent("js-uc-tabs",n)}\n</div>\n<div class="js-body">\n ${a.wrapContent("js-uc-notification",r)}\n ${a.wrapContent("js-uc-notification",i)}\n ${a.wrapContent("js-uc-details",t)}\n</div>\n</div>\n\n${a.renderModalDelete(`modalDelete_${d}`,`${d}.drop()`)}\n\n</form>\n`},v=()=>$?n.dirtyTemplate(d,r.changes(m,p)):"",e("fetchState",_=e=>(h=isNaN(e),$=!1,i.registerDirtyExit(w),n.GET(`/staff/${h?"new":e}`).then((t=>{p=t.item,m=r.clone(p),f=t.xtra,u={id:e}})).then(s.fetch_office()).then(s.fetch_job()))),e("fetch",(e=>{let t=+e[0];n.prepareRender(d,i18n("staff")),o.prepareMenu(),_(t).then(n.render).catch(n.render)})),e("render",(()=>{if(!x())return"";if(n.fatalError())return n.fatalErrorTemplate();if(null==p||0==Object.keys(p).length)return n.warningTemplate()||n.unexpectedTemplate();let e=l.getCurrentYear(),t=s.get_office(e),i=s.get_job(e),r=a.renderOptions(t,p.officeid,!0),d=a.renderOptions(i,p.jobid,!0);const c=b(p,r,d),u=o.tabTemplate(p.id,f,h),m=v(),$=n.warningTemplate();return g(p,c,u,$,m)})),e("postRender",(()=>{x()&&n.setPageTitle(h?i18n("New staff"):f.title)})),e("inContext",x=()=>n.inContext(d)),T=()=>{let e=r.clone(p);return e.firstname=r.fromInputText(`${d}_firstname`,p.firstname),e.lastname=r.fromInputText(`${d}_lastname`,p.lastname),e.officeid=r.fromSelectNumber(`${d}_officeid`,p.officeid),e.jobid=r.fromSelectNumber(`${d}_jobid`,p.jobid),e.archive=r.fromInputCheckbox(`${d}_archive`,p.archive),e},y=e=>n.hasNoError(),S=()=>{document.getElementById(`${d}_dummy_submit`).click();let e=document.getElementsByTagName("form")[0];return e.classList.add("js-error"),e.checkValidity()},e("onchange",(e=>{p=T(),n.render()})),e("cancel",(()=>{i.goBackOrResume($)})),e("create",(()=>{let e=T();if(S()){if(!y())return n.render();n.prepareRender(),n.POST("/staff",r.createBlack(e,c)).then((e=>{let t=e;r.toastSuccessSave(),i.goto(`#/staff_2/${t.id}`,10)})).catch(n.render)}})),e("save",((e=!1)=>{let t=T();if(S()){if(!y())return n.render();n.prepareRender(),n.PUT("/staff",r.createBlack(t,c)).then((t=>{r.toastSuccessSave(),e?i.goto("#/staffs_2/",100):i.goto(`#/staff_2/${u.id}`,10)})).catch(n.render)}})),e("drop",(()=>{u.updated=p.updated,n.prepareRender(),n.DELETE("/staff",u).then((e=>{i.goto("#/staffs_2/",250)})).catch(n.render)})),w=()=>(($=!r.same(m,T()))&&setTimeout((()=>{p=T(),n.render()}),10),$)}}})),System.register("src/christian/staffs_4",["_BaseApp/src/core/app","_BaseApp/src/core/router","src/permission","_BaseApp/src/lib-ts/misc","_BaseApp/src/theme/theme","_BaseApp/src/theme/pager","_BaseApp/src/theme/calendar","src/admin/lookupdata","src/christian/layout"],(function(e,t){"use strict";var n,i,r,a,s,l,o,d,c,u,p,m,f,h,$,b,g,v,_,x,T,y,S,w,C,A,E,I,N,k,j,R,D,L;t&&t.id;return{setters:[function(e){n=e},function(e){i=e},function(e){r=e},function(e){a=e},function(e){s=e},function(e){l=e},function(e){o=e},function(e){d=e},function(e){c=e}],execute:function(){e("NS",u="App_staff_4"),"staff_4_table",p=["_editing","_deleting","_isNew","totalcount","officeid_text","jobid_text","created","by"],f={list:[],pager:{pageNo:1,pageSize:n.getPageState(u,"pageSize",20),sortColumn:"ID",sortDirection:"ASC",filter:{}}},h={},b=!1,g=!1,v=e=>{let t=[];return t.push(s.renderDropdownFilter(u,"jobid",e,i18n("JOBID"))),t.join("")},_=(e,t,n,i)=>{let r=e.id,a='<td class="js-td-33">&nbsp;</td>';e._editing&&(a=`<td onclick="${u}.save()" class="js-td-33" title="Click to confirm"><i class="fa fa-check"></i></td>`),e._deleting&&(a=`<td onclick="${u}.drop()" class="js-td-33" title="Click to confirm"><i class="fa fa-check"></i></td>`),e._isNew&&(a=`<td onclick="${u}.create()" class="js-td-33" title="Click to confirm"><i class="fa fa-check"></i></td>`);let s=e._editing||e._deleting||e._isNew,l=!s,o=null!=n||null!=t&&r!=t||b&&!e._isNew||!1,d=[];return(e._editing||e._isNew)&&d.push("js-not-same"),e._deleting&&d.push("js-strikeout"),e._isNew&&d.push("js-new"),o&&d.push("js-readonly"),`\n<tr data-id="${r}" class="${d.join(" ")}" style="cursor: pointer;">\n <td class="js-index">${i}</td>\n\n${l?`<td onclick="${u}.selectfordrop(${r})" class="has-text-danger js-td-33 js-drop" title="Click to mark for deletion"><i class='fas fa-times'></i></td>`:""}\n${s?`<td onclick="${u}.undo()" class="has-text-primary js-td-33" title="Click to undo"><i class='fa fa-undo'></i></td>`:""}\n${a}\n\n</tr>`},x=(e,t,n,i)=>{let r=e.id,l=null!=n||null!=t&&r!=t||b&&!e._isNew||!1,o=[];return(e._editing||e._isNew)&&o.push("js-not-same"),e._deleting&&o.push("js-strikeout"),e._isNew&&o.push("js-new"),l&&o.push("js-readonly"),`\n<tr data-id="${r}" class="${o.join(" ")}" style="cursor: pointer;">\n${l?`\n <td><div class="js-truncate" style="width:100px;">${a.toStaticText(e.firstname)}</div></td>\n <td><div class="js-truncate" style="width:100px;">${a.toStaticText(e.lastname)}</div></td>\n <td><div class="js-truncate" style="width:100px;">${a.toStaticText(e.jobid_text)}</div></td>\n <td>${a.toStaticCheckbox(e.archive)}</td>\n`:`\n <td class="js-inline-input">${s.renderTextInline(u,`firstname_${r}`,e.firstname,50,!0)}</td>\n <td class="js-inline-input">${s.renderTextInline(u,`lastname_${r}`,e.lastname,50,!0)}</td>\n <td class="js-inline-select">${s.renderDropdownInline(u,`jobid_${r}`,i)}</td>\n <td class="js-inline-input">${s.renderCheckboxInline(u,`archive_${r}`,e.archive)}</td>\n`}\n</tr>`},T=(e,t,n)=>{let i=null!=n||null!=t||b;return i=i||!1,`\n<style>.js-td-33 { width: 33px; }</style>\n<div>\n<table class="table is-hoverable js-inline" style="width: 10px; table-layout: fixed;">\n <thead>\n <tr>\n <th style="width:99px" colspan="3">&nbsp;</th>\n </tr>\n </thead>\n <tbody>\n ${e}\n <tr class="js-insert-row ${i?"js-noclick":""}">\n <td class="js-index js-td-33">*</td>\n <td class="has-text-primary js-td-33 js-add" onclick="${u}.addNew()" title="Click to add a new row"><i class="fas fa-plus"></i></td>\n <td></td>\n </tr>\n </tbody>\n</table>\n</div>\n`},y=(e,t)=>`\n<div id="staff_4_table" class="table-container">\n<table class="table is-hoverable js-inline" style="width: 100px; table-layout: fixed;">\n <thead>\n <tr>\n ${l.sortableHeaderLink(t,u,i18n("FIRSTNAME"),"firstname","ASC","width:100px")}\n ${l.sortableHeaderLink(t,u,i18n("LASTNAME"),"lastname","ASC","width:100px")}\n ${l.sortableHeaderLink(t,u,i18n("JOB"),"jobid_text","ASC","width:100px")}\n ${l.sortableHeaderLink(t,u,i18n("ARCHIVE"),"archive","ASC","width:100px")}\n </tr>\n </thead>\n <tbody>\n ${e}\n <tr class="js-insert-row">\n <td colspan="8">&nbsp;</td>\n </tr>\n </tbody>\n</table>\n</div>\n`,S=(e,t,n,i,r,a,l)=>{let o=s.renderButtons([]),d=c.buildTitle(e,i18n("AAA: AAA")),p=c.buildSubtitle(e,i18n("AAA")),m=`<div style="display: flex;">\n <div>${n}</div>\n <div style="width:calc(100% - 99px)">${i}</div>\n</div>`;return`\n<form onsubmit="return false;">\n<input type="submit" style="display:none;" id="${u}_dummy_submit">\n\n<div class="js-fixed-heading">\n<div class="js-head">\n <div class="content js-uc-heading js-flex-space">\n <div>\n <div class="title"><i class="${c.icon}"></i> <span>${d}</span></div>\n <div class="subtitle">${p}</div>\n </div>\n <div>\n ${s.wrapContent("js-uc-actions",o)}\n </div>\n </div>\n ${s.wrapContent("js-uc-tabs",r)}\n</div>\n<div class="js-body">\n ${s.wrapContent("js-uc-notification",l)}\n ${s.wrapContent("js-uc-notification",a)}\n ${s.wrapContent("js-uc-pager",t)}\n ${s.wrapContent("js-uc-list",m)}\n</div>\n</div>\n\n</form>\n`},w=()=>g?n.dirtyTemplate(u,null):"",e("fetchState",C=e=>(b=!1,g=!1,i.registerDirtyExit(j),f.pager.filter.officeid=e,n.POST(`/staff/search/${e}/office`,f.pager).then((t=>{f=t,h=a.clone(f),m={officeid:e,id:void 0},$=t.xtra})).then(d.fetch_job()))),e("fetch",(e=>{let t=+e[0];n.prepareRender(u,i18n("staff")),c.prepareMenu(),C(t).then(n.render).catch(n.render)})),A=()=>{n.prepareRender(u,i18n("staff")),R(),n.POST(`/staff/search/${m.officeid}/office`,f.pager).then((e=>{f=e,h=a.clone(f)})).then(n.render).catch(n.render)},e("render",(()=>{if(!E())return"";if(n.fatalError())return n.fatalErrorTemplate();if(null==f||null==f.list||f.list instanceof Array==0)return n.warningTemplate()||n.unexpectedTemplate();let e,t;f.list.forEach(((n,i)=>{let r=h.list[i];n._editing=!a.same(n,r),n._editing&&(e=n.id),n._deleting&&(t=n.id)}));let i=r.getCurrentYear(),o=d.get_job(i);const p=f.list.reduce(((n,i,r)=>{let a=l.rowNumber(f.pager,r);return n+_(i,e,t,a)}),""),b=f.list.reduce(((n,i)=>{let r=s.renderOptions(o,i.jobid,!0);return n+x(i,e,t,r)}),"");let g=s.renderOptions(o,f.pager.filter.jobid,!0);const C=v(g),A=l.searchTemplate(f.pager,u),I=l.render(f.pager,u,[10,20,50],A,C),N=T(p,e,t),k=y(b,f.pager),j=c.tabTemplate(m.officeid,$),R=w();let D=n.warningTemplate();return S($,I,N,k,j,R,D)})),e("postRender",(()=>{E()})),e("inContext",E=()=>n.inContext(u)),e("goto",((e,t)=>{f.pager.pageNo=e,f.pager.pageSize=n.setPageState(u,"pageSize",t),A()})),e("sortBy",((e,t)=>{f.pager.pageNo=1,f.pager.sortColumn=e,f.pager.sortDirection=t,A()})),e("search",(e=>{f.pager.searchText=e.value,f.pager.pageNo=1,A()})),e("filter_jobid",(e=>{let t=e.options[e.selectedIndex].value,n=t.length>0?+t:void 0;n!=f.pager.filter.jobid&&(f.pager.filter.jobid=n,f.pager.pageNo=1,A())})),I=()=>{let e=a.clone(f);return e.list.forEach((e=>{let t=e.id;e.firstname=a.fromInputText(`${u}_firstname_${t}`,e.firstname),e.lastname=a.fromInputText(`${u}_lastname_${t}`,e.lastname),e.officeid=a.fromSelectNumber(`${u}_officeid_${t}`,e.officeid),e.jobid=a.fromSelectNumber(`${u}_jobid_${t}`,e.jobid),e.archive=a.fromInputCheckbox(`${u}_archive_${t}`,e.archive)})),e},N=e=>n.hasNoError(),k=()=>{document.getElementById(`${u}_dummy_submit`).click();let e=document.getElementsByTagName("form")[0];return e.classList.add("js-error"),e.checkValidity()},e("onchange",(e=>{f=I();let t=e.id.replace(`${u}_`,"").split("_"),i=(t[0],+t[1]);f.list.find((e=>e.id==i));n.render()})),e("ondate",((e,t)=>o.eventMan(u,e,t))),e("undo",(()=>{b&&(b=!1,h.list.pop()),f=a.clone(h),g=!1,n.render()})),e("addNew",(()=>{let e=`/staff/new/${m.officeid}/office`;return n.GET(e).then((e=>{f.list.push(e.item),h=a.clone(f),b=!0,e.item._isNew=!0})).then(n.render).catch(n.render)})),e("create",(()=>{let e=I().list.find((e=>e._isNew));if(k()){if(!N())return n.render();n.prepareRender(),n.POST("/staff",a.createBlack(e,p)).then((e=>{D(e.id),h=a.clone(f),i.gotoCurrent(1)})).catch(n.render)}})),e("save",(()=>{let e=I().list.find((e=>e._editing));if(k()){if(!N())return n.render();n.prepareRender(),n.PUT("/staff",a.createBlack(e,p)).then((()=>{h=a.clone(f),i.gotoCurrent(1)})).catch(n.render)}})),e("selectfordrop",(e=>{(f=a.clone(h)).list.find((t=>t.id==e))._deleting=!0,n.render()})),e("drop",(()=>{n.prepareRender();let e=f.list.find((e=>e._deleting));n.DELETE("/staff",{id:e.id,updated:e.updated}).then((()=>{L(e.id),h=a.clone(f),i.gotoCurrent(1)})).catch(n.render)})),e("hasChanges",(()=>!a.same(h,f))),j=()=>((g=!a.same(h,I()))&&setTimeout((()=>{f=I(),n.render()}),10),g),R=()=>{f.pager.filter.plus=void 0,b=!1},D=e=>{f.pager.filter.plus?f.pager.filter.plus+=`,${e}`:f.pager.filter.plus=e.toString()},L=e=>{}}}})),System.register("src/christian/equipments",["_BaseApp/src/core/app","_BaseApp/src/core/router","src/permission","_BaseApp/src/lib-ts/misc","_BaseApp/src/theme/theme","_BaseApp/src/theme/pager","src/admin/lookupdata","src/christian/layout_2"],(function(e,t){"use strict";var n,i,r,a,s,l,o,d,c,u,p,m,f,h,$,b,g,v,_,x,T,y;t&&t.id;return{setters:[function(e){n=e},function(e){i=e},function(e){r=e},function(e){a=e},function(e){s=e},function(e){l=e},function(e){o=e},function(e){d=e}],execute:function(){e("NS",c="App_equipments"),p={list:[],pager:{pageNo:1,pageSize:20,sortColumn:"ID",sortDirection:"ASC",filter:{}}},h=e=>{let t=[];return t.push(s.renderDropdownFilter(c,"catluid",e,i18n("CATLUID"))),t.join("")},$=(e,t)=>`\n<tr class="${y(e.id)?"is-selected":""}" onclick="${c}.gotoDetail(${e.id});">\n <td class="js-index">${t}</td>\n <td>${a.toStaticText(e.id)}</td>\n <td>${a.toStaticText(e.name)}</td>\n <td>${a.toStaticText(e.catluid_text)}</td>\n <td>${a.toStaticText(e.price)}</td>\n <td>${a.toStaticCheckbox(e.archive)}</td>\n <td>${a.toStaticText(e.plusorder)}</td>\n <td>${a.toStaticText(e.rn)}</td>\n</tr>`,b=(e,t)=>`\n<div class="table-container">\n<table class="table is-hoverable is-fullwidth">\n <thead>\n <tr>\n <th></th>\n ${l.sortableHeaderLink(t,c,i18n("ID"),"id","ASC")}\n ${l.sortableHeaderLink(t,c,i18n("NAME"),"name","ASC")}\n ${l.sortableHeaderLink(t,c,i18n("CATLUID_TEXT"),"catluid_text","ASC")}\n ${l.sortableHeaderLink(t,c,i18n("PRICE"),"price","ASC")}\n ${l.sortableHeaderLink(t,c,i18n("ARCHIVE"),"archive","ASC")}\n ${l.sortableHeaderLink(t,c,i18n("PLUSORDER"),"plusorder","ASC")}\n ${l.sortableHeaderLink(t,c,i18n("RN"),"rn","ASC")}\n </tr>\n </thead>\n <tbody>\n ${e}\n </tbody>\n</table>\n</div>\n`,g=(e,t,n,i,r)=>{let a=[];a.push(s.buttonAddNew(c,`#/equipment/new/${u.staffid}`,i18n("Add New")));let l=s.renderButtons(a),o=d.buildTitle(m,i18n("equipments title")),p=d.buildSubtitle(m,i18n("equipments subtitle"));return`\n<form onsubmit="return false;">\n<input type="submit" style="display:none;" id="${c}_dummy_submit">\n\n<div class="js-fixed-heading">\n<div class="js-head">\n <div class="content js-uc-heading js-flex-space">\n <div>\n <div class="title"><i class="${d.icon}"></i> <span>${o}</span></div>\n <div class="subtitle">${p}</div>\n </div>\n <div>\n ${s.wrapContent("js-uc-actions",l)}\n </div>\n </div>\n ${s.wrapContent("js-uc-tabs",n)}\n</div>\n<div class="js-body">\n ${s.wrapContent("js-uc-notification",r)}\n ${s.wrapContent("js-uc-notification",i)}\n ${s.wrapContent("js-uc-pager",e)}\n ${s.wrapContent("js-uc-list",t)}\n</div>\n</div>\n\n</form>\n`},e("fetchState",v=e=>(i.registerDirtyExit(null),p.pager.filter.staffid=e,n.POST(`/equipment/search/${e}/staff`,p.pager).then((t=>{p=t,m=t.xtra,u={staffid:e}})).then(o.fetch_cat()))),e("fetch",(e=>{let t=+e[0];n.prepareRender(c,i18n("equipments")),d.prepareMenu(),v(t).then(n.render).catch(n.render)})),_=()=>{n.prepareRender(c,i18n("equipments")),n.POST(`/equipment/search/${u.staffid}/staff`,p.pager).then((e=>{p=e})).then(n.render).catch(n.render)},e("render",(()=>{if(!x())return"";if(n.fatalError())return n.fatalErrorTemplate();if(null==p||null==p.list||p.list instanceof Array==0)return n.warningTemplate()||n.unexpectedTemplate();let e=n.warningTemplate();const t=p.list.reduce(((e,t,n)=>{let i=l.rowNumber(p.pager,n);return e+$(t,i)}),"");let i=r.getCurrentYear(),a=o.get_cat(i),f=s.renderOptions(a,p.pager.filter.catluid,!0);const v=h(f),_=l.searchTemplate(p.pager,c),T=l.render(p.pager,c,[20,50],_,v),y=b(t,p.pager),S=d.tabTemplate(u.staffid,m);return g(T,y,S,"",e)})),e("postRender",(()=>{x()})),e("inContext",x=()=>n.inContext(c)),T=e=>{null==f&&(f={id:e}),f.id=e},y=e=>null!=f&&f.id==e,e("goto",((e,t)=>{p.pager.pageNo=e,p.pager.pageSize=t,_()})),e("sortBy",((e,t)=>{p.pager.pageNo=1,p.pager.sortColumn=e,p.pager.sortDirection=t,_()})),e("search",(e=>{p.pager.searchText=e.value,p.pager.pageNo=1,_()})),e("filter_catluid",(e=>{let t=e.options[e.selectedIndex].value,n=t.length>0?+t:void 0;n!=p.pager.filter.catluid&&(p.pager.filter.catluid=n,p.pager.pageNo=1,_())})),e("gotoDetail",(e=>{T(e),i.goto(`#/equipment/${e}/${u.staffid}`)}))}}})),System.register("src/christian/equipment",["_BaseApp/src/core/app","_BaseApp/src/core/router","_BaseApp/src/lib-ts/misc","_BaseApp/src/theme/theme","src/admin/lookupdata","src/permission","src/christian/layout_2"],(function(e,t){"use strict";var n,i,r,a,s,l,o,d,c,u,p,m,f,h,$,b,g,v,_,x,T,y,S,w;t&&t.id;return{setters:[function(e){n=e},function(e){i=e},function(e){r=e},function(e){a=e},function(e){s=e},function(e){l=e},function(e){o=e}],execute:function(){e("NS",d="App_equipment"),c=["staffid_text","catluid_text","created","updatedby","by"],p={},m={},h=!1,$=!1,b=(e,t)=>`\n${h?"\n":`\n ${a.renderStaticField(r.toStaticNumber(e.id),i18n("ID"))}\n`}\n ${a.renderTextField(d,"name",e.name,i18n("NAME"),50,!0)}\n ${a.renderDropdownField(d,"catluid",t,i18n("CATLUID"))}\n ${a.renderNumberField(d,"price",e.price,i18n("PRICE"))}\n ${a.renderCheckboxField(d,"archive",e.archive,i18n("ARCHIVE"))}\n ${a.renderBlame(e,h)}\n`,g=(e,t,n,i,r)=>{let s=h,l=!s,c=!s,u=!h,m=[];m.push(a.buttonCancel(d)),s&&m.push(a.buttonInsert(d)),l&&m.push(a.buttonDelete(d)),c&&m.push(a.buttonAddNew(d,`#/equipment/new/${p.staffid}`)),u&&m.push(a.buttonUpdate(d));let $=a.renderButtons(m),b=o.buildTitle(f,h?i18n("New equipment"):i18n("equipment Details")),g=o.buildSubtitle(f,`${i18n("Editing equipment")}: <span>${e.name}</span>`);return`\n<form onsubmit="return false;" >\n<input type="submit" style="display:none;" id="${d}_dummy_submit">\n\n<div class="js-fixed-heading">\n<div class="js-head">\n <div class="content js-uc-heading js-flex-space">\n <div>\n <div class="title"><i class="${o.icon}"></i> <span>${b}</span></div>\n <div class="subtitle">${g}</div>\n </div>\n <div>\n ${a.wrapContent("js-uc-actions",$)}\n ${a.renderBlame(e,h)}\n </div>\n </div>\n ${a.wrapContent("js-uc-tabs",n)}\n</div>\n<div class="js-body">\n ${a.wrapContent("js-uc-notification",r)}\n ${a.wrapContent("js-uc-notification",i)}\n ${a.wrapContent("js-uc-details",t)}\n</div>\n</div>\n\n${a.renderModalDelete(`modalDelete_${d}`,`${d}.drop()`)}\n\n</form>\n`},v=()=>$?n.dirtyTemplate(d,r.changes(m,p)):"",e("fetchState",_=(e,t)=>(h=isNaN(e),$=!1,i.registerDirtyExit(w),n.GET(`/equipment/${h?`new/${t}`:e}/staff`).then((t=>{p=t.item,m=r.clone(p),f=t.xtra,u={id:e}})).then(s.fetch_cat()))),e("fetch",(e=>{let t=+e[0],i=+e[1];n.prepareRender(d,i18n("equipment")),o.prepareMenu(),_(t,i).then(n.render).catch(n.render)})),e("render",(()=>{if(!x())return"";if(n.fatalError())return n.fatalErrorTemplate();if(null==p||0==Object.keys(p).length)return n.warningTemplate()||n.unexpectedTemplate();let e=l.getCurrentYear(),t=s.get_cat(e),i=a.renderOptions(t,p.catluid,!0);const r=b(p,i),d=o.tabTemplate(p.staffid,f,h),c=v(),u=n.warningTemplate();return g(p,r,d,u,c)})),e("postRender",(()=>{x()&&n.setPageTitle(h?i18n("New equipment"):f.title)})),e("inContext",x=()=>n.inContext(d)),T=()=>{let e=r.clone(p);return e.staffid=r.fromSelectNumber(`${d}_staffid`,p.staffid),e.name=r.fromInputText(`${d}_name`,p.name),e.catluid=r.fromSelectNumber(`${d}_catluid`,p.catluid),e.price=r.fromInputNumberNullable(`${d}_price`,p.price),e.archive=r.fromInputCheckbox(`${d}_archive`,p.archive),e},y=e=>n.hasNoError(),S=()=>{document.getElementById(`${d}_dummy_submit`).click();let e=document.getElementsByTagName("form")[0];return e.classList.add("js-error"),e.checkValidity()},e("onchange",(e=>{p=T(),n.render()})),e("cancel",(()=>{i.goBackOrResume($)})),e("create",(()=>{let e=T();if(S()){if(!y())return n.render();n.prepareRender(),n.POST("/equipment",r.createBlack(e,c)).then((e=>{let t=e;r.toastSuccessSave(),i.goto(`#/equipment/${t.id}`,10)})).catch(n.render)}})),e("save",((e=!1)=>{let t=T();if(S()){if(!y())return n.render();n.prepareRender(),n.PUT("/equipment",r.createBlack(t,c)).then((t=>{r.toastSuccessSave(),e?i.goto(`#/equipments/${p.staffid}`,100):i.goto(`#/equipment/${u.id}`,10)})).catch(n.render)}})),e("drop",(()=>{u.updated=p.updated,n.prepareRender(),n.DELETE("/equipment",u).then((e=>{let t=p.staffid;i.goto(`#/equipments/${t}`,250)})).catch(n.render)})),w=()=>{let e=!r.same(m,T());return($=e||!1)&&setTimeout((()=>{p=T(),n.render()}),10),$}}}})),System.register("src/christian/main",["_BaseApp/src/core/router","src/christian/offices","src/christian/office","src/christian/staffs","src/christian/staff","src/christian/staffs_2","src/christian/staff_2","src/christian/staffs_3","src/christian/staffs_4","src/christian/equipments","src/christian/equipment"],(function(e,t){"use strict";var n,i,r,a,s,l,o,d,c,u,p;t&&t.id;return{setters:[function(e){n=e},function(e){i=e},function(e){r=e},function(e){a=e},function(e){s=e},function(e){l=e},function(e){o=e},function(e){d=e},function(e){c=e},function(e){u=e},function(e){p=e}],execute:function(){window[i.NS]=i,window[r.NS]=r,window[a.NS]=a,window[s.NS]=s,window[l.NS]=l,window[o.NS]=o,window[d.NS]=d,window[c.NS]=c,window[u.NS]=u,window[p.NS]=p,e("startup",(()=>{n.addRoute("^#/offices/?(.*)?$",i.fetch),n.addRoute("^#/office/?(.*)?$",r.fetch),n.addRoute("^#/staffs_2/?(.*)?$",l.fetch),n.addRoute("^#/staff_2/?(.*)?$",o.fetch),n.addRoute("^#/staffs_4/?(.*)?$",c.fetch),n.addRoute("^#/staffs/?(.*)?$",a.fetch),n.addRoute("^#/staff/?(.*)?$",s.fetch),n.addRoute("^#/equipments/?(.*)?$",u.fetch),n.addRoute("^#/equipment/?(.*)?$",p.fetch)})),e("render",(()=>`\n<div>\n ${i.render()}\n ${r.render()}\n ${a.render()}\n ${s.render()}\n ${l.render()}\n ${o.render()}\n ${c.render()}\n ${u.render()}\n ${p.render()}</div>\n`)),e("postRender",(()=>{i.postRender(),r.postRender(),a.postRender(),s.postRender(),l.postRender(),o.postRender(),c.postRender(),u.postRender(),p.postRender()}))}}})),System.register("src/fournisseur/layout",["_BaseApp/src/core/app","src/layout"],(function(e,t){"use strict";var n,i;t&&t.id;return{setters:[function(e){n=e},function(e){i=e}],execute:function(){e("icon","far fa-user"),e("prepareMenu",(()=>{i.setOpenedMenu("Fournisseur-Propriétaires")})),e("tabTemplate",((e,t,i=!1)=>{let r=n.inContext("App_proprietaires"),a=n.inContext("App_proprietaire"),s=window.location.hash.startsWith("#/files/proprietaire"),l=window.location.hash.startsWith("#/file/proprietaire"),o=!r,d=o&&t,c=l;return`\n<div class="tabs is-boxed">\n <ul>\n <li ${r?"class='is-active'":""}>\n <a href="#/proprietaires">\n <span class="icon"><i class="fas fa-list-ol" aria-hidden="true"></i></span>\n <span>${i18n("List")}</span>\n </a>\n </li>\n${o?`\n <li ${a?"class='is-active'":""}>\n <a href="#/proprietaire/${e}">\n <span class="icon"><i class="far fa-user" aria-hidden="true"></i></span>\n <span>${i18n("Proprietaire Details")}</span>\n </a>\n </li>\n`:""}\n${d?`\n <li ${s?"class='is-active'":""}>\n <a href="#/files/proprietaire/${e}">\n <span class="icon"><i class="far fa-paperclip" aria-hidden="true"></i></span>\n <span>${i18n("Files")} (${t.filecount})</span>\n </a>\n </li>\n`:""}\n${c?`\n <li ${l?"class='is-active'":""}>\n <a href="#/file/proprietaire/${e}">\n <span class="icon"><i class="far fa-paperclip" aria-hidden="true"></i></span>\n <span>${i18n("File Details")}</span>\n </a>\n </li>\n`:""}\n\n </ul>\n</div>\n`})),e("buildTitle",((e,t)=>{var n;return null!==(n=null==e?void 0:e.title)&&void 0!==n?n:t})),e("buildSubtitle",((e,t)=>{var n;return null!==(n=null==e?void 0:e.subtitle)&&void 0!==n?n:t}))}}})),System.register("src/fournisseur/proprietaires",["_BaseApp/src/core/app","_BaseApp/src/core/router","src/permission","_BaseApp/src/lib-ts/misc","_BaseApp/src/theme/theme","_BaseApp/src/theme/pager","src/admin/lookupdata","src/fournisseur/layout"],(function(e,t){"use strict";var n,i,r,a,s,l,o,d,c,u,p,m,f,h,$,b,g,v,_,x,T;t&&t.id;return{setters:[function(e){n=e},function(e){i=e},function(e){r=e},function(e){a=e},function(e){s=e},function(e){l=e},function(e){o=e},function(e){d=e}],execute:function(){e("NS",c="App_proprietaires"),u={list:[],pager:{pageNo:1,pageSize:20,sortColumn:"ID",sortDirection:"ASC",filter:{nom:void 0}}},f=()=>[].join(""),h=(e,t)=>`\n<tr class="${T(e.id)?"is-selected":""}" onclick="${c}.gotoDetail('${e.id}');">\n <td class="js-index">${t}</td>\n <td>${a.toStaticText(e.id)}</td>\n <td>${a.toStaticText(e.cletri)}</td>\n <td>${a.toStaticText(e.nom)}</td>\n <td>${a.toStaticText(e.ausoinsde)}</td>\n <td>${a.toStaticText(e.rue)}</td>\n <td>${a.toStaticText(e.ville)}</td>\n <td>${a.toStaticText(e.paysid_text)}</td>\n <td>${a.toStaticText(e.code_postal)}</td>\n <td>${a.toStaticText(e.telephone)}</td>\n <td>${a.toStaticText(e.telephone_poste)}</td>\n <td>${a.toStaticText(e.telecopieur)}</td>\n <td>${a.toStaticText(e.telephone2)}</td>\n <td>${a.toStaticText(e.telephone2_desc)}</td>\n <td>${a.toStaticText(e.telephone2_poste)}</td>\n <td>${a.toStaticText(e.telephone3)}</td>\n <td>${a.toStaticText(e.telephone3_desc)}</td>\n <td>${a.toStaticText(e.telephone3_poste)}</td>\n <td>${a.toStaticText(e.no_membre)}</td>\n <td>${a.toStaticText(e.resident)}</td>\n <td>${a.toStaticText(e.email)}</td>\n <td>${a.toStaticText(e.www)}</td>\n <td>${a.toStaticText(e.commentaires)}</td>\n <td>${a.toStaticCheckbox(e.affichercommentaires)}</td>\n <td>${a.toStaticCheckbox(e.depotdirect)}</td>\n <td>${a.toStaticText(e.institutionbanquaireid_text)}</td>\n <td>${a.toStaticText(e.banque_transit)}</td>\n <td>${a.toStaticText(e.banque_folio)}</td>\n <td>${a.toStaticText(e.no_tps)}</td>\n <td>${a.toStaticText(e.no_tvq)}</td>\n <td>${a.toStaticCheckbox(e.payera)}</td>\n <td>${a.toStaticText(e.payeraid)}</td>\n <td>${a.toStaticText(e.statut)}</td>\n <td>${a.toStaticText(e.rep_nom)}</td>\n <td>${a.toStaticText(e.rep_telephone)}</td>\n <td>${a.toStaticText(e.rep_telephone_poste)}</td>\n <td>${a.toStaticText(e.rep_email)}</td>\n <td>${a.toStaticCheckbox(e.enanglais)}</td>\n <td>${a.toStaticCheckbox(e.actif)}</td>\n <td>${a.toStaticText(e.mrcproducteurid)}</td>\n <td>${a.toStaticCheckbox(e.paiementmanuel)}</td>\n <td>${a.toStaticCheckbox(e.journal)}</td>\n <td>${a.toStaticCheckbox(e.recoittps)}</td>\n <td>${a.toStaticCheckbox(e.recoittvq)}</td>\n <td>${a.toStaticCheckbox(e.modifiertrigger)}</td>\n <td>${a.toStaticCheckbox(e.isproducteur)}</td>\n <td>${a.toStaticCheckbox(e.istransporteur)}</td>\n <td>${a.toStaticCheckbox(e.ischargeur)}</td>\n <td>${a.toStaticCheckbox(e.isautre)}</td>\n <td>${a.toStaticCheckbox(e.affichercommentairessurpermit)}</td>\n <td>${a.toStaticCheckbox(e.pasemissionpermis)}</td>\n <td>${a.toStaticCheckbox(e.generique)}</td>\n <td>${a.toStaticCheckbox(e.membre_ogc)}</td>\n <td>${a.toStaticCheckbox(e.inscrittps)}</td>\n <td>${a.toStaticCheckbox(e.inscrittvq)}</td>\n <td>${a.toStaticCheckbox(e.isogc)}</td>\n <td>${a.toStaticText(e.rep2_nom)}</td>\n <td>${a.toStaticText(e.rep2_telephone)}</td>\n <td>${a.toStaticText(e.rep2_telephone_poste)}</td>\n <td>${a.toStaticText(e.rep2_email)}</td>\n <td>${a.toStaticText(e.rep2_commentaires)}</td>\n</tr>`,$=(e,t)=>`\n<div class="table-container">\n<table class="table is-hoverable is-fullwidth">\n <thead>\n <tr>\n <th></th>\n ${l.sortableHeaderLink(t,c,i18n("ID"),"id","ASC")}\n ${l.sortableHeaderLink(t,c,i18n("CLETRI"),"cletri","ASC")}\n ${l.sortableHeaderLink(t,c,i18n("NOM"),"nom","ASC")}\n ${l.sortableHeaderLink(t,c,i18n("AUSOINSDE"),"ausoinsde","ASC")}\n ${l.sortableHeaderLink(t,c,i18n("RUE"),"rue","ASC")}\n ${l.sortableHeaderLink(t,c,i18n("VILLE"),"ville","ASC")}\n ${l.sortableHeaderLink(t,c,i18n("PAYSID_TEXT"),"paysid_text","ASC")}\n ${l.sortableHeaderLink(t,c,i18n("CODE_POSTAL"),"code_postal","ASC")}\n ${l.sortableHeaderLink(t,c,i18n("TELEPHONE"),"telephone","ASC")}\n ${l.sortableHeaderLink(t,c,i18n("TELEPHONE_POSTE"),"telephone_poste","ASC")}\n ${l.sortableHeaderLink(t,c,i18n("TELECOPIEUR"),"telecopieur","ASC")}\n ${l.sortableHeaderLink(t,c,i18n("TELEPHONE2"),"telephone2","ASC")}\n ${l.sortableHeaderLink(t,c,i18n("TELEPHONE2_DESC"),"telephone2_desc","ASC")}\n ${l.sortableHeaderLink(t,c,i18n("TELEPHONE2_POSTE"),"telephone2_poste","ASC")}\n ${l.sortableHeaderLink(t,c,i18n("TELEPHONE3"),"telephone3","ASC")}\n ${l.sortableHeaderLink(t,c,i18n("TELEPHONE3_DESC"),"telephone3_desc","ASC")}\n ${l.sortableHeaderLink(t,c,i18n("TELEPHONE3_POSTE"),"telephone3_poste","ASC")}\n ${l.sortableHeaderLink(t,c,i18n("NO_MEMBRE"),"no_membre","ASC")}\n ${l.sortableHeaderLink(t,c,i18n("RESIDENT"),"resident","ASC")}\n ${l.sortableHeaderLink(t,c,i18n("EMAIL"),"email","ASC")}\n ${l.sortableHeaderLink(t,c,i18n("WWW"),"www","ASC")}\n ${l.sortableHeaderLink(t,c,i18n("COMMENTAIRES"),"commentaires","ASC")}\n ${l.sortableHeaderLink(t,c,i18n("AFFICHERCOMMENTAIRES"),"affichercommentaires","ASC")}\n ${l.sortableHeaderLink(t,c,i18n("DEPOTDIRECT"),"depotdirect","ASC")}\n ${l.sortableHeaderLink(t,c,i18n("INSTITUTIONBANQUAIREID_TEXT"),"institutionbanquaireid_text","ASC")}\n ${l.sortableHeaderLink(t,c,i18n("BANQUE_TRANSIT"),"banque_transit","ASC")}\n ${l.sortableHeaderLink(t,c,i18n("BANQUE_FOLIO"),"banque_folio","ASC")}\n ${l.sortableHeaderLink(t,c,i18n("NO_TPS"),"no_tps","ASC")}\n ${l.sortableHeaderLink(t,c,i18n("NO_TVQ"),"no_tvq","ASC")}\n ${l.sortableHeaderLink(t,c,i18n("PAYERA"),"payera","ASC")}\n ${l.sortableHeaderLink(t,c,i18n("PAYERAID"),"payeraid","ASC")}\n ${l.sortableHeaderLink(t,c,i18n("STATUT"),"statut","ASC")}\n ${l.sortableHeaderLink(t,c,i18n("REP_NOM"),"rep_nom","ASC")}\n ${l.sortableHeaderLink(t,c,i18n("REP_TELEPHONE"),"rep_telephone","ASC")}\n ${l.sortableHeaderLink(t,c,i18n("REP_TELEPHONE_POSTE"),"rep_telephone_poste","ASC")}\n ${l.sortableHeaderLink(t,c,i18n("REP_EMAIL"),"rep_email","ASC")}\n ${l.sortableHeaderLink(t,c,i18n("ENANGLAIS"),"enanglais","ASC")}\n ${l.sortableHeaderLink(t,c,i18n("ACTIF"),"actif","ASC")}\n ${l.sortableHeaderLink(t,c,i18n("MRCPRODUCTEURID"),"mrcproducteurid","ASC")}\n ${l.sortableHeaderLink(t,c,i18n("PAIEMENTMANUEL"),"paiementmanuel","ASC")}\n ${l.sortableHeaderLink(t,c,i18n("JOURNAL"),"journal","ASC")}\n ${l.sortableHeaderLink(t,c,i18n("RECOITTPS"),"recoittps","ASC")}\n ${l.sortableHeaderLink(t,c,i18n("RECOITTVQ"),"recoittvq","ASC")}\n ${l.sortableHeaderLink(t,c,i18n("MODIFIERTRIGGER"),"modifiertrigger","ASC")}\n ${l.sortableHeaderLink(t,c,i18n("ISPRODUCTEUR"),"isproducteur","ASC")}\n ${l.sortableHeaderLink(t,c,i18n("ISTRANSPORTEUR"),"istransporteur","ASC")}\n ${l.sortableHeaderLink(t,c,i18n("ISCHARGEUR"),"ischargeur","ASC")}\n ${l.sortableHeaderLink(t,c,i18n("ISAUTRE"),"isautre","ASC")}\n ${l.sortableHeaderLink(t,c,i18n("AFFICHERCOMMENTAIRESSURPERMIT"),"affichercommentairessurpermit","ASC")}\n ${l.sortableHeaderLink(t,c,i18n("PASEMISSIONPERMIS"),"pasemissionpermis","ASC")}\n ${l.sortableHeaderLink(t,c,i18n("GENERIQUE"),"generique","ASC")}\n ${l.sortableHeaderLink(t,c,i18n("MEMBRE_OGC"),"membre_ogc","ASC")}\n ${l.sortableHeaderLink(t,c,i18n("INSCRITTPS"),"inscrittps","ASC")}\n ${l.sortableHeaderLink(t,c,i18n("INSCRITTVQ"),"inscrittvq","ASC")}\n ${l.sortableHeaderLink(t,c,i18n("ISOGC"),"isogc","ASC")}\n ${l.sortableHeaderLink(t,c,i18n("REP2_NOM"),"rep2_nom","ASC")}\n ${l.sortableHeaderLink(t,c,i18n("REP2_TELEPHONE"),"rep2_telephone","ASC")}\n ${l.sortableHeaderLink(t,c,i18n("REP2_TELEPHONE_POSTE"),"rep2_telephone_poste","ASC")}\n ${l.sortableHeaderLink(t,c,i18n("REP2_EMAIL"),"rep2_email","ASC")}\n ${l.sortableHeaderLink(t,c,i18n("REP2_COMMENTAIRES"),"rep2_commentaires","ASC")}\n ${l.headerLink(i18n("TODO"))}\n </tr>\n </thead>\n <tbody>\n ${e}\n </tbody>\n</table>\n</div>\n`,b=(e,t,n,i,r)=>{let a=[];a.push(s.buttonAddNew(c,"#/proprietaire/new",i18n("Add New")));let l=s.renderButtons(a),o=d.buildTitle(p,i18n("fournisseurs title")),u=d.buildSubtitle(p,i18n("fournisseurs subtitle"));return`\n<form onsubmit="return false;">\n<input type="submit" style="display:none;" id="${c}_dummy_submit">\n\n<div class="js-fixed-heading">\n<div class="js-head">\n <div class="content js-uc-heading js-flex-space">\n <div>\n <div class="title"><i class="${d.icon}"></i> <span>${o}</span></div>\n <div class="subtitle">${u}</div>\n </div>\n <div>\n ${s.wrapContent("js-uc-actions",l)}\n </div>\n </div>\n ${s.wrapContent("js-uc-tabs",n)}\n</div>\n<div class="js-body">\n ${s.wrapContent("js-uc-notification",r)}\n ${s.wrapContent("js-uc-notification",i)}\n ${s.wrapContent("js-uc-pager",e)}\n ${s.wrapContent("js-uc-list",t)}\n</div>\n</div>\n\n</form>\n`},e("fetchState",g=e=>(i.registerDirtyExit(null),n.POST("/fournisseur/search",u.pager).then((e=>{u=e,p=e.xtra,{}})).then(o.fetch_pays()).then(o.fetch_institutionBanquaire()))),e("fetch",(e=>{e[0];n.prepareRender(c,i18n("fournisseurs")),g().then(n.render).catch(n.render)})),v=()=>{n.prepareRender(c,i18n("fournisseurs")),n.POST("/fournisseur/search",u.pager).then((e=>{u=e})).then(n.render).catch(n.render)},e("render",(()=>{if(!_())return"";if(n.fatalError())return n.fatalErrorTemplate();if(null==u||null==u.list||u.list instanceof Array==0)return n.warningTemplate()||n.unexpectedTemplate();let e=n.warningTemplate();const t=u.list.reduce(((e,t,n)=>{let i=l.rowNumber(u.pager,n);return e+h(t,i)}),"");r.getCurrentYear();const i=f(),a=l.searchTemplate(u.pager,c),s=l.render(u.pager,c,[20,50],a,i),o=$(t,u.pager),p=d.tabTemplate(null,null);return b(s,o,p,"",e)})),e("postRender",(()=>{_()})),e("inContext",_=()=>n.inContext(c)),x=e=>{null==m&&(m={id:e}),m.id=e},T=e=>null!=m&&m.id==e,e("goto",((e,t)=>{u.pager.pageNo=e,u.pager.pageSize=t,v()})),e("sortBy",((e,t)=>{u.pager.pageNo=1,u.pager.sortColumn=e,u.pager.sortDirection=t,v()})),e("search",(e=>{u.pager.searchText=e.value,u.pager.pageNo=1,v()})),e("filter_nom",(e=>{})),e("gotoDetail",(e=>{x(e),i.goto(`#/proprietaire/${e}`)}))}}})),System.register("src/fournisseur/lots2",["_BaseApp/src/core/app","_BaseApp/src/core/router","src/permission","_BaseApp/src/lib-ts/misc","_BaseApp/src/theme/theme","_BaseApp/src/theme/pager","src/admin/lookupdata"],(function(e,t){"use strict";var n,i,r,a,s,l,o,d,c,u,p,m,f,h,$,b,g,v,_,x;t&&t.id;return{setters:[function(e){n=e},function(e){i=e},function(e){r=e},function(e){a=e},function(e){s=e},function(e){l=e},function(e){o=e}],execute:function(){e("NS",d="App_lots2"),"lots2_table",c=["_editing","_deleting","_isNew","totalcount","cantonid_text","municipaliteid_text","proprietaireid_text","contingentid_text","droit_coupeid_text","entente_paiementid_text","zoneid_text"],p={list:[],pager:{pageNo:1,pageSize:1e3,sortColumn:"ID",sortDirection:"ASC",filter:{}}},m={},f=!1,$=!1,b=(e,t,n,i,r,l,o,c,u,p)=>{let m=e.id,h='<td class="js-td-33">&nbsp;</td>';e._editing&&(h=`<td onclick="${d}.save()" class="js-td-33" title="Click to confirm"><i class="fa fa-check"></i></td>`),e._deleting&&(h=`<td onclick="${d}.drop()" class="js-td-33" title="Click to confirm"><i class="fa fa-check"></i></td>`),e._isNew&&(h=`<td onclick="${d}.create()" class="js-td-33" title="Click to confirm"><i class="fa fa-check"></i></td>`);let $=e._editing||e._deleting||e._isNew,b=!$,g=null!=n||null!=t&&m!=t||f&&!e._isNew,v=[];return(e._editing||e._isNew)&&v.push("js-not-same"),e._deleting&&v.push("js-strikeout"),e._isNew&&v.push("js-new"),g&&v.push("js-readonly"),`\n<tr data-id="${m}" class="${v.join(" ")}" style="cursor: pointer;">\n <td class="js-index">${i}</td>\n\n${b?`<td onclick="${d}.selectfordrop(${m})" class="has-text-danger js-td-33 js-drop" title="Click to mark for deletion"><i class='fas fa-times'></i></td>`:""}\n${$?`<td onclick="${d}.undo()" class="has-text-primary js-td-33" title="Click to undo"><i class='fa fa-undo'></i></td>`:""}\n${h}\n\n${g?`\n <td>${a.toStaticText(e.cantonid_text)}</td>\n <td>${a.toStaticText(e.rang)}</td>\n <td>${a.toStaticText(e.lot)}</td>\n <td>${a.toStaticText(e.municipaliteid_text)}</td>\n <td>${a.toStaticText(e.superficie_total)}</td>\n <td>${a.toStaticText(e.superficie_boisee)}</td>\n <td>${a.toStaticText(e.contingentid_text)}</td>\n <td>${a.toInputDate(e.contingent_date)}</td>\n <td>${a.toStaticText(e.droit_coupeid_text)}</td>\n <td>${a.toInputDate(e.droit_coupe_date)}</td>\n <td>${a.toStaticText(e.entente_paiementid_text)}</td>\n <td>${a.toInputDate(e.entente_paiement_date)}</td>\n <td>${a.toStaticCheckbox(e.actif)}</td>\n <td>${a.toStaticText(e.sequence)}</td>\n <td>${a.toStaticCheckbox(e.partie)}</td>\n <td>${a.toStaticText(e.matricule)}</td>\n <td>${a.toStaticText(e.zoneid_text)}</td>\n <td>${a.toStaticText(e.secteur)}</td>\n <td>${a.toStaticText(e.cadastre)}</td>\n <td>${a.toStaticCheckbox(e.reforme)}</td>\n <td>${a.toStaticText(e.lotscomplementaires)}</td>\n <td>${a.toStaticCheckbox(e.certifie)}</td>\n <td>${a.toStaticText(e.numerocertification)}</td>\n <td>${a.toStaticCheckbox(e.ogc)}</td>\n`:`\n <td class="js-inline-select">${s.renderDropdownInline(d,`cantonid_${m}`,r)}</td>\n <td class="js-inline-input">${s.renderTextInline(d,`rang_${m}`,e.rang,25)}</td>\n <td class="js-inline-input">${s.renderTextInline(d,`lot_${m}`,e.lot,6)}</td>\n <td class="js-inline-select">${s.renderDropdownInline(d,`municipaliteid_${m}`,l)}</td>\n <td class="js-inline-input">${s.renderDecimalInline(d,`superficie_total_${m}`,e.superficie_total,{required:!0,places:1,min:0})}</td>\n <td class="js-inline-input">${s.renderDecimalInline(d,`superficie_boisee_${m}`,e.superficie_boisee,{required:!0,places:1,min:0})}</td>\n <td class="js-inline-select">${s.renderDropdownInline(d,`contingentid_${m}`,o)}</td>\n <td class="js-inline-input">${s.renderDateInline(d,`contingent_date_${m}`,e.contingent_date,{required:!1})}</td>\n <td class="js-inline-select">${s.renderDropdownInline(d,`droit_coupeid_${m}`,c)}</td>\n <td class="js-inline-input">${s.renderDateInline(d,`droit_coupe_date_${m}`,e.droit_coupe_date,{required:!1})}</td>\n <td class="js-inline-select">${s.renderDropdownInline(d,`entente_paiementid_${m}`,u)}</td>\n <td class="js-inline-input">${s.renderDateInline(d,`entente_paiement_date_${m}`,e.entente_paiement_date,{required:!1})}</td>\n <td class="js-inline-input">${s.renderCheckboxInline(d,`actif_${m}`,e.actif)}</td>\n <td class="js-inline-input">${s.renderTextInline(d,`sequence_${m}`,e.sequence,6)}</td>\n <td class="js-inline-input">${s.renderCheckboxInline(d,`partie_${m}`,e.partie)}</td>\n <td class="js-inline-input">${s.renderTextInline(d,`matricule_${m}`,e.matricule,20)}</td>\n <td class="js-inline-select">${s.renderDropdownInline(d,`zoneid_${m}`,p)}</td>\n <td class="js-inline-input">${s.renderTextInline(d,`secteur_${m}`,e.secteur,2)}</td>\n <td class="js-inline-input">${s.renderNumberInline(d,`cadastre_${m}`,e.cadastre)}</td>\n <td class="js-inline-input">${s.renderCheckboxInline(d,`reforme_${m}`,e.reforme)}</td>\n <td class="js-inline-input">${s.renderTextInline(d,`lotscomplementaires_${m}`,e.lotscomplementaires,255)}</td>\n <td class="js-inline-input">${s.renderCheckboxInline(d,`certifie_${m}`,e.certifie)}</td>\n <td class="js-inline-input">${s.renderTextInline(d,`numerocertification_${m}`,e.numerocertification,50)}</td>\n <td class="js-inline-input">${s.renderCheckboxInline(d,`ogc_${m}`,e.ogc)}</td>\n`}\n</tr>`},g=(e,t,n)=>{let i=null!=n||null!=t||f;return`\n<div id="lots2_table" class="table-container">\n<table class="table is-hoverable js-inline" style="width: 100px; table-layout: fixed;">\n <thead>\n <tr>\n <th style="width:99px" colspan="3"></th>\n <th style="width:100px">${i18n("CANTON")}</th>\n <th style="width:100px">${i18n("RANG")}</th>\n <th style="width:100px">${i18n("LOT")}</th>\n <th style="width:100px">${i18n("MUNICIPALITE")}</th>\n <th style="width:100px">${i18n("SUPERFICIE_TOTAL")}</th>\n <th style="width:100px">${i18n("SUPERFICIE_BOISEE")}</th>\n <th style="width:100px">${i18n("CONTINGENT")}</th>\n <th style="width:100px">${i18n("CONTINGENT_DATE")}</th>\n <th style="width:100px">${i18n("DROIT_COUPE")}</th>\n <th style="width:100px">${i18n("DROIT_COUPE_DATE")}</th>\n <th style="width:100px">${i18n("ENTENTE_PAIEMENT")}</th>\n <th style="width:100px">${i18n("ENTENTE_PAIEMENT_DATE")}</th>\n <th style="width:100px">${i18n("ACTIF")}</th>\n <th style="width:100px">${i18n("SEQUENCE")}</th>\n <th style="width:100px">${i18n("PARTIE")}</th>\n <th style="width:100px">${i18n("MATRICULE")}</th>\n <th style="width:100px">${i18n("ZONE")}</th>\n <th style="width:100px">${i18n("SECTEUR")}</th>\n <th style="width:100px">${i18n("CADASTRE")}</th>\n <th style="width:100px">${i18n("REFORME")}</th>\n <th style="width:100px">${i18n("LOTSCOMPLEMENTAIRES")}</th>\n <th style="width:100px">${i18n("CERTIFIE")}</th>\n <th style="width:100px">${i18n("NUMEROCERTIFICATION")}</th>\n <th style="width:100px">${i18n("OGC")}</th>\n </tr>\n </thead>\n <tbody>\n ${e}\n <tr class="js-insert-row ${i?"js-disabled":""}">\n <td class="js-index js-td-33">*</td>\n <td class="has-text-primary js-td-33 js-add" onclick="${d}.addNew()" title="Click to add a new row"><i class="fas fa-plus"></i></td>\n <td></td>\n <td colspan="24"></td>\n </tr>\n </tbody>\n</table>\n</div>\n`},v=e=>`\n${s.wrapContent("js-uc-list",e)}\n`,e("fetchState",((e,t)=>($="new"==e,h=t||h,f=!1,n.POST(`/lot/search/${e}`,p.pager).then((t=>{p=t,m=a.clone(p),u={proprietaireid:e}})).then(o.fetch_canton()).then(o.fetch_municipalite()).then(o.fetch_contingent()).then(o.fetch_droit_coupe()).then(o.fetch_entente_paiement()).then(o.fetch_zone())))),e("preRender",(()=>{})),e("render",(()=>{if($)return"";let e,t;p.list.forEach(((n,i)=>{let r=m.list[i];n._editing=!a.same(n,r),n._editing&&(e=n.id),n._deleting&&(t=n.id)}));let n=r.getCurrentYear(),i=o.get_canton(n),d=o.get_municipalite(n),c=o.get_contingent(n),u=o.get_droit_coupe(n),f=o.get_entente_paiement(n),h=o.get_zone(n);const _=p.list.reduce(((n,r,a)=>{let o=l.rowNumber(p.pager,a),m=s.renderOptions(i,r.cantonid,!0),$=s.renderOptions(d,r.municipaliteid,!0),g=s.renderOptions(c,r.contingentid,!0),v=s.renderOptions(u,r.droit_coupeid,!0),_=s.renderOptions(f,r.entente_paiementid,!0),x=s.renderOptions(h,r.zoneid,!0);return n+b(r,e,t,o,m,$,g,v,_,x)}),""),x=g(_,e,t);return v(x)})),e("postRender",(()=>{})),e("inContext",(()=>n.inContext(d))),_=()=>{let e=a.clone(p);return e.list.forEach((e=>{let t=e.id;e.cantonid=a.fromSelectText(`${d}_cantonid_${t}`,e.cantonid),e.rang=a.fromInputTextNullable(`${d}_rang_${t}`,e.rang),e.lot=a.fromInputTextNullable(`${d}_lot_${t}`,e.lot),e.municipaliteid=a.fromSelectText(`${d}_municipaliteid_${t}`,e.municipaliteid),e.superficie_total=a.fromInputNumberNullable(`${d}_superficie_total_${t}`,e.superficie_total),e.superficie_boisee=a.fromInputNumberNullable(`${d}_superficie_boisee_${t}`,e.superficie_boisee),e.proprietaireid=a.fromSelectText(`${d}_proprietaireid_${t}`,e.proprietaireid),e.contingentid=a.fromSelectText(`${d}_contingentid_${t}`,e.contingentid),e.contingent_date=a.fromInputDateNullable(`${d}_contingent_date_${t}`,e.contingent_date),e.droit_coupeid=a.fromSelectText(`${d}_droit_coupeid_${t}`,e.droit_coupeid),e.droit_coupe_date=a.fromInputDateNullable(`${d}_droit_coupe_date_${t}`,e.droit_coupe_date),e.entente_paiementid=a.fromSelectText(`${d}_entente_paiementid_${t}`,e.entente_paiementid),e.entente_paiement_date=a.fromInputDateNullable(`${d}_entente_paiement_date_${t}`,e.entente_paiement_date),e.actif=a.fromInputCheckbox(`${d}_actif_${t}`,e.actif),e.sequence=a.fromInputTextNullable(`${d}_sequence_${t}`,e.sequence),e.partie=a.fromInputCheckbox(`${d}_partie_${t}`,e.partie),e.matricule=a.fromInputTextNullable(`${d}_matricule_${t}`,e.matricule),e.zoneid=a.fromSelectText(`${d}_zoneid_${t}`,e.zoneid),e.secteur=a.fromInputTextNullable(`${d}_secteur_${t}`,e.secteur),e.cadastre=a.fromInputNumberNullable(`${d}_cadastre_${t}`,e.cadastre),e.reforme=a.fromInputCheckbox(`${d}_reforme_${t}`,e.reforme),e.lotscomplementaires=a.fromInputTextNullable(`${d}_lotscomplementaires_${t}`,e.lotscomplementaires),e.certifie=a.fromInputCheckbox(`${d}_certifie_${t}`,e.certifie),e.numerocertification=a.fromInputTextNullable(`${d}_numerocertification_${t}`,e.numerocertification),e.ogc=a.fromInputCheckbox(`${d}_ogc_${t}`,e.ogc)})),e},x=()=>{document.getElementById(`${h}_dummy_submit`).click();let e=document.getElementsByTagName("form")[0];return e.classList.add("js-error"),e.checkValidity()},e("onchange",(e=>{p=_(),n.render()})),e("undo",(()=>{f&&(f=!1,m.list.pop()),p=a.clone(m),n.render()})),e("addNew",(()=>{let e=`/lot/new/${u.proprietaireid}`;return n.GET(e).then((e=>{p.list.push(e),m=a.clone(p),f=!0,e._isNew=!0})).then(n.render).catch(n.render)})),e("create",(()=>{let e=_().list.find((e=>e._isNew));x()&&(n.prepareRender(),n.POST("/lot",a.createBlack(e,c)).then((()=>{m=a.clone(p),i.gotoCurrent(1)})).catch(n.render))})),e("save",(()=>{let e=_().list.find((e=>e._editing));x()&&(n.prepareRender(),n.PUT("/lot",a.createBlack(e,c)).then((()=>{m=a.clone(p),i.gotoCurrent(1)})).catch(n.render))})),e("selectfordrop",(e=>{(p=a.clone(m)).list.find((t=>t.id==e))._deleting=!0,n.render()})),e("drop",(()=>{n.prepareRender();let e=p.list.find((e=>e._deleting));n.DELETE("/lot",{id:e.id}).then((()=>{m=a.clone(p),i.gotoCurrent(1)})).catch(n.render)})),e("hasChanges",(()=>!a.same(m,p)))}}})),System.register("src/fournisseur/proprietaire",["_BaseApp/src/core/app","_BaseApp/src/core/router","_BaseApp/src/lib-ts/misc","_BaseApp/src/theme/theme","src/admin/lookupdata","src/fournisseur/layout","src/fournisseur/lots2"],(function(e,t){"use strict";var n,i,r,a,s,l,o,d,c,u,p,m,f,h,$,b,g,v,_,x,T,y,S,w,C,A,E,I,N,k,j;t&&t.id;return{setters:[function(e){n=e},function(e){i=e},function(e){r=e},function(e){a=e},function(e){s=e},function(e){l=e},function(e){o=e}],execute:function(){e("NS",d="App_proprietaire"),c=["paysid_text","institutionbanquaireid_text"],p={},f={},h=!1,$=!1,b=(e,t)=>`\n ${a.renderTextField(d,"nom",e.nom,i18n("NOM"),40)}\n ${a.renderTextField(d,"ausoinsde",e.ausoinsde,i18n("AUSOINSDE"),30)}\n ${a.renderTextField(d,"rue",e.rue,i18n("RUE"),30)}\n ${a.renderTextField(d,"ville",e.ville,i18n("VILLE"),30)}\n ${a.renderDropdownField(d,"paysid",t,i18n("PAYSID"))}\n ${a.renderTextField(d,"code_postal",e.code_postal,i18n("CODE_POSTAL"),7)}\n`,g=e=>`\n ${a.renderTextField(d,"telephone",e.telephone,i18n("TELEPHONE"),12)}\n ${a.renderTextField(d,"telephone_poste",e.telephone_poste,i18n("TELEPHONE_POSTE"),4)}\n ${a.renderTextField(d,"telecopieur",e.telecopieur,i18n("TELECOPIEUR"),12)}\n\n ${a.renderTextField(d,"telephone2_desc",e.telephone2_desc,i18n("TELEPHONE2_DESC"),20)}\n ${a.renderTextField(d,"telephone2",e.telephone2,i18n("TELEPHONE2"),12)}\n ${a.renderTextField(d,"telephone2_poste",e.telephone2_poste,i18n("TELEPHONE2_POSTE"),4)}\n\n ${a.renderTextField(d,"telephone3_desc",e.telephone3_desc,i18n("TELEPHONE3_DESC"),20)}\n ${a.renderTextField(d,"telephone3",e.telephone3,i18n("TELEPHONE3"),12)}\n ${a.renderTextField(d,"telephone3_poste",e.telephone3_poste,i18n("TELEPHONE3_POSTE"),4)}\n`,v=e=>`\n ${a.renderTextField(d,"statut",e.statut,i18n("STATUT"),50)}\n ${a.renderTextField(d,"resident",e.resident,i18n("RESIDENT"),1)}\n ${a.renderTextField(d,"no_membre",e.no_membre,i18n("NO_MEMBRE"),10)}\n`,_=e=>`\n ${a.renderTextField(d,"email",e.email,i18n("EMAIL"),80)}\n ${a.renderTextField(d,"www",e.www,i18n("WWW"),80)}\n`,x=e=>`\n ${a.renderTextField(d,"id",e.id,i18n("ID"),15,!0)}\n\n ${a.renderCheckboxField(d,"isproducteur",e.isproducteur,i18n("ISPRODUCTEUR"))}\n ${a.renderCheckboxField(d,"istransporteur",e.istransporteur,i18n("ISTRANSPORTEUR"))}\n ${a.renderCheckboxField(d,"ischargeur",e.ischargeur,i18n("ISCHARGEUR"))}\n ${a.renderCheckboxField(d,"isogc",e.isogc,i18n("ISOGC"))}\n ${a.renderCheckboxField(d,"isautre",e.isautre,i18n("ISAUTRE"))}\n\n ${a.renderTextareaField(d,"commentaires",e.commentaires,i18n("COMMENTAIRES"),255,!1,null,5)}\n ${a.renderCheckboxField(d,"affichercommentaires",e.affichercommentaires,i18n("AFFICHERCOMMENTAIRES"))}\n ${a.renderCheckboxField(d,"affichercommentairessurpermit",e.affichercommentairessurpermit,i18n("AFFICHERCOMMENTAIRESSURPERMIT"))}\n\n ${a.renderCheckboxField(d,"actif",e.actif,i18n("ACTIF"))}\n ${a.renderCheckboxField(d,"journal",e.journal,i18n("JOURNAL"))}\n ${a.renderCheckboxField(d,"pasemissionpermis",e.pasemissionpermis,i18n("PASEMISSIONPERMIS"))}\n\n ${a.renderCheckboxField(d,"enanglais",e.enanglais,i18n("ENANGLAIS"))}\n ${a.renderCheckboxField(d,"generique",e.generique,i18n("GENERIQUE"))}\n ${a.renderCheckboxField(d,"membre_ogc",e.membre_ogc,i18n("MEMBRE_OGC"))}\n`,T=(e,t)=>`\n ${a.renderCheckboxField(d,"depotdirect",e.depotdirect,i18n("DEPOTDIRECT"))}\n\n ${a.renderDropdownField(d,"institutionbanquaireid",t,i18n("INSTITUTIONBANQUAIREID"))}\n ${a.renderTextField(d,"banque_transit",e.banque_transit,i18n("BANQUE_TRANSIT"),5)}\n ${a.renderTextField(d,"banque_folio",e.banque_folio,i18n("BANQUE_FOLIO"),12)}\n\n ${a.renderTextField(d,"no_tps",e.no_tps,i18n("NO_TPS"),25)}\n ${a.renderCheckboxField(d,"recoittps",e.recoittps,i18n("RECOITTPS"))}\n ${a.renderCheckboxField(d,"inscrittps",e.inscrittps,i18n("INSCRITTPS"))}\n\n ${a.renderTextField(d,"no_tvq",e.no_tvq,i18n("NO_TVQ"),25)}\n ${a.renderCheckboxField(d,"recoittvq",e.recoittvq,i18n("RECOITTVQ"))}\n ${a.renderCheckboxField(d,"inscrittvq",e.inscrittvq,i18n("INSCRITTVQ"))}\n\n ${a.renderCheckboxField(d,"payera",e.payera,i18n("PAYERA"))}\n ${a.renderTextField(d,"payeraid",e.payeraid,i18n("PAYERAID"),15)}\n ${a.renderCheckboxField(d,"paiementmanuel",e.paiementmanuel,i18n("PAIEMENTMANUEL"))}\n`,y=e=>`\n ${a.renderTextField(d,"rep_nom",e.rep_nom,i18n("REP_NOM"),30)}\n ${a.renderTextField(d,"rep_telephone",e.rep_telephone,i18n("REP_TELEPHONE"),12)}\n ${a.renderTextField(d,"rep_telephone_poste",e.rep_telephone_poste,i18n("REP_TELEPHONE_POSTE"),4)}\n ${a.renderTextField(d,"rep_email",e.rep_email,i18n("REP_EMAIL"),80)}\n\n ${a.renderTextField(d,"rep2_nom",e.rep2_nom,i18n("REP2_NOM"),80)}\n ${a.renderTextField(d,"rep2_telephone",e.rep2_telephone,i18n("REP2_TELEPHONE"),12)}\n ${a.renderTextField(d,"rep2_telephone_poste",e.rep2_telephone_poste,i18n("REP2_TELEPHONE_POSTE"),4)}\n ${a.renderTextField(d,"rep2_email",e.rep2_email,i18n("REP2_EMAIL"),80)}\n ${a.renderTextareaField(d,"rep2_commentaires",e.rep2_commentaires,i18n("REP2_COMMENTAIRES"),255,!1,null,3)}\n`,e=>"\n",S=(e,t,n,i)=>`\n<div class="js-float-menu">\n <ul>\n <li>${a.float_menu_button("Adresse")}</li>\n <li>${a.float_menu_button("Téléphone")}</li>\n <li>${a.float_menu_button("Ciel")}</li>\n <li>${a.float_menu_button("Internet")}</li>\n <li>${a.float_menu_button("Autres")}</li>\n <li>${a.float_menu_button("Dépôt direct")}</li>\n <li>${a.float_menu_button("Représentant")}</li>\n <li>${a.float_menu_button("Camions")}</li>\n <li>${a.float_menu_button("Lots")}</li>\n </ul>\n</div>\n\n<div class="columns">\n <div class="column is-8 is-offset-3">\n ${a.wrapFieldset("Camions","\n")}\n ${a.wrapFieldset("Lots",`<h4>Lots propriétaire</h4>${i}`)}\n ${a.wrapFieldset("Adresse",b(e,t))}\n ${a.wrapFieldset("Téléphone",g(e))}\n ${a.wrapFieldset("Ciel",v(e))}\n ${a.wrapFieldset("Internet",_(e))}\n ${a.wrapFieldset("Autres",x(e))}\n ${a.wrapFieldset("Dépôt direct",T(e,n))}\n ${a.wrapFieldset("Représentant",y(e))}\n </div>\n</div>\n\n ${a.renderBlame(e,h)}\n`,w=(e,t,n,i,r)=>{let s=h,c=!s,u=!s,p=!h,f=o.hasChanges(),$=[];$.push(a.buttonCancel(d)),s&&$.push(a.buttonInsert(d)),c&&$.push(a.buttonDelete(d)),u&&$.push(a.buttonAddNew(d,"#/proprietaire/new")),p&&$.push(a.buttonUpdate(d,f));let b=a.renderButtons($),g=l.buildTitle(m,h?i18n("New fournisseur"):i18n("fournisseur Details")),v=l.buildSubtitle(m,i18n("fournisseur subtitle"));return`\n<form onsubmit="return false;" >\n<input type="submit" style="display:none;" id="${d}_dummy_submit">\n\n<div class="js-fixed-heading">\n<div class="js-head">\n <div class="content js-uc-heading js-flex-space">\n <div>\n <div class="title"><i class="${l.icon}"></i> <span>${g}</span></div>\n <div class="subtitle">${v}</div>\n </div>\n <div>\n ${a.wrapContent("js-uc-actions",b)}\n ${a.renderBlame(e,h)}\n </div>\n </div>\n ${a.wrapContent("js-uc-tabs",n)}\n</div>\n<div class="js-body">\n ${a.wrapContent("js-uc-notification",r)}\n ${a.wrapContent("js-uc-notification",i)}\n ${a.wrapContent("js-uc-details",t)}\n</div>\n</div>\n\n${a.renderModalDelete(`modalDelete_${d}`,`${d}.drop()`)}\n\n</form>\n`},C=()=>$?n.dirtyTemplate(d,r.changes(f,p)):"",e("fetchState",A=e=>(h="new"==e,$=!1,i.registerDirtyExit(j),n.GET(`/fournisseur/${h?"new":e}`).then((t=>{p=t.item,m=t.xtra,f=r.clone(p),u={id:e}})).then(s.fetch_pays()).then(s.fetch_institutionBanquaire()).then((()=>o.fetchState(e,d))))),e("fetch",(e=>{let t=e[0];n.prepareRender(d,i18n("proprietaire")),A(t).then(n.render).catch(n.render)})),e("render",(()=>{if(!E())return"";if(n.fatalError())return n.fatalErrorTemplate();if(null==p||0==Object.keys(p).length)return n.warningTemplate()||n.unexpectedTemplate();let e=s.get_pays(2020),t=s.get_institutionBanquaire(2020),i=a.renderOptions(e,p.paysid,!0),r=a.renderOptions(t,p.institutionbanquaireid,!0);o.preRender();let d=o.render();const c=S(p,i,r,d),u=l.tabTemplate(p.id,m,h),f=C(),$=n.warningTemplate();return w(p,c,u,$,f)})),e("postRender",(()=>{E()&&(o.postRender(),n.setPageTitle(h?i18n("New proprietaire"):m.title))})),e("inContext",E=()=>n.inContext(d)),I=()=>{let e=r.clone(p);return e.cletri=r.fromInputTextNullable(`${d}_cletri`,p.cletri),e.nom=r.fromInputTextNullable(`${d}_nom`,p.nom),e.ausoinsde=r.fromInputTextNullable(`${d}_ausoinsde`,p.ausoinsde),e.rue=r.fromInputTextNullable(`${d}_rue`,p.rue),e.ville=r.fromInputTextNullable(`${d}_ville`,p.ville),e.paysid=r.fromSelectText(`${d}_paysid`,p.paysid),e.code_postal=r.fromInputTextNullable(`${d}_code_postal`,p.code_postal),e.telephone=r.fromInputTextNullable(`${d}_telephone`,p.telephone),e.telephone_poste=r.fromInputTextNullable(`${d}_telephone_poste`,p.telephone_poste),e.telecopieur=r.fromInputTextNullable(`${d}_telecopieur`,p.telecopieur),e.telephone2=r.fromInputTextNullable(`${d}_telephone2`,p.telephone2),e.telephone2_desc=r.fromInputTextNullable(`${d}_telephone2_desc`,p.telephone2_desc),e.telephone2_poste=r.fromInputTextNullable(`${d}_telephone2_poste`,p.telephone2_poste),e.telephone3=r.fromInputTextNullable(`${d}_telephone3`,p.telephone3),e.telephone3_desc=r.fromInputTextNullable(`${d}_telephone3_desc`,p.telephone3_desc),e.telephone3_poste=r.fromInputTextNullable(`${d}_telephone3_poste`,p.telephone3_poste),e.no_membre=r.fromInputTextNullable(`${d}_no_membre`,p.no_membre),e.resident=r.fromInputTextNullable(`${d}_resident`,p.resident),e.email=r.fromInputTextNullable(`${d}_email`,p.email),e.www=r.fromInputTextNullable(`${d}_www`,p.www),e.commentaires=r.fromInputTextNullable(`${d}_commentaires`,p.commentaires),e.affichercommentaires=r.fromInputCheckbox(`${d}_affichercommentaires`,p.affichercommentaires),e.depotdirect=r.fromInputCheckbox(`${d}_depotdirect`,p.depotdirect),e.institutionbanquaireid=r.fromSelectText(`${d}_institutionbanquaireid`,p.institutionbanquaireid),e.banque_transit=r.fromInputTextNullable(`${d}_banque_transit`,p.banque_transit),e.banque_folio=r.fromInputTextNullable(`${d}_banque_folio`,p.banque_folio),e.no_tps=r.fromInputTextNullable(`${d}_no_tps`,p.no_tps),e.no_tvq=r.fromInputTextNullable(`${d}_no_tvq`,p.no_tvq),e.payera=r.fromInputCheckbox(`${d}_payera`,p.payera),e.payeraid=r.fromInputTextNullable(`${d}_payeraid`,p.payeraid),e.statut=r.fromInputTextNullable(`${d}_statut`,p.statut),e.rep_nom=r.fromInputTextNullable(`${d}_rep_nom`,p.rep_nom),e.rep_telephone=r.fromInputTextNullable(`${d}_rep_telephone`,p.rep_telephone),e.rep_telephone_poste=r.fromInputTextNullable(`${d}_rep_telephone_poste`,p.rep_telephone_poste),e.rep_email=r.fromInputTextNullable(`${d}_rep_email`,p.rep_email),e.enanglais=r.fromInputCheckbox(`${d}_enanglais`,p.enanglais),e.actif=r.fromInputCheckbox(`${d}_actif`,p.actif),e.mrcproducteurid=r.fromInputNumberNullable(`${d}_mrcproducteurid`,p.mrcproducteurid),e.paiementmanuel=r.fromInputCheckbox(`${d}_paiementmanuel`,p.paiementmanuel),e.journal=r.fromInputCheckbox(`${d}_journal`,p.journal),e.recoittps=r.fromInputCheckbox(`${d}_recoittps`,p.recoittps),e.recoittvq=r.fromInputCheckbox(`${d}_recoittvq`,p.recoittvq),e.modifiertrigger=r.fromInputCheckbox(`${d}_modifiertrigger`,p.modifiertrigger),e.isproducteur=r.fromInputCheckbox(`${d}_isproducteur`,p.isproducteur),e.istransporteur=r.fromInputCheckbox(`${d}_istransporteur`,p.istransporteur),e.ischargeur=r.fromInputCheckbox(`${d}_ischargeur`,p.ischargeur),e.isautre=r.fromInputCheckbox(`${d}_isautre`,p.isautre),e.affichercommentairessurpermit=r.fromInputCheckbox(`${d}_affichercommentairessurpermit`,p.affichercommentairessurpermit),e.pasemissionpermis=r.fromInputCheckbox(`${d}_pasemissionpermis`,p.pasemissionpermis),e.generique=r.fromInputCheckbox(`${d}_generique`,p.generique),e.membre_ogc=r.fromInputCheckbox(`${d}_membre_ogc`,p.membre_ogc),e.inscrittps=r.fromInputCheckbox(`${d}_inscrittps`,p.inscrittps),e.inscrittvq=r.fromInputCheckbox(`${d}_inscrittvq`,p.inscrittvq),e.isogc=r.fromInputCheckbox(`${d}_isogc`,p.isogc),e.rep2_nom=r.fromInputTextNullable(`${d}_rep2_nom`,p.rep2_nom),e.rep2_telephone=r.fromInputTextNullable(`${d}_rep2_telephone`,p.rep2_telephone),e.rep2_telephone_poste=r.fromInputTextNullable(`${d}_rep2_telephone_poste`,p.rep2_telephone_poste),e.rep2_email=r.fromInputTextNullable(`${d}_rep2_email`,p.rep2_email),e.rep2_commentaires=r.fromInputTextNullable(`${d}_rep2_commentaires`,p.rep2_commentaires),e},N=e=>n.hasNoError(),k=()=>{document.getElementById(`${d}_dummy_submit`).click();let e=document.getElementsByTagName("form")[0];return e.classList.add("js-error"),e.checkValidity()},e("onchange",(e=>{p=I(),n.render()})),e("cancel",(()=>{i.goBackOrResume($)})),e("create",(()=>{let e=I();if(k()){if(!N())return n.render();n.prepareRender(),n.POST("/fournisseur",r.createBlack(e,c)).then((e=>{let t=e;r.toastSuccessSave(),i.goto(`#/proprietaire/${t.id}`,10)})).catch(n.render)}})),e("save",((e=!1)=>{let t=I();if(k()){if(!N())return n.render();n.prepareRender(),n.PUT("/fournisseur",r.createBlack(t,c)).then((t=>{r.toastSuccessSave(),e?i.goto("#/proprietaires/",100):i.goto(`#/proprietaire/${u.id}`,10)})).catch(n.render)}})),e("drop",(()=>{n.prepareRender(),n.DELETE("/fournisseur",u).then((e=>{i.goto("#/proprietaires/",250)})).catch(n.render)})),j=()=>{let e=!r.same(f,I()),t=o.hasChanges();return($=e||t)&&setTimeout((()=>{p=I(),n.render()}),10),$}}}})),System.register("src/fournisseur/main",["_BaseApp/src/core/router","src/fournisseur/proprietaires","src/fournisseur/proprietaire","src/fournisseur/lots2"],(function(e,t){"use strict";var n,i,r,a;t&&t.id;return{setters:[function(e){n=e},function(e){i=e},function(e){r=e},function(e){a=e}],execute:function(){window[i.NS]=i,window[r.NS]=r,window[a.NS]=a,e("startup",(()=>{n.addRoute("^#/proprietaires/?(.*)?$",i.fetch),n.addRoute("^#/proprietaire/?(.*)?$",r.fetch)})),e("render",(()=>`\n<div>\n ${i.render()}\n ${r.render()}\n</div>\n`)),e("postRender",(()=>{i.postRender(),r.postRender()}))}}})),System.register("src/territoire/layout",["_BaseApp/src/core/app","src/layout"],(function(e,t){"use strict";var n,i;t&&t.id;return{setters:[function(e){n=e},function(e){i=e}],execute:function(){e("icon","far fa-user"),e("prepareMenu",(()=>{i.setOpenedMenu("Territoire-Lots")})),e("tabTemplate",((e,t,i=!1)=>{let r=n.inContext("App_lots"),a=n.inContext("App_lot"),s=window.location.hash.startsWith("#/files/lot"),l=window.location.hash.startsWith("#/file/lot"),o=!r,d=o&&t,c=l;return`\n<div class="tabs is-boxed">\n <ul>\n <li ${r?"class='is-active'":""}>\n <a href="#/lots">\n <span class="icon"><i class="fas fa-list-ol" aria-hidden="true"></i></span>\n <span>${i18n("List")}</span>\n </a>\n </li>\n${o?`\n <li ${a?"class='is-active'":""}>\n <a href="#/lot/${e}">\n <span class="icon"><i class="far fa-user" aria-hidden="true"></i></span>\n <span>${i18n("Lot Details")}</span>\n </a>\n </li>\n`:""}\n${d?`\n <li ${s?"class='is-active'":""}>\n <a href="#/files/lot/${e}">\n <span class="icon"><i class="far fa-paperclip" aria-hidden="true"></i></span>\n <span>${i18n("Files")} (${t.filecount})</span>\n </a>\n </li>\n`:""}\n${c?`\n <li ${l?"class='is-active'":""}>\n <a href="#/file/lot/${e}">\n <span class="icon"><i class="far fa-paperclip" aria-hidden="true"></i></span>\n <span>${i18n("File Details")}</span>\n </a>\n </li>\n`:""}\n\n </ul>\n</div>\n`})),e("buildTitle",((e,t)=>{var n;return null!==(n=null==e?void 0:e.title)&&void 0!==n?n:t})),e("buildSubtitle",((e,t)=>{var n;return null!==(n=null==e?void 0:e.subtitle)&&void 0!==n?n:t}))}}})),System.register("src/territoire/lots",["_BaseApp/src/core/app","_BaseApp/src/core/router","src/permission","_BaseApp/src/lib-ts/misc","_BaseApp/src/theme/theme","_BaseApp/src/theme/pager","src/admin/lookupdata","src/territoire/layout"],(function(e,t){"use strict";var n,i,r,a,s,l,o,d,c,u,p,m,f,h,$,b,g,v,_,x,T;t&&t.id;return{setters:[function(e){n=e},function(e){i=e},function(e){r=e},function(e){a=e},function(e){s=e},function(e){l=e},function(e){o=e},function(e){d=e}],execute:function(){e("NS",c="App_lots"),u={list:[],pager:{pageNo:1,pageSize:20,sortColumn:"ID",sortDirection:"ASC",filter:{}}},f=()=>[].join(""),h=(e,t)=>`\n<tr class="${T(e.id)?"is-selected":""}" onclick="${c}.gotoDetail(${e.id});">\n <td class="js-index">${t}</td>\n <td>${a.toStaticText(e.cantonid_text)}</td>\n <td>${a.toStaticText(e.rang)}</td>\n <td>${a.toStaticText(e.lot)}</td>\n <td>${a.toStaticText(e.municipaliteid_text)}</td>\n <td>${a.toStaticText(e.superficie_total)}</td>\n <td>${a.toStaticText(e.superficie_boisee)}</td>\n <td>${a.toStaticText(e.proprietaireid_text)}</td>\n <td>${a.toStaticText(e.contingentid_text)}</td>\n <td>${a.toStaticDate(e.contingent_date)}</td>\n <td>${a.toStaticText(e.droit_coupeid_text)}</td>\n <td>${a.toStaticDate(e.droit_coupe_date)}</td>\n <td>${a.toStaticText(e.entente_paiementid_text)}</td>\n <td>${a.toStaticDate(e.entente_paiement_date)}</td>\n <td>${a.toStaticCheckbox(e.actif)}</td>\n <td>${a.toStaticText(e.id)}</td>\n <td>${a.toStaticText(e.sequence)}</td>\n <td>${a.toStaticCheckbox(e.partie)}</td>\n <td>${a.toStaticText(e.matricule)}</td>\n <td>${a.toStaticText(e.zoneid_text)}</td>\n <td>${a.toStaticText(e.secteur)}</td>\n <td>${a.toStaticText(e.cadastre)}</td>\n <td>${a.toStaticCheckbox(e.reforme)}</td>\n <td>${a.toStaticText(e.lotscomplementaires)}</td>\n <td>${a.toStaticCheckbox(e.certifie)}</td>\n <td>${a.toStaticText(e.numerocertification)}</td>\n <td>${a.toStaticCheckbox(e.ogc)}</td>\n</tr>`,$=(e,t)=>`\n<div class="table-container">\n<table class="table is-hoverable is-fullwidth">\n <thead>\n <tr>\n <th></th>\n ${l.sortableHeaderLink(t,c,i18n("CANTONID_TEXT"),"cantonid_text","ASC")}\n ${l.sortableHeaderLink(t,c,i18n("RANG"),"rang","ASC")}\n ${l.sortableHeaderLink(t,c,i18n("LOT"),"lot","ASC")}\n ${l.sortableHeaderLink(t,c,i18n("MUNICIPALITEID_TEXT"),"municipaliteid_text","ASC")}\n ${l.sortableHeaderLink(t,c,i18n("SUPERFICIE_TOTAL"),"superficie_total","ASC")}\n ${l.sortableHeaderLink(t,c,i18n("SUPERFICIE_BOISEE"),"superficie_boisee","ASC")}\n ${l.sortableHeaderLink(t,c,i18n("PROPRIETAIREID_TEXT"),"proprietaireid_text","ASC")}\n ${l.sortableHeaderLink(t,c,i18n("CONTINGENTID_TEXT"),"contingentid_text","ASC")}\n ${l.sortableHeaderLink(t,c,i18n("CONTINGENT_DATE"),"contingent_date","DESC")}\n ${l.sortableHeaderLink(t,c,i18n("DROIT_COUPEID_TEXT"),"droit_coupeid_text","ASC")}\n ${l.sortableHeaderLink(t,c,i18n("DROIT_COUPE_DATE"),"droit_coupe_date","DESC")}\n ${l.sortableHeaderLink(t,c,i18n("ENTENTE_PAIEMENTID_TEXT"),"entente_paiementid_text","ASC")}\n ${l.sortableHeaderLink(t,c,i18n("ENTENTE_PAIEMENT_DATE"),"entente_paiement_date","DESC")}\n ${l.sortableHeaderLink(t,c,i18n("ACTIF"),"actif","ASC")}\n ${l.sortableHeaderLink(t,c,i18n("ID"),"id","ASC")}\n ${l.sortableHeaderLink(t,c,i18n("SEQUENCE"),"sequence","ASC")}\n ${l.sortableHeaderLink(t,c,i18n("PARTIE"),"partie","ASC")}\n ${l.sortableHeaderLink(t,c,i18n("MATRICULE"),"matricule","ASC")}\n ${l.sortableHeaderLink(t,c,i18n("ZONEID_TEXT"),"zoneid_text","ASC")}\n ${l.sortableHeaderLink(t,c,i18n("SECTEUR"),"secteur","ASC")}\n ${l.sortableHeaderLink(t,c,i18n("CADASTRE"),"cadastre","ASC")}\n ${l.sortableHeaderLink(t,c,i18n("REFORME"),"reforme","ASC")}\n ${l.sortableHeaderLink(t,c,i18n("LOTSCOMPLEMENTAIRES"),"lotscomplementaires","ASC")}\n ${l.sortableHeaderLink(t,c,i18n("CERTIFIE"),"certifie","ASC")}\n ${l.sortableHeaderLink(t,c,i18n("NUMEROCERTIFICATION"),"numerocertification","ASC")}\n ${l.sortableHeaderLink(t,c,i18n("OGC"),"ogc","ASC")}\n ${l.headerLink(i18n("TODO"))}\n </tr>\n </thead>\n <tbody>\n ${e}\n </tbody>\n</table>\n</div>\n`,b=(e,t,n,i,r)=>{let a=[];a.push(s.buttonAddNew(c,"#/lot/new",i18n("Add New")));let l=s.renderButtons(a),o=d.buildTitle(p,i18n("lots title")),u=d.buildSubtitle(p,i18n("lots subtitle"));return`\n<form onsubmit="return false;">\n<input type="submit" style="display:none;" id="${c}_dummy_submit">\n\n<div class="js-fixed-heading">\n<div class="js-head">\n <div class="content js-uc-heading js-flex-space">\n <div>\n <div class="title"><i class="${d.icon}"></i> <span>${o}</span></div>\n <div class="subtitle">${u}</div>\n </div>\n <div>\n ${s.wrapContent("js-uc-actions",l)}\n </div>\n </div>\n ${s.wrapContent("js-uc-tabs",n)}\n</div>\n<div class="js-body">\n ${s.wrapContent("js-uc-notification",r)}\n ${s.wrapContent("js-uc-notification",i)}\n ${s.wrapContent("js-uc-pager",e)}\n ${s.wrapContent("js-uc-list",t)}\n</div>\n</div>\n\n</form>\n`},e("fetchState",g=e=>(i.registerDirtyExit(null),n.POST("/lot/search",u.pager).then((e=>{u=e,p=e.xtra,{}})).then(o.fetch_canton()).then(o.fetch_municipalite()).then(o.fetch_contingent()).then(o.fetch_droit_coupe()).then(o.fetch_entente_paiement()))),e("fetch",(e=>{e[0];n.prepareRender(c,i18n("lots")),g().then(n.render).catch(n.render)})),v=()=>{n.prepareRender(c,i18n("lots")),n.POST("/lot/search",u.pager).then((e=>{u=e})).then(n.render).catch(n.render)},e("render",(()=>{if(!_())return"";if(n.fatalError())return n.fatalErrorTemplate();if(null==u||null==u.list||u.list instanceof Array==0)return n.warningTemplate()||n.unexpectedTemplate();let e=n.warningTemplate();const t=u.list.reduce(((e,t,n)=>{let i=l.rowNumber(u.pager,n);return e+h(t,i)}),"");r.getCurrentYear();const i=f(),a=l.searchTemplate(u.pager,c),s=l.render(u.pager,c,[20,50],a,i),o=$(t,u.pager),p=d.tabTemplate(null,null);return b(s,o,p,"",e)})),e("postRender",(()=>{_()})),e("inContext",_=()=>n.inContext(c)),x=e=>{null==m&&(m={id:e}),m.id=e},T=e=>null!=m&&m.id==e,e("goto",((e,t)=>{u.pager.pageNo=e,u.pager.pageSize=t,v()})),e("sortBy",((e,t)=>{u.pager.pageNo=1,u.pager.sortColumn=e,u.pager.sortDirection=t,v()})),e("search",(e=>{u.pager.searchText=e.value,u.pager.pageNo=1,v()})),e("gotoDetail",(e=>{x(e),i.goto(`#/lot/${e}`)}))}}})),System.register("src/territoire/lot",["_BaseApp/src/core/app","_BaseApp/src/core/router","_BaseApp/src/lib-ts/misc","_BaseApp/src/theme/theme","_BaseApp/src/theme/calendar","_BaseApp/src/theme/autocomplete","src/admin/lookupdata","src/permission","src/territoire/layout"],(function(e,t){"use strict";var n,i,r,a,s,l,o,d,c,u,p,m,f,h,$,b,g,v,_,x,T,y,S,w,C,A,E,I,N,k,j;t&&t.id;return{setters:[function(e){n=e},function(e){i=e},function(e){r=e},function(e){a=e},function(e){s=e},function(e){l=e},function(e){o=e},function(e){d=e},function(e){c=e}],execute:function(){e("NS",u="App_lot"),p=["cantonid_text","municipaliteid_text","proprietaireid_text","contingentid_text","droit_coupeid_text","entente_paiementid_text","zoneid_text"],f={},h={},b=!1,g=!1,v=new s.Calendar(`${u}_contingent_date`),_=new s.Calendar(`${u}_droit_coupe_date`),x=new s.Calendar(`${u}_entente_paiement_date`),T={list:[],pager:{pageNo:1,pageSize:5,sortColumn:"ID",sortDirection:"ASC",filter:{}}},(y=new l.Autocomplete(u,"proprietaireid",!0)).options={keyTemplate:e=>`${e.id}`,valueTemplate:e=>`${e.id} - ${e.nom}`,detailTemplate:e=>`<b>${e.id} - ${e.nom}</b>`},S=(e,t,n,i,s,l,o)=>{let d={addon:e.proprietaireid?`<a class="button is-text" href="#/proprietaire/${e.proprietaireid}">Voir</a>`:null,required:!0};return`\n\n${b?"\n":`\n ${a.renderStaticField(r.toStaticNumber(e.id),i18n("ID"))}\n`}\n ${a.renderDropdownField(u,"cantonid",t,i18n("CANTONID"))}\n ${a.renderTextField(u,"rang",e.rang,i18n("RANG"),25)}\n ${a.renderTextField(u,"lot",e.lot,i18n("LOT"),6)}\n ${a.renderDropdownField(u,"municipaliteid",n,i18n("MUNICIPALITEID"))}\n ${a.renderNumberField(u,"superficie_total",e.superficie_total,i18n("SUPERFICIE_TOTAL"))}\n ${a.renderNumberField(u,"superficie_boisee",e.superficie_boisee,i18n("SUPERFICIE_BOISEE"))}\n ${a.renderAutocompleteField(u,"proprietaireid",i,i18n("PROPRIETAIREID"),d)}\n ${a.renderDropdownField(u,"contingentid",s,i18n("CONTINGENTID"))}\n ${a.renderCalendarField(u,"contingent_date",v,i18n("CONTINGENT_DATE"))}\n ${a.renderDropdownField(u,"droit_coupeid",l,i18n("DROIT_COUPEID"))}\n ${a.renderCalendarField(u,"droit_coupe_date",_,i18n("DROIT_COUPE_DATE"))}\n ${a.renderDropdownField(u,"entente_paiementid",o,i18n("ENTENTE_PAIEMENTID"))}\n ${a.renderCalendarField(u,"entente_paiement_date",x,i18n("ENTENTE_PAIEMENT_DATE"))}\n ${a.renderCheckboxField(u,"actif",e.actif,i18n("ACTIF"))}\n ${a.renderTextField(u,"sequence",e.sequence,i18n("SEQUENCE"),6)}\n ${a.renderCheckboxField(u,"partie",e.partie,i18n("PARTIE"))}\n ${a.renderTextField(u,"matricule",e.matricule,i18n("MATRICULE"),20)}\n ${a.renderTextField(u,"secteur",e.secteur,i18n("SECTEUR"),2)}\n ${a.renderNumberField(u,"cadastre",e.cadastre,i18n("CADASTRE"))}\n ${a.renderCheckboxField(u,"reforme",e.reforme,i18n("REFORME"))}\n ${a.renderTextareaField(u,"lotscomplementaires",e.lotscomplementaires,i18n("LOTSCOMPLEMENTAIRES"),255)}\n ${a.renderCheckboxField(u,"certifie",e.certifie,i18n("CERTIFIE"))}\n ${a.renderTextField(u,"numerocertification",e.numerocertification,i18n("NUMEROCERTIFICATION"),50)}\n ${a.renderCheckboxField(u,"ogc",e.ogc,i18n("OGC"))}\n ${a.renderBlame(e,b)}\n`},w=(e,t,n,i,r)=>{let s=b,l=!s,o=!s,d=!b,p=[];p.push(a.buttonCancel(u)),s&&p.push(a.buttonInsert(u)),l&&p.push(a.buttonDelete(u)),o&&p.push(a.buttonAddNew(u,"#/lot/new")),d&&p.push(a.buttonUpdate(u));let m=a.renderButtons(p),f=c.buildTitle($,b?i18n("New lot"):i18n("lot Details")),h=c.buildSubtitle($,i18n("lot subtitle"));return`\n<form onsubmit="return false;" >\n<input type="submit" style="display:none;" id="${u}_dummy_submit">\n\n<div class="js-fixed-heading">\n<div class="js-head">\n <div class="content js-uc-heading js-flex-space">\n <div>\n <div class="title"><i class="${c.icon}"></i> <span>${f}</span></div>\n <div class="subtitle">${h}</div>\n </div>\n <div>\n ${a.wrapContent("js-uc-actions",m)}\n ${a.renderBlame(e,b)}\n </div>\n </div>\n ${a.wrapContent("js-uc-tabs",n)}\n</div>\n<div class="js-body">\n ${a.wrapContent("js-uc-notification",r)}\n ${a.wrapContent("js-uc-notification",i)}\n ${a.wrapContent("js-uc-details",t)}\n</div>\n</div>\n\n${a.renderModalDelete(`modalDelete_${u}`,`${u}.drop()`)}\n\n</form>\n`},C=()=>g?n.dirtyTemplate(u,r.changes(h,f)):"",e("fetchState",A=e=>(b=isNaN(e),g=!1,i.registerDirtyExit(j),n.GET(`/lot/${b?"new":e}`).then((t=>{f=t.item,h=r.clone(f),$=t.xtra,m={id:e},v.setState(f.contingent_date),_.setState(f.droit_coupe_date),x.setState(f.entente_paiement_date),y.setState(f.proprietaireid,f.proprietaireid_text)})).then(o.fetch_canton()).then(o.fetch_municipalite()).then(o.fetch_contingent()).then(o.fetch_droit_coupe()).then(o.fetch_entente_paiement()))),e("fetch",(e=>{let t=+e[0];n.prepareRender(u,i18n("lot")),A(t).then(n.render).catch(n.render)})),e("render",(()=>{if(!E())return"";if(n.fatalError())return n.fatalErrorTemplate();if(null==f||0==Object.keys(f).length)return n.warningTemplate()||n.unexpectedTemplate();let e=d.getCurrentYear(),t=o.get_canton(e),i=o.get_municipalite(e),r=o.get_contingent(e),s=o.get_droit_coupe(e),l=o.get_entente_paiement(e),u=a.renderOptions(t,f.cantonid,!0),p=a.renderOptions(i,f.municipaliteid,!0),m=a.renderOptions(r,f.contingentid,!0),h=a.renderOptions(s,f.droit_coupeid,!0),g=a.renderOptions(l,f.entente_paiementid,!0);y.pagedList=T;const v=S(f,u,p,y,m,h,g),_=c.tabTemplate(f.id,$,b),x=C(),A=n.warningTemplate();return w(f,v,_,A,x)})),e("postRender",(()=>{E()&&(v.postRender(),_.postRender(),x.postRender(),n.setPageTitle(b?i18n("New lot"):$.title))})),e("inContext",E=()=>n.inContext(u)),I=()=>{let e=r.clone(f);return e.cantonid=r.fromSelectText(`${u}_cantonid`,f.cantonid),e.rang=r.fromInputTextNullable(`${u}_rang`,f.rang),e.lot=r.fromInputTextNullable(`${u}_lot`,f.lot),e.municipaliteid=r.fromSelectText(`${u}_municipaliteid`,f.municipaliteid),e.superficie_total=r.fromInputNumberNullable(`${u}_superficie_total`,f.superficie_total),e.superficie_boisee=r.fromInputNumberNullable(`${u}_superficie_boisee`,f.superficie_boisee),e.proprietaireid=r.fromAutocompleteText(`${u}_proprietaireid`,f.proprietaireid),e.contingentid=r.fromSelectText(`${u}_contingentid`,f.contingentid),e.contingent_date=r.fromInputDateNullable(`${u}_contingent_date`,f.contingent_date),e.droit_coupeid=r.fromSelectText(`${u}_droit_coupeid`,f.droit_coupeid),e.droit_coupe_date=r.fromInputDateNullable(`${u}_droit_coupe_date`,f.droit_coupe_date),e.entente_paiementid=r.fromSelectText(`${u}_entente_paiementid`,f.entente_paiementid),e.entente_paiement_date=r.fromInputDateNullable(`${u}_entente_paiement_date`,f.entente_paiement_date),e.actif=r.fromInputCheckbox(`${u}_actif`,f.actif),e.sequence=r.fromInputTextNullable(`${u}_sequence`,f.sequence),e.partie=r.fromInputCheckbox(`${u}_partie`,f.partie),e.matricule=r.fromInputTextNullable(`${u}_matricule`,f.matricule),e.secteur=r.fromInputTextNullable(`${u}_secteur`,f.secteur),e.cadastre=r.fromInputNumberNullable(`${u}_cadastre`,f.cadastre),e.reforme=r.fromInputCheckbox(`${u}_reforme`,f.reforme),e.lotscomplementaires=r.fromInputTextNullable(`${u}_lotscomplementaires`,f.lotscomplementaires),e.certifie=r.fromInputCheckbox(`${u}_certifie`,f.certifie),e.numerocertification=r.fromInputTextNullable(`${u}_numerocertification`,f.numerocertification),e.ogc=r.fromInputCheckbox(`${u}_ogc`,f.ogc),e},N=e=>n.hasNoError(),k=()=>{document.getElementById(`${u}_dummy_submit`).click();let e=document.getElementsByTagName("form")[0];return e.classList.add("js-error"),e.checkValidity()},e("oncalendar",(e=>{v.id==e&&v.toggle(),_.id==e&&_.toggle(),x.id==e&&x.toggle()})),e("onautocomplete",(e=>{y.id==e&&(T.pager.searchText=y.textValue,n.POST("/fournisseur/search",T.pager).then((e=>{T=e})).then(n.render))})),e("onchange",(e=>{f=I(),n.render()})),e("cancel",(()=>{i.goBackOrResume(g)})),e("create",(()=>{let e=I();if(k()){if(!N())return n.render();n.prepareRender(),n.POST("/lot",r.createBlack(e,p)).then((e=>{let t=e;r.toastSuccessSave(),i.goto(`#/lot/${t.id}`,10)})).catch(n.render)}})),e("save",((e=!1)=>{let t=I();if(k()){if(!N())return n.render();n.prepareRender(),n.PUT("/lot",r.createBlack(t,p)).then((t=>{r.toastSuccessSave(),e?i.goto("#/lots/",100):i.goto(`#/lot/${m.id}`,10)})).catch(n.render)}})),e("drop",(()=>{n.prepareRender(),n.DELETE("/lot",m).then((e=>{i.goto("#/lots/",250)})).catch(n.render)})),j=()=>((g=!r.same(h,I()))&&setTimeout((()=>{f=I(),n.render()}),10),g)}}})),System.register("src/territoire/main",["_BaseApp/src/core/router","src/territoire/lots","src/territoire/lot"],(function(e,t){"use strict";var n,i,r;t&&t.id;return{setters:[function(e){n=e},function(e){i=e},function(e){r=e}],execute:function(){window[i.NS]=i,window[r.NS]=r,e("startup",(()=>{n.addRoute("^#/lots/?(.*)?$",i.fetch),n.addRoute("^#/lot/?(.*)?$",r.fetch)})),e("render",(()=>`\n<div>\n ${i.render()}\n ${r.render()}\n</div>\n`)),e("postRender",(()=>{i.postRender(),r.postRender()}))}}})),System.register("src/layout",["_BaseApp/src/core/app","src/permission","src/main","src/home","src/admin/main","src/support/main","src/christian/main","src/fournisseur/main","src/territoire/main"],(function(e,t){"use strict";var n,i,r,a,s,l,o,d,c,u,p,m,f,h;t&&t.id;return{setters:[function(e){n=e},function(e){i=e},function(e){r=e},function(e){a=e},function(e){s=e},function(e){l=e},function(e){o=e},function(e){d=e},function(e){c=e}],execute:function(){e("NS",u="App_Layout"),e("render",(()=>{r.saveUIState();let e=`\n${a.render()}\n${s.render()}\n${l.render()}\n${o.render()}\n${d.render()}\n${c.render()}\n`,t=m(a.getMenuData());return`\n<div class="js-layout ${r.state.menuOpened?"":"js-close"}">\n${p()}\n${f(t)}\n<section class="js-uc-main js-waitable">\n${e}\n</section>\n</div>\n`})),e("postRender",(()=>{a.postRender(),s.postRender(),l.postRender(),o.postRender(),d.postRender(),c.postRender()})),p=()=>`\n<header class="js-uc-header">\n\n <div class="js-logo">\n <div class="js-bars">\n <button class="button is-primary" onclick="${u}.menuClick()">\n <div class="icon"><i class="fas fa-bars"></i></div>\n </button>\n </div>\n <a href="#" onclick="${u}.toggle('opsfms')">\n <span>Gestion/Paye</span>\n </a>\n <div style="width:20px;margin-right:1rem;">&nbsp;</div>\n </div>\n\n <div class="js-navbar">\n <div class="js-navbar-items">\n <div class="js-items">\n <div>\n <span class="has-text-grey-light">Année courante:</span> <span class="has-text-white">2020</span>\n </div>\n </div>\n <div class="js-items">\n <button class="button is-primary" onclick="${u}.help()" style="font-size:125%">\n <span class="icon"><i class="fas fa-question-circle"></i></span>\n </button>\n <div class="navbar-item has-dropdown" onclick="${u}.toggleProfileMenu(this)">\n <a class="navbar-link">\n ${i.getEmail()}\n </a>\n <div class="navbar-dropdown">\n <div class="navbar-item">\n <div><b>${i.getName()}</b></div>\n </div>\n <div class="navbar-item">\n <button class="button is-fullwidth is-primary" onclick="${u}.toggleProfileMenu();${u}.editProfile()">\n <i class="far fa-user"></i>&nbsp;&nbsp;Edit Profile\n </button>\n </div>\n <hr class="navbar-divider">\n <div class="navbar-item">\n <button class="button is-fullwidth is-outlined" onclick="${u}.toggleProfileMenu();App_Auth.signout();">\n <span class="icon"><i class="fas fa-sign-out-alt"></i></span>&nbsp;${i18n("Sign out")}\n </button>\n </div>\n <hr class="navbar-divider">\n <a href="#" class="navbar-item">\n <div>Terms of Service</div>\n </a>\n </div>\n </div>\n <button class="button is-primary" onclick="App_Auth.signout();">\n <span class="icon"><i class="fas fa-sign-out-alt"></i></span>&nbsp;${i18n("Sign out")}\n </button>\n </div>\n </div>\n </div>\n\n</header>`,m=e=>{const t=(e,t)=>{if(e.hidden)return"";let i=`${t}-${e.name}`,a=r.state.subMenu==i;return`\n <li>\n <a onclick="${u}.toggle('${i}')" class="${a?"js-opened":""}">${e.name}</a>\n${a?`\n <ul>${e.links.filter((e=>null==e.canView||e.canView)).reduce(((e,t)=>e+(e=>{if(e.hidden||e.noSidebar)return"";let t=null==e.href&&null==e.onclick&&!e.markup,i=e.href?e.href:"#",r=i.startsWith("http")||e.isExternal,a=[],s=e.ns&&n.inContext(e.ns);t&&a.push("js-disabled"),s&&a.push("is-active");let l=e.classes?`class="${e.classes}"`:"";return e.markup?`<li ${l}>${e.markup}</li>`:`<li ${l}><a href="${i}" ${a.length?`class="${a.join(" ")}"`:""} ${r?'target="_new"':""} ${e.onclick?`onclick="${e.onclick}"`:""}>${e.name}</a></li>`})(t)),"")}</ul>\n`:""}\n </li>\n`};return e.filter((e=>e.canView)).reduce(((e,n)=>{return e+`\n <p class="menu-label">\n <i class="${(i=n).icon} fa-2x"></i> ${i.name}\n </p>\n <ul class="menu-list">\n ${i.sections.filter((e=>null==e.canView||e.canView)).reduce(((e,n)=>e+t(n,i.name)),"")}\n </ul>\n`;var i}),"")},f=e=>`\n<aside class="menu has-background-black-ter js-uc-aside">\n <div class="js-wrapper">\n <ul class="menu-list">\n <li><a href="#" class="${h(a.NS)}" onclick="${u}.toggle('home')"><i class="far fa-home"></i> ${i18n("HOME")}</a></li>\n </ul>\n ${e}\n </div>\n</aside>\n`,h=e=>n.inContext(e)?"is-active":"",e("menuClick",(()=>{r.state.menuOpened=!r.state.menuOpened,r.saveUIState(),n.render()})),e("toggle",(e=>{r.state.subMenu=r.state.subMenu==e?"":e,n.render()})),e("setOpenedMenu",(e=>{r.state.subMenu=e})),e("editProfile",(()=>!1)),e("toggleProfileMenu",(e=>{e&&e.classList.toggle("is-active")}))}}})),System.register("src/main",["_BaseApp/src/core/app","_BaseApp/src/main","_BaseApp/src/theme/theme","_BaseApp/src/theme/latlong","src/fr-CA","src/permission","src/layout","src/home","src/admin/main","src/support/main","src/christian/main","src/fournisseur/main","src/territoire/main"],(function(e,t){"use strict";var n,i,r,a,s,l,o,d,c,u,p,m,f,h,$;t&&t.id;return{setters:[function(e){n=e},function(e){i=e},function(e){r=e},function(e){a=e},function(e){s=e},function(e){l=e},function(e){o=e},function(e){d=e},function(e){c=e},function(e){u=e},function(e){p=e},function(e){m=e},function(e){f=e}],execute:function(){window.App=n,window[r.NS]=r,window[a.NS]=a,window[o.NS]=o,window[d.NS]=d,window.parent!=window&&window.parent.stopLoader(),document.documentElement.lang,i18n.translator.add(s.fr_CA),e("startup",((e=!1)=>{let t=i.startup(e,o,r).router;t.addRoute("^#/?$",d.fetch),t.registerHashChanged((e=>{e.startsWith("#/signin")&&d.clearMenuData()})),c.startup(),u.startup(),p.startup(),m.startup(),f.startup(),$()})),e("loadUIState",$=()=>{let t=l.getUID(),n=null!=t?`home-state:${t}`:"home-state";e("state",h=JSON.parse(localStorage.getItem(n))),null==h&&e("state",h={menuOpened:!0,subMenu:""})}),e("saveUIState",(()=>{let e=l.getUID(),t=null!=e?`home-state:${e}`:"home-state";localStorage.setItem(t,JSON.stringify(h))}))}}})),System.register("src/app",["src/main"],(function(e,t){"use strict";var n;t&&t.id;return{setters:[function(e){n=e}],execute:function(){n.startup()}}})),System.register("src/territoire/lots2",["_BaseApp/src/core/app","_BaseApp/src/core/router","src/permission","_BaseApp/src/lib-ts/misc","_BaseApp/src/theme/theme","_BaseApp/src/theme/pager","src/admin/lookupdata"],(function(e,t){"use strict";var n,i,r,a,s,l,o,d,c,u,p,m,f,h,$,b,g,v,_;t&&t.id;return{setters:[function(e){n=e},function(e){i=e},function(e){r=e},function(e){a=e},function(e){s=e},function(e){l=e},function(e){o=e}],execute:function(){e("NS",d="App_commitcbeff"),"commitcbeff_table",c=["_editing","_deleting","_isNew","totalcount","regionluid_text"],u={list:[],pager:{pageNo:1,pageSize:1e3,sortColumn:"ID",sortDirection:"ASC",filter:{year:void 0,regionluid:void 0}}},p={},m=!1,h=!1,$=(e,t,n,i,r)=>{let l=e.id,o='<td class="js-td-33">&nbsp;</td>';e._editing&&(o=`<td onclick="${d}.save()" class="js-td-33" title="Click to confirm"><i class="fa fa-check"></i></td>`),e._deleting&&(o=`<td onclick="${d}.drop()" class="js-td-33" title="Click to confirm"><i class="fa fa-check"></i></td>`),e._isNew&&(o=`<td onclick="${d}.create()" class="js-td-33" title="Click to confirm"><i class="fa fa-check"></i></td>`);let c=e._editing||e._deleting||e._isNew,u=!c,p=null!=n||null!=t&&l!=t||m&&!e._isNew,f=[];return(e._editing||e._isNew)&&f.push("js-not-same"),e._deleting&&f.push("js-strikeout"),e._isNew&&f.push("js-new"),p&&f.push("js-readonly"),`\n<tr data-id="${l}" class="${f.join(" ")}" style="cursor: pointer;">\n <td class="js-index">${i}</td>\n\n${u?`<td onclick="${d}.selectfordrop(${l})" class="has-text-danger js-td-33 js-drop" title="Click to mark for deletion"><i class='fas fa-times'></i></td>`:""}\n${c?`<td onclick="${d}.undo()" class="has-text-primary js-td-33" title="Click to undo"><i class='fa fa-undo'></i></td>`:""}\n${o}\n\n${p?`\n <td>${a.toStaticText(e.year)}</td>\n <td>${a.toStaticText(e.regionluid_text)}</td>\n <td>${a.toStaticText(e.details)}</td>\n <td>${a.toStaticText(e.monthpaid)}</td>\n <td>${a.toStaticCheckbox(e.paid)}</td>\n <td>${a.toStaticText(e.amount)}</td>\n <td>${a.toStaticText(e.comment)}</td>\n <td>${a.toStaticCheckbox(e.archive)}</td>\n`:`\n <td class="js-inline-input">${s.renderNumberInline(d,`year_${l}`,e.year,!0)}</td>\n <td class="js-inline-select">${s.renderDropdownInline(d,`regionluid_${l}`,r,!0)}</td>\n <td class="js-inline-input">${s.renderTextInline(d,`details_${l}`,e.details,50)}</td>\n <td class="js-inline-input">${s.renderTextInline(d,`monthpaid_${l}`,e.monthpaid,25)}</td>\n <td class="js-inline-input">${s.renderCheckboxInline(d,`paid_${l}`,e.paid)}</td>\n <td class="js-inline-input">${s.renderNumberInline(d,`amount_${l}`,e.amount,!0)}</td>\n <td class="js-inline-input">${s.renderTextInline(d,`comment_${l}`,e.comment,50)}</td>\n <td class="js-inline-input">${s.renderCheckboxInline(d,`archive_${l}`,e.archive)}</td>\n`}\n</tr>`},b=(e,t,n)=>{let i=null!=n||null!=t||m;return`\n<div id="commitcbeff_table" class="table-container">\n<table class="table is-hoverable js-inline" style="width: 100px; table-layout: fixed;">\n <thead>\n <tr>\n <th style="width:99px" colspan="3"></th>\n <th style="width:100px">${i18n("YEAR")}</th>\n <th style="width:100px">${i18n("REGION")}</th>\n <th style="width:100px">${i18n("DETAILS")}</th>\n <th style="width:100px">${i18n("MONTHPAID")}</th>\n <th style="width:100px">${i18n("PAID")}</th>\n <th style="width:100px">${i18n("AMOUNT")}</th>\n <th style="width:100px">${i18n("COMMENT")}</th>\n <th style="width:100px">${i18n("ARCHIVE")}</th>\n </tr>\n </thead>\n <tbody>\n ${e}\n <tr class="js-insert-row ${i?"js-disabled":""}">\n <td class="js-index js-td-33">*</td>\n <td class="has-text-primary js-td-33 js-add" onclick="${d}.addNew()" title="Click to add a new row"><i class="fas fa-plus"></i></td>\n <td></td>\n <td colspan="8"></td>\n </tr>\n </tbody>\n</table>\n</div>\n`},g=e=>`\n${s.wrapContent("js-uc-list",e)}\n`,e("fetchState",((e,t)=>(h=isNaN(e),f=t||f,m=!1,n.POST("/commitcbeff/search",u.pager).then((e=>{u=e,p=a.clone(u),{}})).then(o.fetch_region())))),e("preRender",(()=>{})),e("render",(()=>{if(h)return"";let e,t;u.list.forEach(((n,i)=>{let r=p.list[i];n._editing=!a.same(n,r),n._editing&&(e=n.id),n._deleting&&(t=n.id)}));let n=r.getCurrentYear(),i=o.get_region(n);const d=u.list.reduce(((n,r,a)=>{let o=l.rowNumber(u.pager,a),d=s.renderOptions(i,r.regionluid,m);return n+$(r,e,t,o,d)}),""),c=b(d,e,t);return g(c)})),e("postRender",(()=>{})),e("inContext",(()=>n.inContext(d))),v=()=>{let e=a.clone(u);return e.list.forEach((e=>{let t=e.id;e.year=a.fromInputNumber(`${d}_year_${t}`,e.year),e.regionluid=a.fromSelectNumber(`${d}_regionluid_${t}`,e.regionluid),e.details=a.fromInputTextNullable(`${d}_details_${t}`,e.details),e.monthpaid=a.fromInputTextNullable(`${d}_monthpaid_${t}`,e.monthpaid),e.paid=a.fromInputCheckbox(`${d}_paid_${t}`,e.paid),e.amount=a.fromInputNumber(`${d}_amount_${t}`,e.amount),e.comment=a.fromInputTextNullable(`${d}_comment_${t}`,e.comment),e.archive=a.fromInputCheckbox(`${d}_archive_${t}`,e.archive)})),e},_=()=>{document.getElementById(`${f}_dummy_submit`).click();let e=document.getElementsByTagName("form")[0];return e.classList.add("js-error"),e.checkValidity()},e("onchange",(e=>{u=v(),n.render()})),e("undo",(()=>{m&&(m=!1,p.list.pop()),u=a.clone(p),n.render()})),e("addNew",(()=>n.GET("/commitcbeff/new").then((e=>{u.list.push(e),p=a.clone(u),m=!0,e._isNew=!0})).then(n.render).catch(n.render))),e("create",(()=>{let e=v().list.find((e=>e._isNew));_()&&(n.prepareRender(),n.POST("/commitcbeff",a.createBlack(e,c)).then((()=>{p=a.clone(u),i.gotoCurrent(1)})).catch(n.render))})),e("save",(()=>{let e=v().list.find((e=>e._editing));_()&&(n.prepareRender(),n.PUT("/commitcbeff",a.createBlack(e,c)).then((()=>{p=a.clone(u),i.gotoCurrent(1)})).catch(n.render))})),e("selectfordrop",(e=>{(u=a.clone(p)).list.find((t=>t.id==e))._deleting=!0,n.render()})),e("drop",(()=>{n.prepareRender();let e=u.list.find((e=>e._deleting));n.DELETE("/commitcbeff",{id:e.id,updated:e.updated}).then((()=>{p=a.clone(u),i.gotoCurrent(1)})).catch(n.render)})),e("hasChanges",(()=>!a.same(p,u)))}}}));